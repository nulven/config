!function(e){function t(t){for(var r,i,u=t[0],s=t[1],c=t[2],f=0,d=[];f<u.length;f++)i=u[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);d.length;)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,u=1;u<n.length;u++){var s=n[u];0!==o[s]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={3:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var u=window.webpackJsonp=window.webpackJsonp||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=s;a.push([1396,0,1]),n()}({1046:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=(r=b(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getInfo();case 2:if(n=e.sent,(r=n.id)&&t){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,Promise.all([(0,y.isObservationFeatureEnabled)(),x(r,t)]);case 9:return o=e.sent,a=u(o,2),i=a[0],s=a[1],e.abrupt("return",i&&s&&s.length>0);case 16:return e.prev=16,e.t0=e.catch(6),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,this,[[6,16]])}))),function(e){return r.apply(this,arguments)}),c=(o=b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt("return");case 2:if((0,y.isObservationFeatureEnabled)()){e.next=5;break}return e.abrupt("return");case 5:new h.CheckoutObservationContentManager({messages:d.default,executeScript:v.default,scriptPath:"pageScripts/checkoutObservation.js",allowedOrigins:[window.location.origin],store:w}).start(),d.default.send(g.MESSAGE_ACTIONS.ENABLE_BG_SERVER,{storeId:w.storeId},{background:!0}).catch((function(e){f.default.debug("[CheckoutObservation] Failed to start process: "+JSON.stringify(e))})),S=!0;case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),l=(a=b(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.isObservationFeatureEnabled)();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:d.default.addListener("stores:pageview",function(){var e=b(regeneratorRuntime.mark((function e(n){var r,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.id,o=a.sessionId,w={storeId:r,sessionId:o,pageTitle:E(),pageURL:_()},e.next=4,s(r);case 4:e.sent&&c();case 6:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}()),d.default.addListener("offers:action",function(){var e=b(regeneratorRuntime.mark((function e(n){var r,o,a,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.action,o=u.success,a=void 0,"object"===(void 0===o?"undefined":i(o))&&null!==o&&(a=o.storeId),e.t0=r,e.next="offerActivated"===e.t0?6:11;break;case 6:return e.next=8,s(a);case 8:return e.sent&&c(),e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),f=m(n(9)),d=m(n(7)),p=m(n(14)),v=m(n(495)),h=n(2479),g=n(522),y=n(2519);function m(e){return e&&e.__esModule?e:{default:e}}function b(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var w={};function E(){try{return document.title}catch(e){return null}}function _(){try{return window.location.href}catch(e){return null}}function x(e,t){return d.default.send("offers:action",{action:"getProductOfferActivations",data:{userId:e,storeId:t,useCache:!0}},{background:!0})}var S=!1;t.default={start:l}},128:function(e,t,n){const r=n(527),{MAX_LENGTH:o,MAX_SAFE_INTEGER:a}=n(526),{re:i,t:u}=n(335),{compareIdentifiers:s}=n(947);class c{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?i[u.LOOSE]:i[u.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<a)return t}return e}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),s(this.major,e.major)||s(this.minor,e.minor)||s(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return s(n,o)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const n=this.build[t],o=e.build[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return s(n,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=c},1321:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2481),t),o(n(2482),t),o(n(2483),t)},1322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingService=void 0;var r=function(){function e(e){var t=e.driver;this.driver=t}return e.prototype.setLogLevel=function(e){this.driver.setLogLevel(e)},e.prototype.getLogLevel=function(){return this.driver.getLogLevel()},e.prototype.debug=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).debug.apply(e,t)},e.prototype.info=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).info.apply(e,t)},e.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).warn.apply(e,t)},e.prototype.error=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).error.apply(e,t)},e}();t.LoggingService=r},1323:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyCheckoutServer=t.HoneyCheckoutAction=void 0;var a=n(334);!function(e){e.PayPalCreateOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/create",e.PayPalApproveOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/approve",e.PayPalCancelOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/cancel",e.PayPalErrorOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/error",e.PayPalVersion="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/version",e.PayPalConfig="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/config",e.HoneyCheckoutIFrameReady="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/iframe/ready",e.HoneyCheckoutIFrameComplete="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/iframe/complete"}(t.HoneyCheckoutAction||(t.HoneyCheckoutAction={}));var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(a.Server);t.HoneyCheckoutServer=i},1324:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DiscoveryRelayServer=t.DiscoveryRelayAction=void 0;var a=n(334);!function(e){e.DiscoveredPayPal="9ac7ac40-5417-4a34-a35c-acb253c4bb47/checkout/relay/discovery/paypal",e.DiscoveredHoney="9ac7ac40-5417-4a34-a35c-acb253c4bb47/checkout/relay/discovery/honey",e.Deployed="9ac7ac40-5417-4a34-a35c-acb253c4bb47/deployed"}(t.DiscoveryRelayAction||(t.DiscoveryRelayAction={}));var i=function(e){function t(t){var n=t.transport;return e.call(this,{transport:n})||this}return o(t,e),t}(a.Server);t.DiscoveryRelayServer=i},1325:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundServer=t.BackgroundAction=void 0;var a=n(334);!function(e){e.FrameIds="87f7056f-b146-4a3f-8ef5-e1180a94932a/background/frameIds",e.FrameIdsRemove="87f7056f-b146-4a3f-8ef5-e1180a94932a/background/frameIdsRemove",e.ExecuteScript="87f7056f-b146-4a3f-8ef5-e1180a94932a/background/executeScript",e.SendMessage="87f7056f-b146-4a3f-8ef5-e1180a94932a/background/sendMessage",e.RelayReady="87f7056f-b146-4a3f-8ef5-e1180a94932a/background/relayReady"}(t.BackgroundAction||(t.BackgroundAction={}));var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(a.Server);t.BackgroundServer=i},1326:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.URLObservationService=t.FrameIdKey=void 0;var o,a=n(437);!function(e){e.PayPal="paypal",e.Honey="honey"}(o=t.FrameIdKey||(t.FrameIdKey={}));var i=function(){function e(e){var t=e.paypalRequestObserver,n=e.honeyRequestObserver,r=e.paypalURLPatterns,o=e.honeyURLPatterns;if(this.frameIdIndex={},this.paypalFrameObservation=new a.Observable({value:{},replay:!1}),this.honeyFrameObservation=new a.Observable({value:{},replay:!1}),!t)throw new Error("a paypalRequestObserver must be provided");if(!n)throw new Error("a honeyRequestObserver must be provided");if(!r)throw new Error("an array of paypalURLPatterns must be provided");if(!o)throw new Error("an array of honeyURLPatterns must be provided");this.expiresAfterSeconds=3600,this.paypalRequestObserver=t,this.honeyRequestObserver=n,this.paypalURLPatterns=r,this.honeyURLPatterns=o}return e.prototype.start=function(){var e=this;this.disposeSubscriptions();var t=this.paypalRequestObserver.completedRequest.subscribe((function(t){e.onPayPalObservation(t)})),n=this.honeyRequestObserver.completedRequest.subscribe((function(t){e.onHoneyObservation(t)}));this.paypalObserverSubscription=t,this.honeyObserverSubscription=n,this.paypalRequestObserver.start({urls:this.paypalURLPatterns}),this.honeyRequestObserver.start({urls:this.honeyURLPatterns})},e.prototype.stop=function(){this.disposeSubscriptions()},e.prototype.disposeSubscriptions=function(){this.honeyObserverSubscription&&(this.honeyObserverSubscription.dispose(),this.honeyObserverSubscription=void 0),this.paypalObserverSubscription&&(this.paypalObserverSubscription.dispose(),this.paypalObserverSubscription=void 0)},e.prototype.setStoreId=function(e){if(this.storeId==e)return Promise.resolve();var t=this.storeId;return this.storeId=e,this.onStoreIdChanged({toStoreId:e,fromStoreId:t})},e.prototype.onStoreIdChanged=function(e){e.toStoreId,e.fromStoreId;return Promise.resolve()},e.prototype.resetFrameIdCache=function(e){var t=void 0===e?{}:e,n=t.honey,r=t.paypal;if(n||r){if(n&&n.tabId&&this.frameIdIndex[n.tabId])delete this.frameIdIndex[n.tabId].frames[o.Honey];if(r&&r.tabId&&this.frameIdIndex[r.tabId])delete this.frameIdIndex[r.tabId].frames[o.PayPal]}else this.frameIdIndex={}},e.prototype.onPayPalObservation=function(e){var t=this.processUrlObservation({key:o.PayPal,event:e});this.paypalFrameObservation.next(t)},e.prototype.onHoneyObservation=function(e){var t=this.processUrlObservation({key:o.Honey,event:e});this.honeyFrameObservation.next(t)},e.prototype.processUrlObservation=function(e){var t,n,a=e.key,i=e.event,u=new URL(i.beforeRequest.url),s=i.beforeRequest.tabId,c=i.beforeRequest.frameId,l=this.frameIdIndex[s]||{},f=l.frames||((t={})[o.PayPal]={},t[o.Honey]={},t),d={frameId:c,origin:u.origin,tabId:s},p=f[a]||{},v=r(r({},p),((n={})[c]=d,n));return f[a]=v,l.expires=Date.now()+1e3*this.expiresAfterSeconds,l.frames=f,this.frameIdIndex[s]=l,this.invalidateExpiredItems(),d},e.prototype.invalidateExpiredItems=function(){var e=this;return new Promise((function(t){setTimeout((function(){var n=Date.now(),r=e.frameIdIndex;Object.keys(r).forEach((function(t){r[t].expires<n&&delete e.frameIdIndex[t]})),t()}),0)}))},e.prototype.getFrameIds=function(e,t){var n=this.frameIdIndex[e],r=[];if(!n)return r;var o=n.frames;if(!o)return r;var a=o[t]||{};return Object.keys(a).map((function(e){return a[e]})).filter((function(e){return null!=e}))},e}();t.URLObservationService=i},1327:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2544),t),o(n(2545),t),o(n(2546),t)},1328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;var r,o=n(1329),a=(r=o)&&r.__esModule?r:{default:r};var i=t.types={checkoutCartContentsDetected:"checkout:cartContentsDetected",checkoutInit:"checkout:init",checkoutOpenFromFS:"checkout:openFromFS",checkoutRouteChange:"checkout:routeChange",checkoutUserUpdate:"checkout:userUpdate",extensionActivateStoreGold:"checkout:extensionActivateStoreGold",extensionAuthFetch:"checkout:extensionAuthFetch",extensionDeleteBgLocalStorageItem:"checkout:extensionDeleteBgLocalStorageItem",extensionDeleteLru:"checkout:extensionDeleteLru",extensionExperimentsGetVariant:"checkout:extensionExperimentsGetVariant",extensionExperimentsTrackImpression:"checkout:extensionExperimentsTrackImpression",extensionGetBgLocalStorageItem:"checkout:extensionGetBgLocalStorageItem",extensionGetContentUILocation:"checkout:extensionGetContentUILocation",extensionGetContentUIVisible:"checkout:extensionGetContentUIVisible",extensionGetCurrentPageTypes:"checkout:extensionGetCurrentPageTypes",extensionGetCurrentStore:"checkout:extensionGetCurrentStore",extensionGetI18nMessage:"checkout:extensionGetI18nMessage",extensionGetI18nMessages:"checkout:extensionGetI18nMessages",extensionGetIsInExperimentPopulation:"checkout:extensionGetIsInExperimentPopulation",extensionGetLru:"checkout:extensionGetLru",extensionGetUserInfo:"checkout:extensionGetUserInfo",extensionGetUserOffers:"checkout:extensionGetUserOffers",extensionGQLMutation:"checkout:extensionGQLMutation",extensionGQLQuery:"checkout:extensionGQLQuery",extensionHideContentUI:"checkout:extensionHideContentUI",extensionInitPaypalCoordinator:"checkout:extensionInitPaypalCoordinator",extensionNativeFetch:"checkout:extensionNativeFetch",extensionOpenContentUILocation:"checkout:extensionOpenContentUILocation",extensionOpenLoginPrompt:"checkout:extensionOpenLoginPrompt",extensionPaypalCoordinatorReady:"checkout:extensionPaypalCoordinatorReady",extensionSetBgLocalStorageItem:"checkout:extensionSetBgLocalStorageItem",extensionSetLru:"checkout:extensionSetLru",extensionShowContentUI:"checkout:extensionShowContentUI",parentRemoveIFrame:"checkout:parentRemoveIFrame",parentRemoveIFrameAttribute:"checkout:parentRemoveIFrameAttribute",parentSendSDataEvent:"checkout:parentSendSDataEvent",parentSetIFrameAttribute:"checkout:parentSetIFrameAttribute",parentUpdateStyles:"checkout:parentUpdateStyles"},u=(0,a.default)({types:i,enableLogging:!1,clientName:"extension"});t.default=u},1329:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2650);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n,r,o,a,i){try{var u=e[a](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function u(e){i(a,r,o,u,s,"next",e)}function s(e){i(a,r,o,u,s,"throw",e)}u(void 0)}))}}var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=e.enableLogging,a=e.clientName||"unknown",i=e.maxResponseTime||1e4,s=null,c=null,l=null;function f(){var e;n&&(e=console).log.apply(e,arguments)}function d(e,n){if(t[e]){var r=t[e].indexOf(n);r>-1&&t[e].splice(r,r+1)}}function p(e,n){return t[e]?t[e].push(n):t[e]=[n],function(){return d(e,n)}}function v(e){return h.apply(this,arguments)}function h(){return(h=u(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t[n.data.type]){e.next=5;break}if(!l){e.next=4;break}if(l(n.origin)){e.next=4;break}return e.abrupt("return");case 4:t[n.data.type].forEach((function(e){e(n.data)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s.postMessage(e,c)}function y(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;g({type:e,messageId:t,data:n,isError:Boolean(r),errorMessage:r})}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,r.v4)();return f("postMessenger: ".concat(a," sending request type '").concat(e,"' to '").concat(c,"':"),t),y(e,n,t),new Promise((function(t,r){var o=!1,u=p(e,(function(a){a.messageId===n&&(o=!0,u(),a.isError?r(new Error("postMessenger: Responder for request type '".concat(e,"' to target '").concat(c,"' failed with message: \"").concat(a.errorMessage,'"'))):t(a.data))}));setTimeout((function(){o||(r(new Error("postMessenger: Time out waiting for target '".concat(c,"' to respond to request from ").concat(a,", type '").concat(e,"'"))),u())}),i)}))}function b(e){var t=[];return Object.entries(e).forEach((function(e){var n=o(e,2),r=n[0],i=n[1],s=p(r,function(){var e=u(regeneratorRuntime.mark((function e(t){var n,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.messageId,o=t.data,e.prev=1,e.next=4,i(o);case 4:u=e.sent,f("postMessenger: ".concat(a," responding to request type '").concat(r,"' from target '").concat(c,"':"),u),y(r,n,u),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),y(r,n,{},e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}());t.push(s)})),function(){t.forEach((function(e){return e()}))}}function w(e,t){s=e,c=t}function E(e){l=e,window.addEventListener("message",v)}function _(){window.removeEventListener("message",v)}return{beginListening:E,stopListening:_,setTarget:w,request:m,addListener:p,removeListener:d,bindResponders:b,types:e.types}};t.default=s},1331:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a,i,u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=(r=L(regeneratorRuntime.mark((function e(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.waitForElement(t,{timeout:o});case 2:return n=e.sent,r=D(n.text()),e.abrupt("return",m.default.cleanPrice(r));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),c=(o=L(regeneratorRuntime.mark((function e(t,n,r){var o,a,i,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==window.MutationObserver){e.next=2;break}return e.abrupt("return");case 2:return o=new MutationObserver(L(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t);case 2:return n=e.sent,e.next=5,T.default.getFeatureFlag("gift_cards_use_remote_iframe");case 5:if(!e.sent){e.next=10;break}return o=_.default.getCurrent(),e.next=10,R.default.request(C.types.giftCardsCartPriceChange,{cartPrice:n,tabId:o.id,prioritized:r,storeId:t.id,storeName:t.name});case 10:case"end":return e.stop()}}),e,u)})))),e.next=5,m.default.waitForElement(n,{timeout:3e3});case 5:return e.prev=5,e.next=8,T.default.getFeatureFlag("gift_card_deals_observe_body_for_total");case 8:a=e.sent,i=a?document.body:document.querySelector(n),o.observe(i,{characterData:!0,attributes:!1,childList:!0,subtree:!0}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),g.default.error("Error attaching mutation observer for store "+t.id+" with selector "+n);case 16:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(e,t,n){return o.apply(this,arguments)}),l=(a=L(regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([I.default.getReminder(t),y.default.get("honey-pay-now:gift-card-deal-reminder:"+t).catch((function(){return{}}))]);case 2:return n=e.sent,r=u(n,2),o=r[0],a=r[1].isGiftCardTipEngaged,e.abrupt("return",!(!o&&!a));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)}),f=(i=L(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_.default.getCurrent(),e.next=3,l(t.id);case 3:return o=e.sent,e.next=6,R.default.request(C.types.giftCardsFindSavingsClosed,{cartPrice:n,tabId:r.id,prioritized:!0,storeId:t.id,storeName:t.name,isReminderSet:o});case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)});t.getCartPrice=j;var d=M(n(0)),p=M(n(46)),v=M(n(330)),h=M(n(7)),g=M(n(9)),y=M(n(37)),m=M(n(15)),b=M(n(23)),w=M(n(14)),E=M(n(12)),_=M(n(32)),x=M(n(39)),S=M(n(4)),O=M(n(2555)),I=M(n(1317)),P=n(510),T=M(n(93)),C=n(1332),R=M(C),k=M(n(2556));function M(e){return e&&e.__esModule?e:{default:e}}function L(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var A,N=/[\d+][,.\d+]+/;function D(e){var t=e&&e.match(N);if(t)return t[0]}function j(e){return s(e.metadata.honeyPayCartPriceSelector)}function F(e){[].forEach((function(t){return h.default.send("honey-pay-now:action:"+t,{action:P.HONEY_PAY_NOW_MESSAGES.SET_CART_PRICE,data:{cartPrice:e}},{background:!0})}))}function U(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.querySelector("#"+e);if(!r){(r=document.createElement("div")).id=e,r.style.cssText=n;var o=document.querySelector(t);o.appendChild(r)}return r}("honeyPayNowContainer");p.default.render(d.default.createElement(k.default,{data:e}),t)}function G(e){var t=e.allPageTypes;return O.default.isPaymentsViewPrioritized(t)}h.default.addListener("current:product",(A=L(regeneratorRuntime.mark((function e(t,n){var r,o,a,i,u,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data,e.next=3,_.default.getCurrent();case 3:o=e.sent,a=o.id,i=r.partialObservation,u=i.price,s=i.url,c=r.productId,l=(0,v.default)(u).value(),y.default.set("honey-pay-now:product:"+s+":"+a,{productPrice:l,productId:c});case 8:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return A.apply(this,arguments)})),h.default.addListener("honey-pay-now:action:ui",(function(e,t){switch(t&&t.action){case P.HONEY_PAY_NOW_MESSAGES.SET_PAY_NOW_CARD_VISIBILITY:return b.default.open({pathname:"/honey-pay-now-card",query:{},state:{cardData:t.data.cardData},force:!0,feature:"honey-pay-now-card",surface:"popup"});case P.HONEY_PAY_NOW_MESSAGES.OPEN_PAY_NOW_AUTOPOP:return b.default.open({pathname:"/honey-pay-now-autopop",query:{},state:t.data,force:!0,feature:"honey-pay-now-autopop",surface:"popup"});default:throw new InvalidParametersError("Invalid action")}})),function(){var e=this;Promise.all([new Promise((function(e){R.default.addListener(C.types.giftCardsReady,(function(){return e()}))})),new Promise((function(e){h.default.addListener("find-savings:closed",(function(){return e()}))}))]).then(L(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getCurrent();case 2:if((n=e.sent).id){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,j(n);case 7:if(r=e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,T.default.getFeatureFlag("gift_cards_use_remote_iframe");case 12:if(!e.sent){e.next=16;break}return e.next=16,f(n,r);case 16:case"end":return e.stop()}}),t,e)})))).catch((function(){return""}))}(),function(){var e=this;h.default.addListener("find-savings:complete",L(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getCurrent();case 2:if((n=e.sent).id){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,j(n);case 7:if(r=e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,T.default.getFeatureFlag("gift_cards_use_remote_iframe");case 12:if(!e.sent){e.next=16;break}return e.next=16,f(n,r);case 16:case"end":return e.stop()}}),t,e)}))))}();var B,H=0;h.default.addListener("pageDetected:PAYMENTS",(B=L(regeneratorRuntime.mark((function e(t,n){var r,o,a,i,u,s,f,d,p=n.data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=Date.now())-H<5e3)){e.next=5;break}return e.abrupt("return");case 5:H=r;case 6:return e.next=8,E.default.getCurrent();case 8:if((o=e.sent).id){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,j(o);case 13:if(a=e.sent){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,T.default.getFeatureFlag("gift_cards_use_remote_iframe");case 18:if(!e.sent){e.next=38;break}return e.next=22,G(p);case 22:return i=e.sent,e.next=25,x.default.getDeviceId();case 25:return u=e.sent,e.next=28,l(o.id);case 28:return s=e.sent,e.next=31,S.default.getUILanguage();case 31:return f=e.sent,e.next=34,w.default.getInfo();case 34:d=e.sent,F(a),c(o,o.metadata.honeyPayCartPriceSelector,i);try{U({storeId:o.id,deviceId:u,browser:"ch",extVersion:"13.11.0",cartPrice:a,prioritized:i,isReminderSet:s,language:f,user:d})}catch(e){g.default.error("Error loading Honey Pay iframe: "+e)}case 38:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return B.apply(this,arguments)})),t.default={}},1332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;var r,o=n(1329),a=(r=o)&&r.__esModule?r:{default:r};var i=t.types={extensionAuth:"extensionAuth",extensionRemoveIFrame:"extensionRemoveIFrame",extensionSendSDataEvent:"extensionSendSDataEvent",extensionUpdateStyles:"extensionUpdateStyles",extensionExperimentsGetVariant:"extensionExperimentsGetVariant",extensionExperimentsTrackImpression:"extensionExperimentsTrackImpression",extensionGetUserABGroup:"extensionGetUserABGroup",extensionGetI18nCountryCode:"extensionGetI18nCountryCode",extensionGetI18nMessage:"extensionGetI18nMessage",extensionSetGiftCardsEnabledForUser:"extensionSetGiftCardsEnabledForUser",extensionOpenLoginPrompt:"extensionOpenLoginPrompt",extensionHideContentUI:"extensionHideContentUI",extensionGetCartPrice:"extensionGetCartPrice",extensionSetIFrameAttribute:"extensionSetIFrameAttribute",extensionRemoveIFrameAttribute:"extensionRemoveIFrameAttribute",extensionSetHoneyStorageItem:"extensionSetHoneyStorageItem",extensionGetHoneyStorageItem:"extensionGetHoneyStorageItem",extensionRemoveHoneyStorageItem:"extensionRemoveHoneyStorageItem",extensionSetWindowLocalStorageItem:"extensionSetWindowLocalStorageItem",extensionGetWindowLocalStorageItem:"extensionGetWindowLocalStorageItem",extensionRemoveWindowLocalStorageItem:"extensionRemoveWindowLocalStorageItem",extensionGQLQuery:"extensionGQLQuery",extensionGQLMutation:"extensionGQLMutation",extensionOpenGiftCardDealModal:"extensionOpenGiftCardDealModal",giftCardsInit:"giftCardsInit",giftCardsReady:"giftCardsReady",giftCardsUserUpdate:"giftCardsUserUpdate",giftCardsCartPriceChange:"giftCardsCartPriceChange",giftCardsUserLoggedIn:"giftCardsUserLoggedIn",giftCardsFindSavingsClosed:"giftCardsFindSavingsClosed",extensionSetIsMinimized:"extensionSetIsMinimized",giftCardsSetIsMinimized:"giftCardsSetIsMinimized"},u=(0,a.default)({types:i,enableLogging:!1,clientName:"extension"});t.default=u},1335:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a,i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=(r=G(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.sendEvent("tip004034",t);case 2:return e.next=4,(0,I.default)();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:n=e.t0,r=n.productId,o=void 0===r?null:r,a=n.parentId,i=void 0===a?null:a,s=n.variantId,c=void 0===s?null:s,f.default.sendEvent("tip004034",u({},t,{productId:o,parentId:i,variantId:c}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),c=(o=G(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z){e.next=8;break}return e.next=3,(0,M.getCurrentVariant)();case 3:t=e.sent,n=u({level:"store",surface:"launchpad"},(0,h.getWindowSize)()),r=u({},n,{event:"hide_collision",collisionPathname:Q,group:t}),s(r),z=!0;case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),l=(a=G(regeneratorRuntime.mark((function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.sdataBadgeDefaults,a=r.action;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.default)();case 2:return t=e.sent,e.next=5,(0,P.default)();case 5:(n=e.sent)&&!V&&((0,w.sdataTipsDebug)({debugEvent:"offers_miss_rate",action:a},{product:t||{},offer:n},u({},o,{productId:t.id||null}))(),V=!0);case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),f=U(n(10)),d=U(n(9)),p=U(n(7)),v=U(n(49)),h=n(150),g=U(n(23)),y=U(n(39)),m=n(214),b=U(n(65)),w=n(19),E=n(2565),_=U(E),x=n(324),S=U(n(2619)),O=U(n(1345)),I=U(n(174)),P=U(n(326)),T=n(325),C=U(T),R=U(n(2620));n(2621);var k=U(n(2622)),M=n(108),L=U(M),A=U(n(293)),N=U(n(2624)),D=n(185),j=U(n(233)),F=U(n(292));function U(e){return e&&e.__esModule?e:{default:e}}function G(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var B=!1,H=!1,$=void 0,V=!1,q=!1,z=!1,W=!1,Y=!1,X=!1,K=!1,Q="",J=!1;function Z(){$&&(0,E.unMountApp)($),B=!1,H=!1,N.default.installed&&N.default.uninstall()}p.default.addListener("ui:action",(function(e,t){"pre-open"===t.action&&(G(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.default)();case 2:t=e.sent,B&&t&&(c(),Z());case 4:case"end":return e.stop()}}),e,void 0)})))(),K=!0,Q=t.pathname)})),function(){var e,t=this,n=(e=G(regeneratorRuntime.mark((function e(){var t,n,r,o,a,f,p,b,E,I,P,k,U,G,V,z,Q,ee,te,ne,re,oe,ae,ie,ue,se,ce,le,fe,de;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,j.default)(),e.next=3,F.default.dispatch(m.experimentsActions.loadVariants([(0,j.default)(),D.CASHBACK_EXPERIMENT,D.STANDALONE_EXPERIMENT]));case 3:return e.next=5,(0,M.canRunTips)();case 5:if(!e.sent){e.next=13;break}if(v.default.trackImpression(D.STANDALONE_EXPERIMENT),v.default.trackImpression(t),v.default.trackImpression(D.CASHBACK_EXPERIMENT),!H){e.next=12;break}return e.abrupt("return");case 12:H=!0;case 13:if(!B){e.next=16;break}return H=!1,e.abrupt("return");case 16:return e.next=18,(0,A.default)();case 18:return n=e.sent,e.next=21,Promise.all([(0,C.default)(),(0,T.getTipsGroup)(),(0,L.default)(),(0,M.isTipsDisabled)(),(0,M.isAutoPop)(),(0,R.default)()]);case 21:return r=e.sent,o=i(r,6),a=o[0],f=o[1],p=o[2],b=o[3],E=o[4],I=o[5],P=u({level:n?"store":"product",surface:n?"launchpad_homepage":"pdp"},(0,h.getWindowSize)()),I&&(P.level="store",P.surface="launchpad_homepage"),k=g.default.visible(),e.next=34,y.default.isFirstTime();case 34:if(U=e.sent,!(K||k||U)||!n){e.next=40;break}return d.default.debug("honeyTips:canShowUniversalContainer: UI action present so stood down"),q||(c(),q=!0),H=!1,e.abrupt("return");case 40:if(!p){e.next=95;break}if(Y||((0,w.sdataTipsDebug)({debugEvent:"funnel",action:"should_show_container"},{funnelForLaunchpad:I},u({},P,{surface:P.surface}))(),Y=!0),a){e.next=50;break}return e.next=45,(0,M.getCurrentVariant)();case 45:return G=e.sent,V=u({},P,{event:"hide_holdout",group:G,holdout:f}),W||(d.default.debug("honeyTips: user is in holdout group, dont show tips"),s(V),l({sdataBadgeDefaults:P,action:"tips_available_holdout"}),(0,w.sdataTipsDebug)({debugEvent:"funnel",action:"not_shown"},{},u({},P))(),W=!0),H=!1,e.abrupt("return");case 50:return e.next=52,(0,O.default)();case 52:if(z=e.sent,Q=z.tipsEnabledByUser,ee=z.reason,Q){e.next=68;break}if(X){e.next=66;break}return X=!0,e.next=60,(0,M.getCurrentVariant)();case 60:te=e.sent,ne=u({},P,{event:ee?"hide_disable:"+ee:"hide_disable",group:"launch_v:"+te}),s(ne),l({sdataBadgeDefaults:P,action:"tips_available_disable"}),(0,w.sdataTipsDebug)({debugEvent:"funnel",action:"not_shown"},{},u({},P))(),d.default.debug("honeyTips: tips disabled by user");case 66:return H=!1,e.abrupt("return");case 68:return e.next=70,(0,S.default)();case 70:if(re=e.sent,oe=re.isSuppressed,ae=re.reason,!oe){e.next=86;break}if(J){e.next=84;break}return e.next=77,(0,M.getCurrentVariant)();case 77:ie=e.sent,ue=u({},P,{event:ae?"hide_snooze:"+ae:"hide_snooze",group:"launch_v:"+ie}),s(ue),J=!0,d.default.debug("honeyTips: tips suppressed by user"),l({sdataBadgeDefaults:P,action:"tips_available_suppress"}),(0,w.sdataTipsDebug)({debugEvent:"funnel",action:"not_shown"},{},u({},P))();case 84:return H=!1,e.abrupt("return");case 86:if(B){e.next=93;break}return e.next=89,(0,_.default)();case 89:se=e.sent,(ce=se.shadowRoot)&&($=ce,B=!0,N.default.installed||N.default.install()),H=!1;case 93:e.next=103;break;case 95:if(I&&!Y?((0,w.sdataTipsDebug)({debugEvent:"funnel",action:"should_show_container"},{isValidLaunchpadPage:I},u({},P))(),Y=!0):Y||((0,w.sdataTipsDebug)({debugEvent:"funnel",action:"should_not_show_container"},{isValidLaunchpadPage:I},u({},P))(),Y=!0),!(0,x.getIsProductPage)()){e.next=101;break}return e.next=99,(0,M.getIsInExperimentPopulation)();case 99:le=e.sent,E?(fe=u({},P,{event:"hide",group:"autopop_displayed"}),s(fe)):b&&le&&(de=u({},P,{event:"hide",group:"control"}),s(de));case 101:H=!1,Z();case 103:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)});f.default.sendEvent("tip004036",{action:"init",debugEvent:"funnel"}),(0,b.default)("honeyTips:newPage")(G(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n();case 1:case"end":return e.stop()}}),e,t)})))),(0,b.default)("honeyTips:turnOff")(G(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z();case 1:case"end":return e.stop()}}),e,t)}))))}(),t.default={creditCardOffers:k.default.creditCardOffers,getInitialized:function(){return B},getInitalizing:function(){return H}}},1336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useShadowContext=t.Provider=void 0;var r,o=n(0);var a=((r=o)&&r.__esModule?r:{default:r}).default.createContext({shadowRoot:null});t.Provider=a.Provider,t.useShadowContext=function(){return{shadowContainer:(0,o.useContext)(a).shadowContainer}};t.default=a},1337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=n(39),u=(r=i)&&r.__esModule?r:{default:r};function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}t.default=function(e){var t,n,r=e||{},i=r.mouseEnterDelay,c=void 0===i?3e3:i,l=r.tooltipHideDelay,f=void 0===l?2e3:l,d=r.tooltipHideDelayOnHover,p=void 0===d?3e3:d,v=(0,a.useState)(),h=o(v,2),g=h[0],y=h[1],m=(0,a.useState)(),b=o(m,2),w=b[0],E=b[1],_=(0,a.useState)(!1),x=o(_,2),S=x[0],O=x[1],I=(t=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g&&(clearTimeout(g),y(),E(setTimeout((function(){O(!1),E()}),f)));case 1:case"end":return e.stop()}}),e,void 0)}))),function(){return t.apply(this,arguments)});return{shouldShowTooltip:S,forceHideTooltip:function(){O(!1),E()},startClickBadgeTooltip:(n=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.getSetting("honeyTips:badge:first_time_click_badge_tooltip");case 2:e.sent||w||y(setTimeout(s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.updateSetting("honeyTips:badge:first_time_click_badge_tooltip",!0);case 2:O(!0),E(setTimeout((function(){O(!1),E()}),p));case 4:case"end":return e.stop()}}),e,void 0)}))),c));case 4:case"end":return e.stop()}}),e,void 0)}))),function(){return n.apply(this,arguments)}),endClickBadgeTooltip:I}}},1338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hoverOrClickEvents=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=n(6),i=n(62),u=n(26),s=t.hoverOrClickEvents={MOUSEUP:"mouseup",MOUSEENTER:"mouseenter",DELAYED_MOUSEENTER:"delayedMouseEnter",MOUSELEAVE:"mouseleave"};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hoverTimeout,n=void 0===t?1e3:t,c=e.isStaticContainer,l=void 0!==c&&c,f=(0,o.useState)(null),d=r(f,2),p=d[0],v=d[1],h=(0,a.useDispatch)(),g=(0,a.useSelector)(u.selectCurrentContainerId),y=void 0,m=(0,o.useCallback)((function(){h((0,i.sdataTipBadgeInitialHoverEvent)(g)),v({event:s.MOUSEENTER}),y=setTimeout((function(){v({event:s.DELAYED_MOUSEENTER})}),n)}),[]),b=(0,o.useCallback)((function(){clearTimeout(y),y=void 0,v({event:s.MOUSELEAVE})}),[]),w=(0,o.useCallback)((function(){clearTimeout(y),y=void 0,v({event:s.MOUSEUP})}),[]),E=(0,o.useRef)();return(0,o.useEffect)((function(){return E.current&&l&&(E.current.addEventListener("mouseenter",m),E.current.addEventListener("mouseleave",b),E.current.addEventListener("mouseup",w),clearTimeout(y)),function(){E.current&&(E.current.removeEventListener("mouseenter",m),E.current.removeEventListener("mouseleave",b),E.current.removeEventListener("mouseup",w),clearTimeout(y))}}),[E]),[E,p]}},1339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BadgeAnimationState=void 0,t.default=function(){var e=(0,i.useDispatch)(),t=(0,i.useSelector)(c.selectCurrentContainerId),n=((0,i.useSelector)((0,o.selectUniversalContainerById)(t))||{}).badgeAnimationState,r=void 0===n?l.WAITING:n,u=(0,a.useCallback)((function(){e((0,s.default)(l.START))}),[e]),f=(0,a.useCallback)((function(){e((0,s.default)(l.END))}),[e]);return{animate:r,startAnimation:u,endAnimation:f}};var r,o=n(16),a=n(0),i=n(6),u=n(2580),s=(r=u)&&r.__esModule?r:{default:r},c=n(26);var l=t.BadgeAnimationState={START:"start",END:"end",WAITING:"waiting",CANCELED:"canceled"}},1340:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(26),a=n(16);t.default=function(){var e=(0,r.useSelector)(o.selectCurrentContainerId);return(0,r.useSelector)((0,a.selectUniversalContainerById)(e))||{}}},1341:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=c(n(9)),u=c(n(2584)),s=n(175);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){return i.default.debug("honeyTips:universalContainer:hooks:"+e)},f={behavior:"smooth",block:"center"};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f,n=(0,a.useRef)(new u.default({max:3})),i=(0,a.useRef)(new u.default({max:10})),c=(0,a.useState)(!1),d=o(c,2),p=d[0],v=d[1];(0,a.useEffect)((function(){e&&e.current&&n.current.set((0,s.v4)(),e.current)}),[e]);var h=function(e){e.scrollIntoView(r({},t,{top:-10}))},g=function(e,t){e?t?i.current.set((0,s.v4)(),[e,t]):l("addRef: Missing ref. Pass a ref."):l("addRef: Missing categoryId. Pass a categoryId")},y=function(e){if(p)l("scrollToTip: Already scrolling. Ignore");else if(e){l("scrollToTip: Scrolling to "+e);var t=i.current.values().filter((function(t){return o(t,1)[0]===e}));v(!0),Promise.all(t.map((function(e){var t=o(e,2)[1];return new Promise((function(e){h(t),e()}))}))).then((function(){return v(!1)}))}else l("scrollToTip: categoryId missing. No scrolling here")},m=function(){if(p)l("scrollToTop: Already scrolling. Ignore");else{var e=n.current;if(e){v(!0);var o=e.values();Promise.all(o.map((function(e){return new Promise((function(n){e.scrollTo(r({},t,{top:0})),n()}))}))).then((function(){return v(!1)}))}else l("scrollToTop: Nothing to scroll here")}};return{scrollToTop:m,scrollToCategory:y,addTipRef:g,containerRefs:n,isScrolling:p}}},1342:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(4)),a=n(2),i=n(3);function u(e){return e&&e.__esModule?e:{default:e}}var s=(0,a.createUseStyles)({container:{display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",height:"264px"},circle:{width:"88px",height:"88px",border:"1.5px solid "+i.Colors.grey800,boxSizing:"border-box",borderRadius:"50%",marginLeft:"auto",marginRight:"auto",marginBottom:"16px",fontStyle:"normal",fontWeight:"300",fontSize:"50px",lineHeight:"85px",display:"flex",alignSelf:"center",justifyContent:"center"},circleText:{fontStyle:"normal",fontWeight:"500",fontSize:"17px",lineHeight:"22px",marginBottom:"16px, auto",display:"flex"}}),c=function(){var e=s();return r.default.createElement("div",{className:e.container},r.default.createElement("div",null,r.default.createElement("div",{className:e.circle},"!"),r.default.createElement("div",{className:e.circleText},o.default.getMessage("There_are_no_tips_for_this_item"))))};c.propTypes={},c.defaultProps={},t.default=c},1343:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logDependencyStatus=t.callDataFetcher=t.getDependenciesToProcess=t.getCategoryDependents=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(1270),a=c(n(894)),i=c(n(9)),u=c(n(2615)),s=n(525);function c(e){return e&&e.__esModule?e:{default:e}}var l=t.getCategoryDependents=function(){return Object.entries(a.default.getRegistry()).reduce((function(e,t){var n=r(t,2),o=n[0];return n[1].forEach((function(t){var n=e[t]||[];e[t]=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[o])})),e}),{})},f=t.getDependenciesToProcess=function(){return Object.entries(a.default.getRegistry()).reduce((function(e,t){var n=r(t,2),o=n[0],a=n[1];return e[o]=new Set(a),e}),{})},d=t.callDataFetcher=function(e,t){return function(n){return u.default.createDataFetcherPromise({categoryId:e,data:t,dataFetcher:(0,o.getDataFetcher)(e),dispatch:n})}},p=t.logDependencyStatus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.filter((function(e){return"rejected"===e.status})).map((function(e){return e.reason.message})),o=t.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value.type})),a=Array.from(new Set(o));a.length&&i.default.debug(s.LOG_PREFIX+"loadDependencies: Successfully loaded "+a.join(", ")+" for stateId "+e.stateId),r.length&&i.default.warn(s.LOG_PREFIX+"loadDependencies: Failed "+e.stateId+" for following reasons:\n "+r.join("\n")),n&&console.log(s.LOG_PREFIX+"loadDependencies: Result for "+e.stateId,t)};t.default={callCategoryDataFetcher:d,logDependencyStatus:p,getCategoryDependents:l,getDependenciesToProcess:f}},1344:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fireCreateRelevanceRequest=t.fireDependencyFinishedEvent=void 0;var r=i(n(7)),o=i(n(9)),a=n(525);function i(e){return e&&e.__esModule?e:{default:e}}t.fireDependencyFinishedEvent=function(e){var t=e.type,n=e.status,i=e.data,u=e.stateId;return t?u?r.default.send(a.FINISHED_EVENT,{type:t,status:n,data:i,stateId:u}):(o.default.error(a.LOG_PREFIX+"fireDependencyFinishedEvent Provide associated stateId."),null):(o.default.error(a.LOG_PREFIX+"fireDependencyFinishedEvent Provide a type."),null)},t.fireCreateRelevanceRequest=function(e){r.default.send(a.CREATE_RELEVANCE_REQUEST,e)}},1345:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=s(n(14)),i=s(n(9)),u=s(n(39));function s(e){return e&&e.__esModule?e:{default:e}}t.default=(r=regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.getInfo();case 2:if((t=e.sent)&&t.isLoggedIn){e.next=11;break}return e.next=6,u.default.getSetting("tipsLoggedOutDisabled");case 6:if(!e.sent){e.next=9;break}return e.abrupt("return",{tipsEnabledByUser:!1,reason:"tips_logged_out_disabled"});case 9:return i.default.debug("isTipsEnabledByUser: defaulted to true because user does not exist or is not logged in"),e.abrupt("return",{tipsEnabledByUser:!0});case 11:return e.next=13,a.default.getSetting("tipsEnabled");case 13:return n=e.sent,o=void 0,(r=!!n)||(o=void 0===n?"tips_enabled_undefined":"tips_enabled_false"),e.abrupt("return",{tipsEnabledByUser:r,reason:o});case 18:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(){return o.apply(this,arguments)})},1346:function(e,t,n){const r=n(223);e.exports=(e,t,n)=>0!==r(e,t,n)},1347:function(e,t,n){const r=n(948),o=n(1346),a=n(528),i=n(951),u=n(950),s=n(952);e.exports=(e,t,n,c)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,c);case"!=":return o(e,n,c);case">":return a(e,n,c);case">=":return i(e,n,c);case"<":return u(e,n,c);case"<=":return s(e,n,c);default:throw new TypeError(`Invalid operator: ${t}`)}}},1348:function(e,t,n){const r=n(190);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},1396:function(e,t,n){n(446),e.exports=n(1397)},1397:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(958),n(1006),n(1011),n(1014),n(1015),n(1021),n(1026),n(1027),n(1029),n(1031),n(1032),n(1033),n(1035),n(1036),n(1038),n(1039),n(1041),n(1042),n(110),n(1046);var r,o=X(n(28)),a=X(n(21)),i=X(n(15)),u=X(n(392)),s=X(n(932)),c=X(n(287)),l=X(n(2520)),f=X(n(299)),d=X(n(1330)),p=X(n(825)),v=X(n(303)),h=X(n(39)),g=X(n(49)),y=X(n(313)),m=X(n(486)),b=X(n(4)),w=X(n(1148)),E=X(n(9)),_=X(n(7)),x=X(n(149)),S=X(n(933)),O=X(n(1331)),I=X(n(218)),P=X(n(147)),T=X(n(1333)),C=X(n(131)),R=X(n(2564)),k=X(n(92)),M=X(n(1334)),L=X(n(10)),A=X(n(82)),N=X(n(12)),D=X(n(32)),j=X(n(1335)),F=X(n(23)),U=X(n(14)),G=X(n(1275)),B=X(n(1149)),H=X(n(393)),$=X(n(231)),V=X(n(937)),q=X(n(213)),z=X(n(81)),W=X(n(2625)),Y=X(n(1349));function X(e){return e&&e.__esModule?e:{default:e}}o.default.onPossiblyUnhandledRejection((function(e){return E.default.error(e)})),r=window.location.href,_.default.send("page:load",{url:r,hasServiceWorkers:!!((navigator||{}).serviceWorker||{}).controller},{allTabs:!0,background:!0,ignoreResponse:!0}).reflect(),E.default.debug("Honey 13.11.0 content script is ready. Environment is production"),setTimeout((function(){if("www.joinhoney.com"===window.location.hostname){var e=document.querySelector("#messagingEventHandler");if(e)if(e.getAttribute("si_ext"))_.default.send("si:on",{si_ext:e.getAttribute("si_ext")},{ignoreResponse:!0,background:!0});else new MutationObserver((function(){e.getAttribute("si_ext")&&_.default.send("si:on",{si_ext:e.getAttribute("si_ext")},{ignoreResponse:!0,background:!0})})).observe(e,{attributes:!0})}}));var K={$:a.default,adbBp:q.default,acorns:u.default,ajax:s.default,button:c.default,cartPageFetcher:B.default,checkoutPlatform:l.default,clipboard:f.default,config:d.default,confirmation:p.default,cookies:v.default,device:h.default,exclusives:y.default,pdpPopupEngine:W.default,experiments:g.default,extensionReview:m.default,i18n:b.default,imageLoader:w.default,honeyPayNow:O.default,honeyPayPal:I.default,launchpad:z.default,logger:E.default,messages:_.default,offers:x.default,optimus:S.default,pageDetector:C.default,popover:P.default,productFetcher:T.default,runtime:R.default,savingsController:k.default,search:Y.default,seleniumComm:M.default,stats:L.default,storage:A.default,stores:N.default,tabs:D.default,tips:j.default,ui:F.default,user:U.default,userSavingsStats:G.default,util:i.default,vims:H.default,websiteComm:$.default,yelp:V.default};_.default.addListener("debug:change",(function(e,t){try{t.active?window.honey=K:delete window.honey}catch(e){}})),t.default=K},190:function(e,t,n){class r{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=this.options.loose;e=e.trim();const n=t?u[s.HYPHENRANGELOOSE]:u[s.HYPHENRANGE];e=e.replace(n,_),a("hyphen replace",e),e=e.replace(u[s.COMPARATORTRIM],c),a("comparator trim",e,u[s.COMPARATORTRIM]),e=(e=(e=e.replace(u[s.TILDETRIM],l)).replace(u[s.CARETTRIM],f)).split(/\s+/).join(" ");const r=t?u[s.COMPARATORLOOSE]:u[s.COMPARATOR];return e.split(" ").map(e=>p(e,this.options)).join(" ").split(/\s+/).filter(this.options.loose?e=>!!e.match(r):()=>!0).map(e=>new o(e,this.options))}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>d(n,t)&&e.set.some(e=>d(e,t)&&n.every(n=>e.every(e=>n.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new i(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(x(this.set[t],e,this.options))return!0;return!1}}e.exports=r;const o=n(953),a=n(527),i=n(128),{re:u,t:s,comparatorTrimReplace:c,tildeTrimReplace:l,caretTrimReplace:f}=n(335),d=(e,t)=>{let n=!0;const r=e.slice();let o=r.pop();for(;n&&r.length;)n=r.every(e=>o.intersects(e,t)),o=r.pop();return n},p=(e,t)=>(a("comp",e,t),e=y(e,t),a("caret",e),e=h(e,t),a("tildes",e),e=b(e,t),a("xrange",e),e=E(e,t),a("stars",e),e),v=e=>!e||"x"===e.toLowerCase()||"*"===e,h=(e,t)=>e.trim().split(/\s+/).map(e=>g(e,t)).join(" "),g=(e,t)=>{const n=t.loose?u[s.TILDELOOSE]:u[s.TILDE];return e.replace(n,(t,n,r,o,i)=>{let u;return a("tilde",e,t,n,r,o,i),v(n)?u="":v(r)?u=`>=${n}.0.0 <${+n+1}.0.0`:v(o)?u=`>=${n}.${r}.0 <${n}.${+r+1}.0`:i?(a("replaceTilde pr",i),u=`>=${n}.${r}.${o}-${i} <${n}.${+r+1}.0`):u=`>=${n}.${r}.${o} <${n}.${+r+1}.0`,a("tilde return",u),u})},y=(e,t)=>e.trim().split(/\s+/).map(e=>m(e,t)).join(" "),m=(e,t)=>{a("caret",e,t);const n=t.loose?u[s.CARETLOOSE]:u[s.CARET];return e.replace(n,(t,n,r,o,i)=>{let u;return a("caret",e,t,n,r,o,i),v(n)?u="":v(r)?u=`>=${n}.0.0 <${+n+1}.0.0`:v(o)?u="0"===n?`>=${n}.${r}.0 <${n}.${+r+1}.0`:`>=${n}.${r}.0 <${+n+1}.0.0`:i?(a("replaceCaret pr",i),u="0"===n?"0"===r?`>=${n}.${r}.${o}-${i} <${n}.${r}.${+o+1}`:`>=${n}.${r}.${o}-${i} <${n}.${+r+1}.0`:`>=${n}.${r}.${o}-${i} <${+n+1}.0.0`):(a("no pr"),u="0"===n?"0"===r?`>=${n}.${r}.${o} <${n}.${r}.${+o+1}`:`>=${n}.${r}.${o} <${n}.${+r+1}.0`:`>=${n}.${r}.${o} <${+n+1}.0.0`),a("caret return",u),u})},b=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map(e=>w(e,t)).join(" ")),w=(e,t)=>{e=e.trim();const n=t.loose?u[s.XRANGELOOSE]:u[s.XRANGE];return e.replace(n,(n,r,o,i,u,s)=>{a("xRange",e,n,r,o,i,u,s);const c=v(o),l=c||v(i),f=l||v(u),d=f;return"="===r&&d&&(r=""),s=t.includePrerelease?"-0":"",c?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(l&&(i=0),u=0,">"===r?(r=">=",l?(o=+o+1,i=0,u=0):(i=+i+1,u=0)):"<="===r&&(r="<",l?o=+o+1:i=+i+1),n=`${r+o}.${i}.${u}${s}`):l?n=`>=${o}.0.0${s} <${+o+1}.0.0${s}`:f&&(n=`>=${o}.${i}.0${s} <${o}.${+i+1}.0${s}`),a("xRange return",n),n})},E=(e,t)=>(a("replaceStars",e,t),e.trim().replace(u[s.STAR],"")),_=(e,t,n,r,o,a,i,u,s,c,l,f,d)=>`${t=v(n)?"":v(r)?`>=${n}.0.0`:v(o)?`>=${n}.${r}.0`:`>=${t}`} ${u=v(s)?"":v(c)?`<${+s+1}.0.0`:v(l)?`<${s}.${+c+1}.0`:f?`<=${s}.${c}.${l}-${f}`:`<=${u}`}`.trim(),x=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(a(e[n].semver),e[n].semver!==o.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},223:function(e,t,n){const r=n(128);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},2479:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutObservationBackgroundManager=t.CheckoutObservationContentManager=t.DataTransporter=void 0;var o=n(2480);Object.defineProperty(t,"DataTransporter",{enumerable:!0,get:function(){return r(o).default}});var a=n(2491);Object.defineProperty(t,"CheckoutObservationContentManager",{enumerable:!0,get:function(){return r(a).default}});var i=n(2498);Object.defineProperty(t,"CheckoutObservationBackgroundManager",{enumerable:!0,get:function(){return r(i).default}})},2480:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1321),i=n(938),u=n(436),s=n(522),c=function(){function e(e){var t=e.window,n=new a.FrameTransportClient({allowedOrigin:t.location.origin,id:s.FRAME_TRANPORT_IDS.PAGE_TO_CONTENT_TRANSPORT}),r=new i.Client({transport:n,options:{}});r.connect(t),this.client=r}return e.prototype.send=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.client.invoke(s.FRAME_TRANSPORT_ACTIONS.PAGE_TO_CONTENT_EVENT,{data:e,options:{timeoutMilliseconds:3e4}})];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),u.logger.info("[CheckoutObservation] Failed to send page to content",{error:t}),[3,3];case 3:return[2]}}))}))},e}();t.default=c},2481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameTransportClient=void 0;var r=function(){function e(e){var t=e.allowedOrigin,n=e.id;this.allowedOrigin=t,this.id=n}return e.prototype.getId=function(){return this.id},e.prototype.connect=function(e){var t=e.target,n=e.onMessage;this.target=t,this.subscription=this.subscribe({callback:n})},e.prototype.disconnect=function(){this.subscription&&(this.subscription.dispose(),this.target=void 0,this.subscription=void 0)},e.prototype.send=function(e){var t=e.message,n=this.target;if(!n)throw new Error("No connection available. Did you to call connect() before attempting to send a message");n.postMessage(t,this.allowedOrigin)},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1,o=function(e){"*"!==t.allowedOrigin&&e.origin!=t.allowedOrigin||e.data&&e.data.meta&&"request"!==e.data.meta.type&&n({message:e.data,source:e.source,context:void 0})};return window.addEventListener("message",o),{dispose:function(){r||(r=!0,window.removeEventListener("message",o))}}},e}();t.FrameTransportClient=r},2482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameTransportServer=void 0;var r=function(){function e(e){var t=e.allowedOrigins,n=e.id;this.id=n;for(var r=!1,o=0,a=t;o<a.length;o++){if("*"===a[o]){r=!0,this.allowedOrigins=["*"];break}}r||(this.allowedOrigins=t)}return e.prototype.start=function(e){this.subscription=this.subscribe({callback:e})},e.prototype.stop=function(){this.subscription&&(this.subscription.dispose(),this.subscription=void 0)},e.prototype.send=function(e){var t=e.message,n=e.target,r=e.context;n&&r&&r.origin&&n.postMessage(t,r.origin)},e.prototype.prepareHandle=function(e,t){return{actionType:e,handlerFunc:t}},e.prototype.isEventOriginAllowed=function(e){if(void 0===e)return!0;for(var t=0,n=this.allowedOrigins;t<n.length;t++){var r=n[t];if("*"===r)return!0;if(r===e)return!0}return!1},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1,o=function(e){t.isEventOriginAllowed(e.origin)&&e.data&&e.data.meta&&"response"!==e.data.meta.type&&n({message:e.data,source:e.source,context:{origin:e.origin}})};return window.addEventListener("message",o),{dispose:function(){r||(r=!0,window.removeEventListener("message",o))}}},e}();t.FrameTransportServer=r},2483:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2484:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2485),t),o(n(2486),t),o(n(2487),t),o(n(2488),t)},2485:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.send=t.subscribe=void 0,t.subscribe=function(e){var t=e.callback,n=!1;function r(e){t(e)}return window.addEventListener("message",r),{dispose:function(){n||(n=!0,window.removeEventListener("message",r))}}},t.send=function(e){var t=e.target,n=e.origin,r=e.message;t.postMessage(r,n)}},2486:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2487:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;var a=function(){function e(e){var t=e.transport;this.routes={},this.transport=t}return e.prototype.start=function(){this.transport.start(this.onMessage.bind(this))},e.prototype.stop=function(){this.transport.stop()},e.prototype.response=function(e){var t=e.message,n=e.target,r=e.context;this.transport.send({message:t,target:n,context:r})},e.prototype.handle=function(e,t){var n=this.transport.prepareHandle(e,t),r=n.actionType,o=n.handlerFunc;this.routes[r]=o},e.prototype.onMessage=function(e){var t=e.message,n=e.source,a=e.context;return r(this,void 0,void 0,(function(){var e,r,i,u,s,c;return o(this,(function(o){switch(o.label){case 0:if(!t)return[2];if(!t.meta)return[2];if(e=t.meta.action,!(r=t.meta.messageId)||!e)return[2];if(!(i=this.routes[e]))return[2];u={meta:{action:e,messageId:r,type:"response"}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i({message:t,source:n,context:a})];case 2:return s=o.sent(),u.data=s,[3,4];case 3:return c=o.sent(),u.errors=[{message:c.toString()}],[3,4];case 4:return this.response({message:u,target:n,context:a}),[2]}}))}))},e}();t.Server=a},2488:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var r=n(175),o=n(2489),a=function(){function e(e){var t=e.transport,n=e.defaultTimeoutMilliseconds,r=e.options;this.inflight={},this.connected=!1,this.transport=t,this.defaultTimeoutMilliseconds=n||100;var a=o.LoggingDriverNoop.createService();this.log=a,r&&r.log&&(this.log=r.log)}return e.prototype.connect=function(e){this.connected=!0,this.transport.connect({target:e,onMessage:this.onMessage.bind(this)})},e.prototype.disconnect=function(){this.connected=!1,this.transport.disconnect()},e.prototype.invoke=function(e,t){var n=this,o=void 0===t?{}:t,a=o.data,i=o.options;if(!this.connected)throw new Error("Unable to invoke action; no connection established. Did you remember to call Client.connect()");var u=this.defaultTimeoutMilliseconds,s={};i&&(i.transport&&(s=i.transport),i.timeoutMilliseconds&&(u=i.timeoutMilliseconds));var c=r.v4().toString(),l={data:a,meta:{messageId:c,type:"request",action:e}};return new Promise((function(t,r){var o={resolve:t,reject:r,timeoutId:void 0,action:l.meta.action};n.inflight[""+c]=o,n.log.debug("[@honeyscience/checkout-extension-messaging][Client][->]["+n.transport.getId()+"] ["+l.meta.action+"]",l.data),n.transport.send({message:l,options:s});var a=setTimeout((function(){var t=n.inflight[c];t&&(delete n.inflight[c],t.reject(new Error("Response for '"+e+"' exceeded "+u+"ms")))}),u);o.timeoutId=a}))},e.prototype.onMessage=function(e){var t=e.message;if(t&&t.meta){var n=t.meta.action,r=t.meta.messageId;if(r&&n){var o=this.inflight[r];if(o&&n==o.action){if(delete this.inflight[r],clearTimeout(o.timeoutId),t.errors)return this.log.error("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.errors),t.errors[0]&&t.errors[0].message?o.reject(new Error(t.errors[0].message)):o.reject(new Error("An unknown error occurred."));this.log.debug("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.data),o.resolve(t.data)}}}},e}();t.Client=a},2489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDriverNoop=void 0;var r=n(2490),o=function(){function e(){}return e.createService=function(){return new r.LoggingService({driver:new e})},e.prototype.setLogLevel=function(e){this.logLevel=e},e.prototype.getLogLevel=function(){return this.logLevel},e.prototype.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e}();t.LoggingDriverNoop=o},2490:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingService=void 0;var r=function(){function e(e){var t=e.driver;this.driver=t}return e.prototype.setLogLevel=function(e){this.driver.setLogLevel(e)},e.prototype.getLogLevel=function(){return this.driver.getLogLevel()},e.prototype.debug=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).debug.apply(e,t)},e.prototype.info=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).info.apply(e,t)},e.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).warn.apply(e,t)},e.prototype.error=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).error.apply(e,t)},e}();t.LoggingService=r},2491:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(1321),i=n(939),u=n(523),s=n(939),c=n(2497),l=function(e){function t(n){var r=e.call(this)||this;return r.servers=[t.configureFromPageToBackgroundServer(n),t.configureFromBackgroundToPageServer(n)],r}return o(t,e),t.configureFromPageToBackgroundServer=function(e){var t=e.messages,n=e.allowedOrigins,r=e.store,o=new a.FrameTransportServer({allowedOrigins:n}),u=new i.HoneyMessagingTransportClient,s={postMessage:function(e){return t.send(e.meta.action,e.data,{ignoreResponse:!0,background:!0})}};return new c.FromPageToBackgroundServer({canPostMessage:s,serverTransport:o,clientTransport:u,store:r})},t.configureFromBackgroundToPageServer=function(e){var t=e.messages,n=e.executeScript,r=e.scriptPath,o=new s.HoneyMessagingTransportServer({target:t});return new c.FromBackgroundToPageServer({serverTransport:o,executeScript:n,scriptPath:r})},t}(u.ManagerBase);t.default=l},2492:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportClient=void 0;var o=n(175),a=function(){function e(e){var t=(void 0===e?{}:e).id,n=void 0===t?o.v4().toString():t;this.id=n}return e.prototype.send=function(e){var t,n=e.message,o=e.options;if(!this.platform||!this.messageHandler)throw new Error("No platform available. Did you connect()");var a=o.src;a&&a.tabId&&(t=a.tabId);var i=this.platform.postMessage(n,t);this.messageHandler(r(r({},n),{data:i}))},e.prototype.getId=function(){return this.id},e.prototype.connect=function(e){var t=e.target,n=e.onMessage;if(this.platform)throw new Error("Already connected to platform, please disconnect() before attempting to connect()");this.platform=t,this.subscription=this.subscribe({callback:n})},e.prototype.disconnect=function(){this.platform=void 0},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1;if(!this.platform)throw new Error("Unable to subscribe, no port set, did you call connect()?");return this.messageHandler=function(e){if(e&&e.meta&&t.platform){var r={message:e,source:t.platform};n(r)}},{dispose:function(){r||(r=!0,t.platform)}}},e}();t.HoneyMessagingTransportClient=a},2493:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportServer=void 0;var a=n(175),i=function(){function e(e){var t=e.id,n=void 0===t?a.v4().toString():t,r=e.target;this.id=n,this.platform=r,this.honeyMessagesListeners={}}return e.prototype.connect=function(){throw new Error("Not Implemented in Servers, please use Server.start()")},e.prototype.disconnect=function(){throw new Error("Not Implemented in Servers, please use Server.stop()")},e.prototype.send=function(e){var t=e.message,n=e.context;n&&(n.result=t.data)},e.prototype.start=function(e){this.messageEnvelopeHandler=e},e.prototype.stop=function(){for(var e=0,t=Object.keys(this.honeyMessagesListeners);e<t.length;e++){var n=t[e];this.honeyMessagesListeners[n].dispose()}this.honeyMessagesListeners={}},e.prototype.prepareHandle=function(e,t){var n=this;if(this.honeyMessagesListeners[e])throw new Error(e+" is already registered.");var i=function(e,t,i){return r(n,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:if(n={source:{postMessage:function(){return i}},context:{result:null,src:i},message:{meta:{messageId:a.v4().toString(),type:"request",action:e},data:t}},!this.messageEnvelopeHandler)throw new Error("Server was not started, please use Server.start()");return[4,this.messageEnvelopeHandler(n)];case 1:return r.sent(),[2,n.context.result]}}))}))};return this.platform.addListener(e,i),this.honeyMessagesListeners[e]={dispose:function(){return n.platform.removeListener(e,i)}},{actionType:e.toLowerCase(),handlerFunc:t}},e}();t.HoneyMessagingTransportServer=i},2494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2495:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.start=function(){for(var e=0,t=this.servers;e<t.length;e++){t[e].start()}},e.prototype.stop=function(){for(var e=0,t=this.servers;e<t.length;e++){t[e].stop()}},e}();t.default=r},2496:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.start=function(){this.server&&this.server.start()},e.prototype.stop=function(){this.server&&this.server.stop()},e}();t.default=r},2497:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FromBackgroundToPageServer=t.FromPageToBackgroundServer=void 0;var u=n(938),s=n(436),c=n(522),l=n(523),f=function(e){function t(n){var r=e.call(this)||this;return r.server=t.configureServer(n),r}return o(t,e),t.configureServer=function(e){var t=this,n=e.serverTransport,r=e.clientTransport,o=e.store,l=e.canPostMessage;try{var f=new u.Server({transport:n}),d=new u.Client({transport:r});return d.connect(l),f.handle(c.FRAME_TRANSPORT_ACTIONS.PAGE_TO_CONTENT_EVENT,(function(e){return a(t,void 0,void 0,(function(){var t,n,r,a,u,l,f,p;return i(this,(function(i){switch(i.label){case 0:s.logger.info("[CheckoutObservation] CONTENT: Frame Server: Got Message from PAGE",e),i.label=1;case 1:return i.trys.push([1,3,,4]),t=e.message,n=t.data,r=n.data,a=n.meta,u=a.platform,l=a.provider,f={data:r,meta:{source:u,destination:l,storeId:o.storeId,storeSessionId:o.sessionId,pageTitle:o.pageTitle,pageURL:o.pageURL}},s.logger.info("[CheckoutObservation] CONTENT -> BACKGROUND: Sending message to background",f),[4,d.invoke(c.MESSAGE_ACTIONS.CONTENT_TO_BG_EVENT,{data:f,options:{timeoutMilliseconds:3e4}})];case 2:return i.sent(),[3,4];case 3:return p=i.sent(),s.logger.info("[CheckoutObservation] Failed to invoke CONTENT_TO_BG_EVENT",{error:p}),[3,4];case 4:return[2]}}))}))})),f}catch(e){return s.logger.info("[CheckoutObservation] Failed to configure server",{error:e}),null}},t}(l.ServerBase);t.FromPageToBackgroundServer=f;var d=function(e){function t(n){var r=e.call(this)||this;return r.server=t.configureServer(n),r}return o(t,e),t.configureServer=function(e){var t=this,n=e.serverTransport,r=e.executeScript,o=e.scriptPath;try{var l=new u.Server({transport:n});return l.handle(c.MESSAGE_ACTIONS.COLLECT_DATA,(function(e){return a(t,void 0,void 0,(function(){var t,n,a;return i(this,(function(i){t=e.message;try{s.logger.info("[CheckoutObservation] CONTENT: Got message from background, triggering PAGE",t),n=t.data,a={id:c.SCRIPT_IDS.HONEY_ANALYTICS_CONFIG,data:n},r(o,a)}catch(e){s.logger.info("[CheckoutObservation] Failed to execute observation script",{error:e})}return[2]}))}))})),l}catch(e){return s.logger.info("[CheckoutObservation] Failed to configure server",{error:e}),null}},t}(l.ServerBase);t.FromBackgroundToPageServer=d},2498:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(939),u=a(n(2499)),s=n(523),c=n(2518),l=function(e){function t(n){var r=e.call(this)||this;return r.servers=[t.configureFromContentToBackendServer(n),t.configureFromContentToContentServer(n)],r}return o(t,e),t.configureFromContentToBackendServer=function(e){var t=e.analyticsMetaLoader,n=e.host,r=e.messages,o=e.request,a=new u.default({endpoint:n+"/eca",request:o,analyticsMetaLoader:t}),s=new i.HoneyMessagingTransportServer({target:r});return new c.FromContentToBackendServer({onMessageHandler:a.enqueue,transport:s})},t.configureFromContentToContentServer=function(e){var t=e.messages,n=e.analyticsSensorsFetcher,r=new i.HoneyMessagingTransportServer({target:t}),o=new i.HoneyMessagingTransportClient,a={postMessage:function(e,n){var r={ignoreResponse:!0,tab:n};return t.send(e.meta.action,e.data,r)}};return new c.FromContentToContentServer({onMessageHandler:n,serverTransport:r,clientTransport:o,canPostMessage:a})},t}(s.ManagerBase);t.default=l},2499:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(175),u=n(2500),s=n(436),c=n(2506),l=function(){function e(e){var t=this,n=e.request,l=e.endpoint,f=e.analyticsMetaLoader;this.enqueue=function(e){return o(t,void 0,void 0,(function(){var t,n,o,u,c;return a(this,(function(a){switch(a.label){case 0:return[4,this.analyticsMetaLoader()];case 1:return t=a.sent(),n=e.data,o=e.meta,u={data:n,meta:r(r(r({},t),o),{timestamp:Date.now()})},c={name:i.v4(),value:u},s.logger.info("[CheckoutObservation] Enqueueing event:",c),this.checkpointStorage.save(c),[2]}}))}))},this.endpoint=l,this.analyticsMetaLoader=f;var d=new u.MemoryStorage,p=new u.JSONStorage({storage:d});this.checkpointStorage=new u.CheckpointJSONStorage({storage:p,checkpointIntervalMilliseconds:1e3,checkpoint:this.checkpoint.bind(this)}),this.saveObservationRepository=new c.RESTURLObservationRepository({endpoint:l,request:n})}return e.prototype.checkpoint=function(e){return o(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:if(0===e.length)return[2,[]];t=[],n=[],e.forEach((function(e){t.push(e.name),n.push(e.value)})),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.saveObservationRepository.saveURLObservations(n)];case 2:return r.sent(),[2,t];case 3:return r.sent(),[2,[]];case 4:return[2]}}))}))},e}();t.default=l},2500:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2501),t),o(n(2503),t)},2501:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=void 0;var r=n(2502);Object.defineProperty(t,"MemoryStorage",{enumerable:!0,get:function(){return r.MemoryStorage}})},2502:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=void 0;var r=function(){function e(){this.storage={}}return e.prototype.save=function(e){var t=e.name,n=e.value;return this.storage[t]=n,Promise.resolve()},e.prototype.open=function(e){var t=e.name,n=this.storage[t];return Promise.resolve(n)},e.prototype.list=function(){return Promise.resolve(Object.keys(this.storage))},e.prototype.delete=function(e){var t=e.name;return delete this.storage[t],Promise.resolve()},e}();t.MemoryStorage=r},2503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckpointJSONStorage=t.JSONStorage=void 0;var r=n(2504);Object.defineProperty(t,"JSONStorage",{enumerable:!0,get:function(){return r.JSONStorage}});var o=n(2505);Object.defineProperty(t,"CheckpointJSONStorage",{enumerable:!0,get:function(){return o.CheckpointJSONStorage}})},2504:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.JSONStorage=void 0;var a=function(){function e(e){var t=e.storage;this.storage=t}return e.prototype.save=function(e){var t=e.name,n=e.value;return void 0===n?Promise.resolve():this.storage.save({name:t,value:n})},e.prototype.open=function(e){var t=e.name;return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2,this.storage.open({name:t})]}))}))},e.prototype.list=function(){return this.storage.list()},e.prototype.delete=function(e){var t=e.name;return this.storage.delete({name:t})},e}();t.JSONStorage=a},2505:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckpointJSONStorage=void 0;var i=function(){function e(e){this.options=r({},e)}return e.prototype.start=function(){},e.prototype.stop=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},e.prototype.startTimeout=function(){var e=this;this.options.checkpointIntervalMilliseconds&&(this.timeoutId=setTimeout((function(){e.timeoutId=void 0,e.flush()}),this.options.checkpointIntervalMilliseconds))},e.prototype.registerInterval=function(){this.timeoutId||this.startTimeout()},e.prototype.checkpointComplete=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.isCheckpointing=!1,[4,this.options.storage.list()];case 1:return e.sent().length>0&&this.registerInterval(),[2]}}))}))},e.prototype.flush=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,i,u,s=this;return a(this,(function(c){switch(c.label){case 0:return this.isCheckpointing=!0,[4,(e=this.options.storage).list()];case 1:return t=c.sent(),n=t.map((function(t){return o(s,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return[4,e.open({name:t})];case 1:return n=r.sent(),[2,{name:t,value:n}]}}))}))})),[4,Promise.all(n)];case 2:return r=c.sent(),[4,this.options.checkpoint(r)];case 3:i=c.sent(),u=0,c.label=4;case 4:return u<i.length?[4,e.delete({name:i[u]})]:[3,7];case 5:c.sent(),c.label=6;case 6:return u++,[3,4];case 7:return[4,this.checkpointComplete()];case 8:return c.sent(),[2]}}))}))},e.prototype.save=function(e){var t=e.name,n=e.value;return this.timeoutId||this.isCheckpointing||this.startTimeout(),this.options.storage.save({name:t,value:n})},e.prototype.open=function(e){var t=e.name;return this.options.storage.open({name:t})},e.prototype.list=function(){return this.options.storage.list()},e.prototype.delete=function(e){var t=e.name;return this.options.storage.delete({name:t})},e}();t.CheckpointJSONStorage=i},2506:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.HybridURLObservationRepository=t.RESTURLObservationRepository=t.EmbeddedURLObservationRepository=t.GraphQLURLObservationRepository=t.URLObservationService=void 0,o(n(2507),t);var a=n(2508);Object.defineProperty(t,"URLObservationService",{enumerable:!0,get:function(){return a.URLObservationService}});var i=n(2509);Object.defineProperty(t,"GraphQLURLObservationRepository",{enumerable:!0,get:function(){return i.GraphQLURLObservationRepository}});var u=n(2511);Object.defineProperty(t,"EmbeddedURLObservationRepository",{enumerable:!0,get:function(){return u.EmbeddedURLObservationRepository}});var s=n(2514);Object.defineProperty(t,"RESTURLObservationRepository",{enumerable:!0,get:function(){return s.RESTURLObservationRepository}});var c=n(2516);Object.defineProperty(t,"HybridURLObservationRepository",{enumerable:!0,get:function(){return c.HybridURLObservationRepository}})},2507:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ReversedURLObservationEncoding=t.URLObservationEncoding=void 0,function(e){e.Form="application/x-www-form-urlencoded",e.Json="application/json"}(r=t.URLObservationEncoding||(t.URLObservationEncoding={})),t.ReversedURLObservationEncoding=Object.keys(r).reduce((function(e,t){return e[r[t]]=t,e}),{})},2508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URLObservationService=void 0;var r=function(){function e(e){var t=e.repository;this.repository=t}return e.prototype.getURLPatterns=function(e){var t=e.storeId;return this.repository.getURLPatterns({storeId:t})},e.prototype.saveURLObservations=function(e){return this.repository.saveURLObservations(e)},e}();t.URLObservationService=r},2509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLURLObservationRepository=void 0;var r=n(2510);Object.defineProperty(t,"GraphQLURLObservationRepository",{enumerable:!0,get:function(){return r.GraphQLURLObservationRepository}})},2510:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLURLObservationRepository=void 0;var a=function(){function e(e){var t=e.client;this.client=t}return e.prototype.getURLPatterns=function(e){var t=e.storeId;return r(this,void 0,void 0,(function(){var e,n,r,a;return o(this,(function(o){switch(o.label){case 0:e="checkout_getURLObservationPatterns",n={params:{storeId:t,enabled:!0}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.client.query(e,n)];case 2:return r=o.sent(),a=r.data,r.errors||!a?[2,[]]:[2,a.eventDetectionGetURLObservationPatterns||[]];case 3:return o.sent(),[2,[]];case 4:return[2]}}))}))},e.prototype.saveURLObservations=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:t="checkout_eventDetectionReceiveURLObservations",n={params:{observations:e}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.client.mutate(t,n)];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),console.error("[GraphQL] URL Save Observation",r),[2,Promise.resolve()];case 4:return[2]}}))}))},e}();t.GraphQLURLObservationRepository=a},2511:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedURLObservationRepository=void 0;var r=n(2512);Object.defineProperty(t,"EmbeddedURLObservationRepository",{enumerable:!0,get:function(){return r.EmbeddedURLObservationRepository}})},2512:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedURLObservationRepository=void 0;var o=r(n(2513)),a=n(436),i=function(){function e(){}return e.prototype.getURLPatterns=function(e){var t=e.storeId;a.logger.info("Fetching URL Patterns for "+t);var n=o.default[t];if(!n)return Promise.resolve([]);var r=n.urls.filter((function(e){return e.enabled})).map((function(e){return{pattern:e.pattern,encoding:e.encoding,include:e.include,filter:e.filter}}));return Promise.resolve(r)},e.prototype.saveURLObservations=function(e){return a.logger.info("Sending Observations",e),Promise.resolve()},e}();t.EmbeddedURLObservationRepository=i},2513:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"7703020760979500833":{storeName:"49th Coffee",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"cu"},{key:"pa"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#id"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa === "purchase")]'}}]},133:{storeName:"Nordstroms",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa)]'}}]},30:{storeName:"BH Photo",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa)]'}}]},"7512623001795621936":{storeName:"chewy.com",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{data:'$[?(@property === "data" && @.pa === "purchase")]'}}]},185:{storeName:"Target",urls:[{label:"Target Analytics",enabled:!0,pattern:"https://api.target.com/web_analytics/v1",encoding:"application/json",filter:{request:{method:"POST"},data:"$..records[?(@.checkout)]"},include:[{key:"appState.globalPage"},{key:"appState.pageName"},{key:"appState.pageType"},{key:"appState.previousPageName"},{key:"appState.previousPageType"},{key:"appState.previousSearchTerm"},{key:"appState.referrer"},{key:"appState.cmsPageType"},{key:"checkout"},{key:"products"}]}]},"149870454361909889":{storeName:"Kylie Cosmetics",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa)]'}}]}}},2514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESTURLObservationRepository=void 0;var r=n(2515);Object.defineProperty(t,"RESTURLObservationRepository",{enumerable:!0,get:function(){return r.RESTURLObservationRepository}})},2515:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RESTURLObservationRepository=void 0;var a=function(){function e(e){var t=e.endpoint,n=e.request;this.endpoint=t,this.request=n}return e.prototype.getURLPatterns=function(e){e.storeId;return r(this,void 0,void 0,(function(){return o(this,(function(e){throw new Error("Not Implemented")}))}))},e.prototype.saveURLObservations=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.request.post(this.endpoint).send(e)];case 1:return t.sent(),[3,3];case 2:return t.sent(),[2];case 3:return[2]}}))}))},e}();t.RESTURLObservationRepository=a},2516:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HybridURLObservationRepository=void 0;var r=n(2517);Object.defineProperty(t,"HybridURLObservationRepository",{enumerable:!0,get:function(){return r.HybridURLObservationRepository}})},2517:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HybridURLObservationRepository=void 0;var r=function(){function e(e){var t=e.saveObservationRepository,n=e.getPatternsRepository;this.saveObservationRepository=t,this.getPatternsRepository=n}return e.prototype.getURLPatterns=function(e){var t=e.storeId;return this.getPatternsRepository.getURLPatterns({storeId:t})},e.prototype.saveURLObservations=function(e){return this.saveObservationRepository.saveURLObservations(e)},e}();t.HybridURLObservationRepository=r},2518:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FromContentToBackendServer=t.FromContentToContentServer=void 0;var u=n(938),s=n(436),c=n(522),l=n(523),f=function(e){function t(n){var r=e.call(this)||this;return r.server=t.configureServer(n),r}return o(t,e),t.configureServer=function(e){var t=this,n=e.onMessageHandler,r=e.transport;try{var o=new u.Server({transport:r});return o.handle(c.MESSAGE_ACTIONS.CONTENT_TO_BG_EVENT,(function(e){return a(t,void 0,void 0,(function(){var t,r,o;return i(this,(function(a){switch(a.label){case 0:s.logger.info("[CheckoutObservation] CONTENT -> BACKGROUND: Port Server: Received req",e),t=e.message,r=t.data,s.logger.info("[CheckoutObservation] CONTENT -> BACKGROUND: Port Server: Received message",r),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n(r)];case 2:return a.sent(),[3,4];case 3:return o=a.sent(),s.logger.info("[CheckoutObservation] Failed to handle message from content",{error:o}),[3,4];case 4:return[2]}}))}))})),o}catch(e){return s.logger.info("[CheckoutObservation] Failed configure server",{error:e}),null}},t}(l.ServerBase);t.FromContentToBackendServer=f;var d=function(e){function t(n){var r=e.call(this)||this;return r.server=t.configureServer(n),r}return o(t,e),t.configureServer=function(e){var t=this,n=e.canPostMessage,r=e.serverTransport,o=e.clientTransport,l=e.onMessageHandler;try{var f=new u.Client({transport:o});f.connect(n);var d=new u.Server({transport:r});return d.handle(c.MESSAGE_ACTIONS.ENABLE_BG_SERVER,(function(e){return a(t,void 0,void 0,(function(){var t,n,r,o,a,u;return i(this,(function(i){switch(i.label){case 0:t=e.message,n=e.context,i.label=1;case 1:return i.trys.push([1,4,,5]),(r=t.data)&&r.storeId?(o=r.storeId,[4,l(o)]):[2];case 2:return(a=i.sent())&&a.length?(s.logger.info("[CheckoutObservation] BACKGROUND -> CONTENT: Trigger content with provider",a),[4,f.invoke(c.MESSAGE_ACTIONS.COLLECT_DATA,{data:a,options:{timeoutMilliseconds:3e3,transport:n}})]):[2];case 3:return i.sent(),[3,5];case 4:return u=i.sent(),s.logger.info("[CheckoutObservation] Failed to trigger content",{error:u}),[3,5];case 5:return[2]}}))}))})),d}catch(e){return s.logger.info("[CheckoutObservation] Failed configure server",{error:e}),null}},t}(l.ServerBase);t.FromContentToContentServer=d},2519:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObservationFeatureEnabled=u;var r,o=n(93),a=(r=o)&&r.__esModule?r:{default:r};var i=(0,n(414).makeDuration)({minutes:15});function u(){return a.default.getFeatureFlag("checkout_analytics_observation_v_2",{ttl:i})}t.default={isObservationFeatureEnabled:u}},2520:function(e,t,n){"use strict";var r=c(n(9)),o=c(n(7)),a=c(n(940)),i=c(n(941)),u=c(n(1046)),s=c(n(2549));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){var t,n,a=(t=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.default.debug("checkoutPlatform: initializing "+i),e.prev=1,e.next=4,s();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),r.default.error("checkoutPlatform: feature failed to start: "+i);case 9:return e.prev=9,o.default.removeListener(c,a),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[1,6,9,12]])})),n=function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(){return n.apply(this,arguments)}),i=e.feature,u=e.startOn,s=e.start,c=u||"page:load";o.default.addListener(c,a)}l({feature:"events",start:a.default.start}),l({feature:"observation",start:u.default.start}),l({feature:"checkoutPaypal",start:i.default.start}),l({feature:"checkout",start:s.default.start})},2521:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(9),a=(r=o)&&r.__esModule?r:{default:r},i=n(437);var u={paypalCheckoutFrameDetected:function(){throw new Error("checkoutEvents: not initialized")}};var s={initialize:function(){var e=new i.Observable({value:void 0,replay:!0});u.paypalCheckoutFrameDetected=function(){return e}}};t.default={initialize:function(){s.initialize(),s.initialize=function(){a.default.warn("checkoutEvents: events: previously initialized")}},events:u}},2522:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqid=void 0,t.uniqid=function(e){var t=(void 0===e?{}:e).prefix,n=0;return function(){var e=n+1;return n=e,t?""+t+e:e.toString()}}},2523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.honeyMessagesEvents={PAYPAL_IFRAME_DETECTED:"checkout:paypal:iframe"};t.default={honeyMessagesEvents:r}},2524:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDriverExtension=void 0;var o=n(1322),a=n(2525),i={100:a.LogLevel.Trace,200:a.LogLevel.Debug,300:a.LogLevel.Info,400:a.LogLevel.Warn,500:a.LogLevel.Error},u=((r={})[a.LogLevel.Trace]=100,r[a.LogLevel.Debug]=200,r[a.LogLevel.Info]=300,r[a.LogLevel.Warn]=400,r[a.LogLevel.Error]=500,r),s=function(){function e(e){var t=e.honeyLogger;this.honeyLogger=t}return e.createService=function(t){var n=t.honeyLogger;return new o.LoggingService({driver:new e({honeyLogger:n})})},e.prototype.setLogLevel=function(e){this.honeyLogger.setLevel(u[e])},e.prototype.getLogLevel=function(){return i[this.honeyLogger.getLevel()]},e.prototype.trace=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).trace.apply(e,t)},e.prototype.debug=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).debug.apply(e,t)},e.prototype.info=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).info.apply(e,t)},e.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).warn.apply(e,t)},e.prototype.error=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).error.apply(e,t)},e}();t.LoggingDriverExtension=s},2525:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,function(e){e[e.None=-1]="None",e[e.Error=0]="Error",e[e.Warn=1]="Warn",e[e.Info=2]="Info",e[e.Debug=3]="Debug",e[e.Trace=4]="Trace"}(t.LogLevel||(t.LogLevel={}))},2526:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentCoordinator=void 0;var r=n(1323),o=n(2533),a=n(2534),i=function(){function e(e){var t=e.log,n=e.backgroundClient,r=e.honeyCheckoutServer,o=e.paypalCheckoutClient;this.paypalClientConnected=!1,this.log=t,this.backgroundClient=n,this.honeyCheckoutServer=this.configureHoneyCheckoutServer(r),this.paypalCheckoutClient=o}return e.prototype.connectPayPalFrame=function(e){var t=e.target;this.paypalCheckoutClient.connect(t),this.paypalClientConnected=!0},e.prototype.start=function(){this.log.debug("[CheckoutPaypal] Starting content coordinator"),this.honeyCheckoutServer.start()},e.prototype.stop=function(){this.paypalClientConnected=!1,this.paypalCheckoutClient.disconnect(),this.honeyCheckoutServer.stop()},e.prototype.configureHoneyCheckoutServer=function(e){var t=this;return e.handle(r.HoneyCheckoutAction.PayPalCreateOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal CreateOrder', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.CreateOrder,{options:{timeoutMilliseconds:a.config.paypal.createOrderTimeoutMilliseconds}})})),e.handle(r.HoneyCheckoutAction.PayPalApproveOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal Approve', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.ApproveOrder,{data:e.message.data})})),e.handle(r.HoneyCheckoutAction.PayPalCancelOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal Cancel', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.CancelOrder,{data:e.message.data})})),e.handle(r.HoneyCheckoutAction.PayPalErrorOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal Error', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.ErrorOrder,{data:e.message.data})})),e.handle(r.HoneyCheckoutAction.PayPalConfig,(function(e){if(!t.paypalClientConnected)throw new Error("Unable to invoke 'PayPal Config', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.PayPalConfig)})),e.handle(r.HoneyCheckoutAction.PayPalVersion,(function(e){if(!t.paypalClientConnected)throw new Error("Unable to invoke 'version', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.Version)})),e.handle(r.HoneyCheckoutAction.HoneyCheckoutIFrameComplete,(function(e){return t.stop(),Promise.resolve()})),e},e}();t.ContentCoordinator=i},2527:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2528),t),o(n(2529),t),o(n(2530),t),o(n(2531),t)},2528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.send=t.subscribe=void 0,t.subscribe=function(e){var t=e.callback,n=!1;function r(e){t(e)}return window.addEventListener("message",r),{dispose:function(){n||(n=!0,window.removeEventListener("message",r))}}},t.send=function(e){var t=e.target,n=e.origin,r=e.message;t.postMessage(r,n)}},2529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;var r=function(){function e(e){var t=e.transport;this.routes={},this.transport=t}return e.prototype.start=function(){this.transport.start(this.onMessage.bind(this))},e.prototype.stop=function(){this.transport.stop()},e.prototype.response=function(e){var t=e.message,n=e.target,r=e.context;this.transport.send({message:t,target:n,context:r})},e.prototype.handle=function(e,t){var n=this.transport.prepareHandle(e,t),r=n.actionType,o=n.handlerFunc;this.routes[r]=o},e.prototype.onMessage=function(e){var t=e.message,n=e.source,r=e.context;if(t&&t.meta){var o=t.meta.action,a=t.meta.messageId;if(a&&o){var i=this.routes[o];if(i){var u={meta:{action:o,messageId:a,type:"response"}};try{var s=i({message:t,source:n,context:r});s&&"object"==typeof s&&"function"==typeof s.then?this.onPromiseLikeResponse(s,u,{message:t,source:n,context:r}):(u.data=s,this.response({message:u,target:n,context:r}))}catch(e){u.errors=[{message:e.message||e.toString()}],this.response({message:u,target:n,context:r})}}}}},e.prototype.onPromiseLikeResponse=function(e,t,n){var r=this,o=n.source,a=n.context;return e.then((function(e){t.data=e,r.response({message:t,target:o,context:a})})).catch((function(e){t.errors=[{message:e.message||e.toString()}],r.response({message:t,target:o,context:a})}))},e}();t.Server=r},2531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var r=n(175),o=n(2532),a=function(){function e(e){var t=e.transport,n=e.defaultTimeoutMilliseconds,r=e.options;this.inflight={},this.connected=!1,this.transport=t,this.defaultTimeoutMilliseconds=n||100;var a=o.LoggingDriverNoop.createService();this.log=a,r&&r.log&&(this.log=r.log)}return e.prototype.connect=function(e){this.connected=!0,this.transport.connect({target:e,onMessage:this.onMessage.bind(this)})},e.prototype.disconnect=function(){this.connected=!1,this.transport.disconnect()},e.prototype.invoke=function(e,t){var n=this,o=void 0===t?{}:t,a=o.data,i=o.options;if(!this.connected)throw new Error("Unable to invoke action; no connection established. Did you remember to call Client.connect()");var u=this.defaultTimeoutMilliseconds,s={};i&&(i.transport&&(s=i.transport),i.timeoutMilliseconds&&(u=i.timeoutMilliseconds));var c=r.v4().toString(),l={data:a,meta:{messageId:c,type:"request",action:e}};return new Promise((function(t,r){var o={resolve:t,reject:r,timeoutId:void 0,action:l.meta.action};n.inflight[""+c]=o,n.log.debug("[@honeyscience/checkout-extension-messaging][Client][->]["+n.transport.getId()+"] ["+l.meta.action+"]",l.data),n.transport.send({message:l,options:s});var a=setTimeout((function(){var t=n.inflight[c];t&&(delete n.inflight[c],t.reject(new Error("Response for '"+e+"' exceeded "+u+"ms")))}),u);o.timeoutId=a}))},e.prototype.onMessage=function(e){var t=e.message;if(t&&t.meta){var n=t.meta.action,r=t.meta.messageId;if(r&&n){var o=this.inflight[r];if(o&&n==o.action){if(delete this.inflight[r],clearTimeout(o.timeoutId),t.errors)return this.log.error("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.errors),t.errors[0]&&t.errors[0].message?o.reject(new Error(t.errors[0].message)):o.reject(new Error("An unknown error occurred."));this.log.debug("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.data),o.resolve(t.data)}}}},e}();t.Client=a},2532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDriverNoop=void 0;var r=n(1322),o=function(){function e(){}return e.createService=function(){return new r.LoggingService({driver:new e})},e.prototype.setLogLevel=function(e){this.logLevel=e},e.prototype.getLogLevel=function(){return this.logLevel},e.prototype.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e}();t.LoggingDriverNoop=o},2533:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalCheckoutServer=t.PayPalCheckoutAction=void 0;var a=n(334);!function(e){e.CreateOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/create",e.ApproveOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/approve",e.CancelOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/cancel",e.ErrorOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/error",e.PayPalConfig="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/config",e.Version="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/version"}(t.PayPalCheckoutAction||(t.PayPalCheckoutAction={}));var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(a.Server);t.PayPalCheckoutServer=i},2534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;t.config={honey:{clientTimeoutMilliseconds:5e3,discoveryTimeoutMilliseconds:5e3,createOrderTimeoutMilliseconds:3e4},paypal:{clientTimeoutMilliseconds:5e3,discoveryTimeoutMilliseconds:5e3,createOrderTimeoutMilliseconds:3e4}}},2535:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalCheckoutClient=void 0;var a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(n(334).Client);t.PayPalCheckoutClient=a},2536:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundClient=void 0;var a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(n(334).Client);t.BackgroundClient=a},2537:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DiscoveryService=t.makeObservableDiscoveryResult=t.DiscoveryStatus=t.FrameIdKey=void 0;var i,u=n(437),s=n(1325),c=n(1326),l=n(1324),f=n(2538),d=n(1326);function p(e){var t=e.tabId,n={frameId:e.frameId,tabId:t,status:e.status,message:e.message};return new u.Observable({value:n,replay:!0})}Object.defineProperty(t,"FrameIdKey",{enumerable:!0,get:function(){return d.FrameIdKey}}),function(e){e.Pending="pending",e.Error="error",e.Discovered="discovered",e.None="none"}(i=t.DiscoveryStatus||(t.DiscoveryStatus={})),t.makeObservableDiscoveryResult=p;var v=function(){function e(e){var t,n=e.log,r=e.backgroundClient,o=e.discoveryRelayServer,a=e.paypalRealyScriptPath,i=e.honeyRealyScriptPath;this.discoveryRelayServerState="stopped",this.paypalFrameDetected=new u.Observable({value:{},replay:!1}),this.honeyFrameDetected=new u.Observable({value:{},replay:!1}),this.log=n,this.backgroundClient=r,this.discoveryRelayServer=this.configureDiscoveryRelayServer(o),this.paypalRealyScriptPath=a,this.honeyRealyScriptPath=i,this.platform=f.PlatformService.create(),this.discoveryIndex=((t={})[c.FrameIdKey.PayPal]={},t[c.FrameIdKey.Honey]={},t)}return e.prototype.start=function(){this.log.debug("[CheckoutPaypal] Starting Discovery Service"),this.startDiscoveryRelayServer()},e.prototype.stop=function(){this.stopDiscoveryRelayServer(),this.discoveryIndex[c.FrameIdKey.PayPal]={},this.discoveryIndex[c.FrameIdKey.Honey]={}},e.prototype.startDiscoveryRelayServer=function(){"started"!=this.discoveryRelayServerState?(this.discoveryRelayServerState="started",this.discoveryRelayServer.start()):this.log.debug("discovery service: already started")},e.prototype.stopDiscoveryRelayServer=function(){"stopped"!=this.discoveryRelayServerState?(this.discoveryRelayServerState="stopped",this.discoveryRelayServer.stop()):this.log.debug("discovery service: already stopped")},e.prototype.discoveryStatus=function(e){var t=e.type,n=e.tabId,r=e.frameId,o=this.getDiscoveryResult({type:t,tabId:n,frameId:r});return o?o.lastValue.status:i.None},e.prototype.removeDiscoveryResult=function(e){var t=e.type,n=e.tabId,r=e.frameId,o=this.discoveryIndex[t]||{},a=o[n]||{};a[r]&&(clearTimeout(a[r].timeoutId),delete a[r]),o[n]=a,this.discoveryIndex[t]=o},e.prototype.setDiscoveryResult=function(e){var t=e.type,n=e.tabId,r=e.frameId,o=e.value,a=this.discoveryIndex[t]||{},i=a[n]||{};i[r]=o,a[n]=i,this.discoveryIndex[t]=a},e.prototype.getDiscoveryResult=function(e){var t=e.type,n=e.tabId,r=e.frameId,o=this.discoveryIndex[t];if(o){var a=o[n];if(a)return a[r]}},e.prototype.discover=function(e){var t=e.type,n=e.tabId,r=e.frameId,u=e.timeout;return o(this,void 0,void 0,(function(){var e,o,s,l,f,d,v;return a(this,(function(a){if(5e3,e=u||5e3,u?(s="discovery service: discover: "+t+": timeout: "+u+" ms",this.log.debug(s)):(o="discovery service: discover: "+t+": timeout: not provided, defaulting to "+e+" ms",this.log.warn(o)),"started"!==this.discoveryRelayServerState)throw new Error("discovery service: not started");return n?r?t===c.FrameIdKey.PayPal?(d=this.getDiscoveryResult({type:t,tabId:n,frameId:r}))?d.lastValue.status!==i.Pending?[2,this.discoverPayPal({tabId:n,frameId:r,timeout:e})]:[2,d.observable]:[2,this.discoverPayPal({tabId:n,frameId:r,timeout:e})]:t===c.FrameIdKey.Honey?[2,this.discoverHoney({tabId:n,frameId:r,timeout:u})]:(v="discovery service: discover: invalid type: "+t,[2,p({tabId:n,frameId:r,status:i.Error,message:v})]):(f="discovery service: discover: "+t+": frame error: no frameId value provided",this.log.debug(f),[2,p({tabId:n,frameId:r,status:i.Error,message:f})]):(l="discovery service: discover: "+t+": tab error: no tabId value provided",this.log.debug(l),[2,p({tabId:n,frameId:r,status:i.Error,message:l})])}))}))},e.prototype.discoverPayPal=function(e){var t=e.tabId,n=e.frameId,r=e.timeout,o=c.FrameIdKey.PayPal,a=this.paypalRealyScriptPath;return this.deployRelay({type:o,tabId:t,frameId:n,file:a,timeout:r})},e.prototype.discoverHoney=function(e){var t=e.tabId,n=e.frameId,r=e.timeout,o=c.FrameIdKey.Honey,a=this.honeyRealyScriptPath;return this.deployRelay({type:o,tabId:t,frameId:n,file:a,timeout:r})},e.prototype.deployRelay=function(e){var t=e.type,n=e.tabId,r=e.frameId,u=e.file,c=e.timeout;return o(this,void 0,void 0,(function(){var e,o,l,f,d,v,h,g,y,m,b=this;return a(this,(function(a){switch(a.label){case 0:e=Date.now(),o=window.location.origin,this.log.debug("\n      discovery service: discover: "+t+": deploy: tabId="+n+" frameId="+r+" file="+this.paypalRealyScriptPath+" contentScriptOrigin='"+o+"\n    "),l={tabId:n,details:{frameId:r,file:u}},a.label=1;case 1:return a.trys.push([1,3,,4]),f=this.platform.onMessage((function(t){if(t&&t.meta&&t.meta.action&&t.meta.messageId&&"checkout/relay-ready"==t.meta.action){var o=parseInt(t.meta.frameId,10);if(parseInt(t.meta.tabId,10)==n&&o===r){f.dispose();var a=t.meta.messageId,i={contentScriptOrigin:window.location.origin,deployStart:e,tabId:n,frameId:r,configId:a};b.backgroundClient.invoke(s.BackgroundAction.SendMessage,{data:{tabId:n,frameId:r,message:i}})}}})),[4,this.backgroundClient.invoke(s.BackgroundAction.ExecuteScript,{data:l})];case 2:return a.sent(),[3,4];case 3:return d=a.sent(),v="discovery service: discover: "+t+": script execution error: "+d.message,[2,p({tabId:n,frameId:r,status:i.Error,message:v})];case 4:return(m={})[t]={tabId:n,frameId:r},h=m,g={tabId:n,frameId:r,status:i.Pending},y=p(g),this.registerDiscoverySession({type:t,tabId:n,frameId:r,timeout:c,observable:y,seed:g}),this.removeFrames(h),[2,y]}}))}))},e.prototype.registerDiscoverySession=function(e){var t=this,n=e.tabId,o=e.frameId,a=e.type,u=e.timeout,s=e.observable,c=e.seed,l=s.subscribe((function(e){t.log.debug("discovery service: discover: "+a+": monitor:",e);var u=t.getDiscoveryResult({frameId:o,tabId:n,type:a});if(e&&u){if(e.status!=i.Pending)return l.dispose(),void t.removeDiscoveryResult({type:a,tabId:n,frameId:o});var s=r(r({},u),{lastValue:e});t.setDiscoveryResult({tabId:n,frameId:o,type:a,value:s})}})),f={observable:s,lastValue:c,timeoutId:setTimeout((function(){var e=t.getDiscoveryResult({tabId:n,frameId:o,type:a});if(e){var r="discovery service: discover: "+a+": timeout error",u={tabId:n,frameId:o,status:i.Error,message:r};e.observable.next(u)}}),u)};this.setDiscoveryResult({tabId:n,frameId:o,type:a,value:f})},e.prototype.removeFrames=function(e){var t=this;this.backgroundClient.invoke(s.BackgroundAction.FrameIdsRemove,{data:e}).catch((function(e){t.log.error("discovery service: remove frames: error: "+e.message)}))},e.prototype.configureDiscoveryRelayServer=function(e){var t=this,n=function(e,n){var r,o=null===(r=n.context)||void 0===r?void 0:r.origin,a=n.message.data;if(t.log.debug("discovery service: discover: ack: "+e+": "+o+")",n),!a)return t.log.error("discovery service: discover: "+e+": ack: error: missing data"),!1;var u=a.tabId,s=a.frameId;if(!u)return t.log.error("discovery service: discover: "+e+": ack: error: missing tab id"),!1;if(!s)return t.log.error("discovery service: discover: "+e+": ack: error: missing frame id"),!1;var c=t.getDiscoveryResult({type:e,tabId:u,frameId:s});if(!c)return t.log.error("discovery service: discover: "+e+": ack: error: discovery result not found for tabId="+u+" frameId="+s),!1;if(a.errors){var l=a&&a.errors?a.errors[0]:new Error("unknown error");return t.log.error("discovery service: discover: "+e+": ack: error: "+l.message),c.observable.next({tabId:u,frameId:s,status:i.Error,message:l.message,handle:n.source}),!1}return t.log.debug("discovery service: discover: "+e+": ack: discovered",a),c.observable.next({tabId:u,frameId:s,status:i.Discovered,message:o,handle:n.source}),!0};return e.handle(l.DiscoveryRelayAction.DiscoveredPayPal,(function(e){return o(t,void 0,void 0,(function(){var t;return a(this,(function(r){return t=c.FrameIdKey.PayPal,[2,n(t,e)]}))}))})),e.handle(l.DiscoveryRelayAction.DiscoveredHoney,(function(e){return o(t,void 0,void 0,(function(){var t;return a(this,(function(r){return t=c.FrameIdKey.Honey,[2,n(t,e)]}))}))})),e},e}();t.DiscoveryService=v},2538:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2539),t)},2539:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformService=t.discoverContentPlatform=void 0;var r=n(2540),o=n(2541),a=n(2542),i=n(2543),u=n(438);function s(){return"undefined"!=typeof browser?u.PlatformHandle.Browser:"undefined"!=typeof chrome?u.PlatformHandle.Chrome:"undefined"!=typeof safari?u.PlatformHandle.Safari:u.PlatformHandle.Unknown}t.discoverContentPlatform=s;var c=function(){function e(e){var t=e.platform;this.platform=t}return e.create=function(){var t,n=((t={})[u.PlatformHandle.Unknown]=function(){return new e({platform:new i.UnknownPlatform})},t[u.PlatformHandle.Safari]=function(){return new e({platform:new a.SafariPlatform})},t[u.PlatformHandle.Browser]=function(){return new e({platform:new r.BrowserPlatform})},t[u.PlatformHandle.Chrome]=function(){return new e({platform:new o.ChromePlatform})},t)[s()];return n?n():new e({platform:new i.UnknownPlatform})},e.prototype.getHandle=function(){return this.platform.getHandle()},e.prototype.getRuntimeUrl=function(e){var t=e.path;return this.platform.getRuntimeUrl({path:t})},e.prototype.tabSendMessage=function(e){var t=e.tabId,n=e.frameId,r=e.message;this.platform.tabSendMessage({tabId:t,frameId:n,message:r})},e.prototype.runtimeSendMessage=function(e){var t=e.message;return this.platform.runtimeSendMessage({message:t})},e.prototype.onMessage=function(e){return this.platform.onMessage(e)},e.prototype.injectScriptElement=function(e){var t=e.path,n=document.createElement("script");n.src=this.platform.getRuntimeUrl({path:t}),(document.head||document.documentElement).appendChild(n)},e}();t.PlatformService=c},2540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserPlatform=void 0;var r=n(438),o=function(){function e(){}return e.prototype.getHandle=function(){return r.PlatformHandle.Browser},e.prototype.getRuntimeUrl=function(e){var t=e.path;return browser.runtime.getURL(t)},e.prototype.tabSendMessage=function(e){var t=e.tabId,n=e.frameId,r=e.message,o={frameId:n};browser.tabs.sendMessage(t,r,o)},e.prototype.runtimeSendMessage=function(e){var t=e.message;return t?t.dest&&t.dest.ignoreResponse?(browser.runtime.sendMessage(t),Promise.resolve()):new Promise((function(e,n){browser.runtime.sendMessage(t,null,(function(r){if(browser.runtime.lastError){var o=new Error("browser: runtime: sendMessage: "+browser.runtime.lastError.message);n(o)}else if(r.success)e(r.data);else{var a=r&&r.error;(o=new Error(a&&a.message)).sentMessage=t,a&&(o.data=a.data,o.stack=""+(o.stack||"")+(a.stack||"")),n(o)}}))})):Promise.reject(new Error("browser: runtime: sendMessage: missing message"))},e.prototype.onMessage=function(e){return browser.runtime.onMessage.addListener(e),{dispose:function(){browser.runtime.onMessage.removeListener(e)}}},e}();t.BrowserPlatform=o},2541:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromePlatform=void 0;var r=n(438),o=function(){function e(){}return e.prototype.getHandle=function(){return r.PlatformHandle.Chrome},e.prototype.getRuntimeUrl=function(e){var t=e.path;return chrome.runtime.getURL(t)},e.prototype.tabSendMessage=function(e){var t=e.tabId,n=e.frameId,r=e.message,o={frameId:n};chrome.tabs.sendMessage(t,r,o)},e.prototype.runtimeSendMessage=function(e){var t=e.message;return t?t.dest&&t.dest.ignoreResponse?(chrome.runtime.sendMessage(t),Promise.resolve()):new Promise((function(e,n){chrome.runtime.sendMessage(t,null,(function(r){if(chrome.runtime.lastError){var o=new Error("chrome: runtime: sendMessage: "+chrome.runtime.lastError.message);n(o)}else if(r.success)e(r.data);else{var a=r&&r.error;(o=new Error(a&&a.message)).sentMessage=t,a&&(o.data=a.data,o.stack=""+(o.stack||"")+(a.stack||"")),n(o)}}))})):Promise.reject(new Error("chrome: runtime: sendMessage: missing message"))},e.prototype.onMessage=function(e){return chrome.runtime.onMessage.addListener(e),{dispose:function(){chrome.runtime.onMessage.removeListener(e)}}},e}();t.ChromePlatform=o},2542:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SafariPlatform=void 0;var r=n(438),o=function(){function e(){}return e.prototype.getHandle=function(){return r.PlatformHandle.Safari},e.prototype.getRuntimeUrl=function(e){var t=e.path;return browser&&browser.runtime?browser.runtime.getURL(t):safari.runtime?safari.runtime.getURL(t):safari.extension&&safari.extension.getURL?safari.extension.getURL(t):t},e.prototype.tabSendMessage=function(e){var t=e.tabId,n=e.frameId,r=e.message,o={frameId:n};browser&&browser.tabs&&browser.tabs.sendMessage&&browser.tabs.sendMessage(t,r,o),safari&&safari.tabs&&safari.tabs.sendMessage&&safari.tabs.sendMessage(t,r,o)},e.prototype._runtimeSendMessage=function(e){var t=e.message,n=e.browser;return t?t.dest&&t.dest.ignoreResponse?(n.runtime.sendMessage(t),Promise.resolve()):new Promise((function(e,r){n.runtime.sendMessage(t,null,(function(o){if(n.runtime.lastError){var a=new Error("browser: runtime: sendMessage: "+n.runtime.lastError.message);r(a)}else if(o.success)e(o.data);else{var i=o&&o.error;(a=new Error(i&&i.message)).sentMessage=t,i&&(a.data=i.data,a.stack=""+(a.stack||"")+(i.stack||"")),r(a)}}))})):Promise.reject(new Error("browser: runtime: sendMessage: missing message"))},e.prototype.runtimeSendMessage=function(e){var t=e.message;return browser&&browser.runtime&&browser.runtime.sendMessage?this._runtimeSendMessage({message:t,browser:browser}):safari&&safari.runtime&&safari.runtime.sendMessage?this._runtimeSendMessage({message:t,browser:safari}):Promise.reject(new Error("safari: runtime: sendMessage: sendMessage is unavailable"))},e.prototype.onMessage=function(e){return browser&&browser.runtime&&browser.runtime.onMessage?(browser.runtime.onMessage.addListener(e),{dispose:function(){browser.runtime.onMessage.removeListener(e)}}):safari&&safari.runtime&&safari.runtime.onMessage?(safari.runtime.onMessage.addListener(e),{dispose:function(){safari.runtime.onMessage.removeListener(e)}}):{dispose:function(){}}},e}();t.SafariPlatform=o},2543:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownPlatform=void 0;var r=n(438),o=function(){function e(){}return e.prototype.getHandle=function(){return r.PlatformHandle.Unknown},e.prototype.getRuntimeUrl=function(e){return e.path},e.prototype.tabSendMessage=function(e){},e.prototype.runtimeSendMessage=function(e){return Promise.resolve()},e.prototype.onMessage=function(e){return{dispose:function(){}}},e}();t.UnknownPlatform=o},2544:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportClient=t.dataSentinel=void 0;var o=n(175);t.dataSentinel={};var a=function(){function e(e){var t=(void 0===e?{}:e).id,n=void 0===t?o.v4().toString():t;this.id=n}return e.makeTransportInterop=function(e){var t=e.honeyMessages,n=e.options,r=n.ignoreResponse,o=n.background,a=n.frameId,i=n.tabId;return{postMessage:function(e){var n={ignoreResponse:r,background:o,frameId:a,tab:i};return t.send(e.meta.action,e.data,n)}}},e.prototype.send=function(e){var n,o=e.message,a=e.options;if(!this.platform||!this.messageHandler)throw new Error("No platform available. Did you connect()");var i=a.src;i&&i.tabId&&(n=i.tabId),void 0===o.data&&(o.data=t.dataSentinel);var u=this.platform.postMessage(o,n);this.messageHandler(r(r({},o),{data:u}))},e.prototype.getId=function(){return this.id},e.prototype.connect=function(e){var t=e.target,n=e.onMessage;if(this.platform)throw new Error("Already connected to platform, please disconnect() before attempting to connect()");this.platform=t,this.subscription=this.subscribe({callback:n})},e.prototype.disconnect=function(){this.platform=void 0},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1;if(!this.platform)throw new Error("Unable to subscribe, no port set, did you call connect()?");return this.messageHandler=function(e){if(e&&e.meta&&t.platform){var r={message:e,source:t.platform};n(r)}},{dispose:function(){r||(r=!0,t.platform)}}},e}();t.HoneyMessagingTransportClient=a},2545:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportServer=void 0;var a=n(175),i=function(){function e(t){var n=t.id,r=void 0===n?a.v4().toString():n,o=t.target,i=t.responseTimeoutMilliseconds;this.honeyMessagesResponses={},this.id=r,this.platform=o,this.honeyMessagesListeners={},this.responseTimeoutMilliseconds=i||e.defaultResponseTimeoutMilliseconds}return e.prototype.connect=function(){throw new Error("Not Implemented in Servers, please use Server.start()")},e.prototype.disconnect=function(){throw new Error("Not Implemented in Servers, please use Server.stop()")},e.prototype.send=function(e){var t=e.message,n=e.context;n&&n.messageId&&(n.result=t.data,this.completeResponse(n))},e.prototype.completeResponse=function(e){var t=this.honeyMessagesResponses[e.messageId];t&&(t.resolve(e.result),this.flushResponse(e.messageId))},e.prototype.start=function(e){this.messageEnvelopeHandler=e},e.prototype.stop=function(){for(var e=0,t=Object.keys(this.honeyMessagesListeners);e<t.length;e++){var n=t[e];this.honeyMessagesListeners[n].dispose()}this.honeyMessagesListeners={}},e.prototype.flushResponse=function(e){var t=this.honeyMessagesResponses[e];if(t)return clearTimeout(t.timeoutId),delete this.honeyMessagesResponses[e],t},e.prototype.prepareHandle=function(e,t){var n=this;if(this.honeyMessagesListeners[e])throw new Error(e+" is already registered.");var i=function(e,t,i){return r(n,void 0,void 0,(function(){var n,r,u,s,c=this;return o(this,(function(o){switch(o.label){case 0:if(n=a.v4().toString(),r={source:{postMessage:function(){return i}},context:{result:null,src:i,messageId:n},message:{meta:{messageId:n,type:"request",action:e},data:t}},!this.messageEnvelopeHandler)throw new Error("Server was not started, please use Server.start()");return u={timeoutId:setTimeout((function(){var e=c.flushResponse(n);e&&e.reject(new Error("honey messaging transport: response timeout: exceeded "+c.responseTimeoutMilliseconds+"ms"))}),this.responseTimeoutMilliseconds),resolve:function(e){},reject:function(e){},promise:Promise.resolve(void 0)},s=new Promise((function(e,t){u.resolve=e,u.reject=t})),u.promise=s,this.honeyMessagesResponses[n]=u,r.context.messageId=n,this.messageEnvelopeHandler(r),[4,s];case 1:return[2,o.sent()]}}))}))};return this.platform.addListener(e,i),this.honeyMessagesListeners[e]={dispose:function(){return n.platform.removeListener(e,i)}},{actionType:e.toLowerCase(),handlerFunc:t}},e.defaultResponseTimeoutMilliseconds=3e5,e}();t.HoneyMessagingTransportServer=i},2546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2547:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameTransportServer=void 0;var r=function(){function e(e){var t=e.allowedOrigins,n=e.id;this.id=n;for(var r=!1,o=0,a=t;o<a.length;o++){if("*"===a[o]){r=!0,this.allowedOrigins=["*"];break}}r||(this.allowedOrigins=t)}return e.prototype.start=function(e){this.subscription=this.subscribe({callback:e})},e.prototype.stop=function(){this.subscription&&(this.subscription.dispose(),this.subscription=void 0)},e.prototype.send=function(e){var t=e.message,n=e.target,r=e.context;n&&r&&r.origin&&n.postMessage(t,r.origin)},e.prototype.prepareHandle=function(e,t){return{actionType:e,handlerFunc:t}},e.prototype.isEventOriginAllowed=function(e){if(void 0===e)return!0;for(var t=0,n=this.allowedOrigins;t<n.length;t++){var r=n[t];if("*"===r)return!0;if(r===e)return!0}return!1},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1,o=function(e){t.isEventOriginAllowed(e.origin)&&e.data&&e.data.meta&&"response"!==e.data.meta.type&&n({message:e.data,source:e.source,context:{origin:e.origin}})};return window.addEventListener("message",o),{dispose:function(){r||(r=!0,window.removeEventListener("message",o))}}},e}();t.FrameTransportServer=r},2548:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={messaging:{clientTimeout:5e3,backgroundTimeout:5e3},discovery:{paypalDiscoveryTimeout:15e3},allowedOrigin:"https://www.paypal.com"}},2549:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a,i=(r=C(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M){e.next=4;break}return e.next=3,w.default.initialize();case 3:M=e.sent;case 4:return e.abrupt("return",M);case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),u=(o=C(regeneratorRuntime.mark((function e(){var t,n,r,o,a,u,s,f,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.default.getInfo();case 2:return t=e.sent,e.next=5,p.default.getCurrent();case 5:if((n=e.sent).id){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,(0,S.getCheckoutSetting)(E.checkoutSettings.iFrameOriginUrl);case 10:return r=e.sent,e.next=13,(0,S.getCheckoutSetting)(E.checkoutSettings.devToolsEnabled);case 13:return o=e.sent,e.prev=14,e.t0=Boolean,e.next=18,(0,S.getExistingCheckoutSessionState)(n.id);case 18:if(e.t1=e.sent,a=(0,e.t0)(e.t1),u=void 0,s=null,a){e.next=46;break}return e.next=25,L();case 25:return o&&(0,I.setCheckoutDevToolsState)({paypalDiscoveryComplete:!0}),e.next=28,i();case 28:return u=e.sent,e.next=31,m.default.getFeatureFlag(k,{ttl:R});case 31:if(e.sent&&x.default.transition(_.States.PayPalDiscovered),f=!1,!o){e.next=38;break}return e.next=37,(0,S.getCheckoutSetting)(E.checkoutSettings.allStoresEnabled);case 37:f=e.sent;case 38:return e.next=40,(0,S.getCheckoutStoreConfig)(n.id);case 40:if(s=e.sent,o&&f&&(s||(s=(0,I.mockStoreCheckoutConfig)(n)),s.config.status="SUPPORTED"),s||h.default.trackPayPalSDKVersion(n),s&&s.config&&"SUPPORTED"===s.config.status){e.next=46;break}return o&&(0,I.setCheckoutDevToolsState)({isEligible:!1,eligibilityReason:"store-not-enabled",iframeLoaded:!1}),e.abrupt("return");case 46:v=function(e){if(o){var t=e?e.eligibilityReason:"none",n=!!e&&e.isEligible;(0,I.setCheckoutDevToolsState)({eligibilityReason:t,isEligible:n,iframeLoaded:!0})}},g=A("honeyCheckout"),l.default.render(c.default.createElement(O.default,{checkoutCoordinator:u,onIFrameLoadedProp:v,iframeSrc:r,store:n,storeCheckoutConfig:s,user:t}),g),e.next=54;break;case 51:e.prev=51,e.t2=e.catch(14),d.default.error("Error loading Honey Checkout iframe: "+e.t2);case 54:case"end":return e.stop()}}),e,this,[[14,51]])}))),function(){return o.apply(this,arguments)}),s=(a=C(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.getCheckoutSetting)(E.checkoutSettings.devToolsEnabled);case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,p.default.getCurrent();case 7:t=e.sent,n=A("honeyCheckoutDevTools"),l.default.render(c.default.createElement(P.default,{store:t}),n);case 10:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),c=T(n(0)),l=T(n(46)),f=n(1327),d=T(n(9)),p=T(n(12)),v=T(n(7)),h=T(n(218)),g=T(n(32)),y=T(n(14)),m=T(n(93)),b=T(n(940)),w=T(n(941)),E=n(414),_=n(2550),x=T(_),S=n(301),O=T(n(2552)),I=n(2554),P=T(I);function T(e){return e&&e.__esModule?e:{default:e}}function C(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var R=9e5,k="checkout_check_store_eligibility",M=void 0;function L(){var e=this,t=!1;return new Promise((function(n){var r,o=b.default.events.paypalCheckoutFrameDetected().subscribe((r=C(regeneratorRuntime.mark((function r(a){var u,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:if(a){e.next=4;break}return e.abrupt("return");case 4:return t=!0,o.dispose(),u=a.frameId,s=a.tabId,c=f.HoneyMessagingTransportClient.makeTransportInterop({honeyMessages:v.default,options:{ignoreResponse:!1,background:!0,frameId:u,tabId:s}}),e.next=10,g.default.getCurrent();case 10:if(e.sent.id===a.tabId){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,i();case 15:e.sent.connectPayPalFrame({target:c}),n();case 18:case"end":return e.stop()}}),r,e)}))),function(e){return r.apply(this,arguments)}))}))}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=document.querySelector("#"+e);if(!n){(n=document.createElement("div")).id=e;var r=document.querySelector(t);r.appendChild(n)}return n}t.default={start:function(){setTimeout(u,0),s()}}},2550:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.States=void 0;var o=u(n(7)),a=u(n(10)),i=n(2551);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=t.States={Started:"started",Ineligible:"ineligible",PayPalDiscovered:"PayPalDiscovered",PageChanged:"pageChanged",PageLoaded:"pageLoaded",NonCheckoutPageChanged:"nonCheckoutPageChanged"},l=(s(r={},c.Started,[c.PageLoaded,c.Ineligible]),s(r,c.PageLoaded,[c.PayPalDiscovered,c.PageChanged]),s(r,c.PageChanged,[c.Ineligible,c.NonCheckoutPageChanged]),s(r,c.NonCheckoutPageChanged,[c.PayPalDiscovered]),r),f=new i.StateMachine({initialState:c.Started,terminalStates:[c.Ineligible,c.PayPalDiscovered],stateTransitions:l});o.default.addListener("stores:pageview",(function(){f.transition(c.PageLoaded)})),f.terminalStateDetected.subscribe((function(){f.currentState()===c.PayPalDiscovered&&a.default.sendEvent("eca000101",{eligible:!0})})),t.default=f},2551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateMachine=void 0;var r=n(437),o=function(){function e(e){var t=e.initialState,n=e.terminalStates,o=e.stateTransitions;this.terminalStateDetected=new r.Observable({value:{state:void 0},replay:!1}),this.state=t,this.terminalStates=n,this.stateTransitions=o}return e.prototype.transition=function(e){return this.isValidTransition(e)&&(this.state=e,this.isTerminalState()&&this.terminalStateDetected.next({state:this.state})),this.state},e.prototype.currentState=function(){return this.state},e.prototype.isValidTransition=function(e){var t=this,n=this.stateTransitions[this.state];return!(!n||!n.some((function(e){return t.terminalStates.includes(e)})))||!!this.stateTransitions[e]},e.prototype.isTerminalState=function(){return this.terminalStates.includes(this.state)},e}();t.StateMachine=o},2552:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=(r=N(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.generateKey({name:"AES-CBC",length:256},!0,["encrypt","decrypt"]);case 2:j=e.sent,F=crypto.getRandomValues(new Uint8Array(16)),U={name:"AES-CBC",iv:F};case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),s=(o=N(regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=D(t),e.next=3,crypto.subtle.decrypt(U,j,n);case 3:return r=e.sent,o=new TextDecoder,a=o.decode(r),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),c=n(0),l=k(c),f=k(n(1)),d=k(n(7)),p=k(n(10)),v=k(n(4)),h=k(n(23)),g=k(n(131)),y=k(n(12)),m=k(n(39)),b=k(n(49)),w=k(n(37)),E=k(n(42)),_=k(n(14)),x=k(n(149)),S=k(n(1122)),O=n(29),I=k(n(941)),P=k(n(2553)),T=n(1328),C=k(T),R=n(301);function k(e){return e&&e.__esModule?e:{default:e}}function M(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function N(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}function D(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0,o=e.length;r<o;r+=1)n[r]=e.charCodeAt(r);return t}var j=void 0,F=void 0,U=void 0;function G(e){var t,n=(t=N(regeneratorRuntime.mark((function e(){var t,n,a,c,l,P,D,H,$,V,q,X,Z=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return C.default.setTarget(G.current.contentWindow,o),C.default.beginListening((function(e){return o.match(new RegExp("^("+e+")"))})),n=null,B.current=C.default.bindResponders((L(t={},T.types.extensionInitPaypalCoordinator,function(){var e=N(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&(n.reject("Cancelled"),n=null),e.prev=1,(n=I.default.startHoneyDiscovery({timeout:t.timeout})).then((function(){r.start()})),e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,Z,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionPaypalCoordinatorReady,N(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",Promise.reject(new Error(T.types.extensionInitPaypalCoordinator+" has not been called")));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,Z)})))),L(t,T.types.parentSendSDataEvent,function(){var e=N(regeneratorRuntime.mark((function e(t){var n,r,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:r=e.sent,n=JSON.parse(r);case 6:return a=(o=n).eventName,i=A(o,["eventName"]),e.next=9,p.default.sendEvent(a,i);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.parentRemoveIFrame,W),L(t,T.types.parentUpdateStyles,Y),L(t,T.types.parentSetIFrameAttribute,(function(e){return G.current.setAttribute(e.attributeName,e.value),!0})),L(t,T.types.parentRemoveIFrameAttribute,(function(e){return G.current.removeAttribute(e.attributeName),!0})),L(t,T.types.extensionActivateStoreGold,N(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.default.setStoreTabStandDownStatus(f.id,!1,1);case 2:return e.next=4,y.default.activateStoreGold(f.id,{src:"HoneyCheckout",inPopover:!1});case 4:return t=e.sent,h.default._reduxStore&&h.default._reduxStore.dispatch((0,O.update)(t)),f.standDown&&p.default.sendEvent("ext300006"),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,Z)})))),L(t,T.types.extensionGetIsInExperimentPopulation,(function(e){var t=e.experimentName;return b.default.getIsInExperimentPopulation(t)})),L(t,T.types.extensionExperimentsGetVariant,(function(e){var t=e.experimentName;return b.default.getVariant(t)})),L(t,T.types.extensionExperimentsTrackImpression,(function(e){var t=e.experimentName;return b.default.trackImpression(t)})),L(t,T.types.extensionGetI18nMessage,(function(e){return v.default.getMessage(e.messageName)})),L(t,T.types.extensionGetI18nMessages,function(){var e=N(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,Promise.all(t.messageNames.map(function(){var e=N(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.default.getMessage(t);case 2:r=e.sent,n[t]=r;case 4:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionOpenContentUILocation,(function(e){var t=e.pathname,n=e.query,r=void 0===n?{}:n,o=e.state,a=void 0===o?{}:o,i=e.force,u=void 0===i||i,s=e.feature,c=void 0===s?"honey-checkout":s,l=e.surface,f=void 0===l?"popup":l;return h.default.open({pathname:t,query:r,state:a,force:u,feature:c,surface:f})})),L(t,T.types.extensionGetContentUILocation,(function(){return h.default.getLocation()})),L(t,T.types.extensionGetContentUIVisible,(function(){return h.default.visible()})),L(t,T.types.extensionShowContentUI,(function(){return h.default.show()})),L(t,T.types.extensionHideContentUI,(function(){return h.default.hide()})),L(t,T.types.extensionGetCurrentStore,function(){var e=N(regeneratorRuntime.mark((function e(t){var n,r=t.filterProps;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f,r&&(n=(0,S.default)(f,r)),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionGetCurrentPageTypes,(function(){return g.default.getCurrentPageTypes()})),L(t,T.types.extensionGetLru,(function(e){var t=e.key,n=e.options;return w.default.get(t,n)})),L(t,T.types.extensionSetLru,function(){var e=N(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:r=e.sent,n=JSON.parse(r);case 6:return a=(o=n).key,i=o.value,u=o.maxAge,e.abrupt("return",w.default.set(a,i,u));case 8:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionGetBgLocalStorageItem,(function(e){var t=e.key;return(0,R.getLocalStorageItem)(t)})),L(t,T.types.extensionSetBgLocalStorageItem,(function(e){var t=e.key,n=e.value;return(0,R.setLocalStorageItem)(t,n)})),L(t,T.types.extensionDeleteBgLocalStorageItem,(function(e){var t=e.key;return(0,R.deleteLocalStorageItem)(t)})),L(t,T.types.extensionDeleteLru,(function(e){var t=e.key,n=e.options;return w.default.del(t,n)})),L(t,T.types.extensionGQLQuery,function(){var e=N(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:r=e.sent,n=JSON.parse(r);case 6:return a=(o=n).operationName,i=o.variables,u=o.config,e.next=9,d.default.send("checkout:action",{action:E.default.CHECKOUT_GQL_QUERY,data:{operationName:a,variables:i,config:u}},{background:!0});case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionGQLMutation,function(){var e=N(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:r=e.sent,n=JSON.parse(r);case 6:return a=(o=n).operationName,i=o.variables,u=o.config,e.next=9,d.default.send("checkout:action",{action:E.default.CHECKOUT_GQL_MUTATION,data:{operationName:a,variables:i,config:u}},{background:!0});case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionAuthFetch,(function(e){var t=e.url,n=e.options;return d.default.send("checkout:action",{action:E.default.CHECKOUT_AUTH_FETCH,data:{url:t,options:n}},{background:!0})})),L(t,T.types.extensionNativeFetch,function(){var e=N(regeneratorRuntime.mark((function e(t){var n=t.url,r=t.options;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.default.send("checkout:action",{action:E.default.CHECKOUT_FETCH,data:{url:n,options:r}},{background:!0}));case 1:case"end":return e.stop()}}),e,Z)})));return function(t){return e.apply(this,arguments)}}()),L(t,T.types.extensionGetUserInfo,(function(){return _.default.getInfo()})),L(t,T.types.extensionGetUserOffers,N(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.default.getInfo();case 2:return t=e.sent,n=t.id,e.next=6,y.default.getCurrent();case 6:return r=e.sent,o=r.id,e.abrupt("return",x.default.getProductOfferActivations(n,o));case 9:case"end":return e.stop()}}),e,Z)})))),t)),e.next=8,Promise.all([m.default.getDeviceId(),m.default.getSessionId(),m.default.getSessionId(),crypto.subtle.exportKey("jwk",j)]);case 8:return a=e.sent,c=i(a,4),l=c[0],P=c[1],D=c[2],H=c[3],$=v.default.getCountryCode(),V=v.default.getUILanguage(),q=g.default.getCurrentPageTypes(),e.next=19,C.default.request(T.types.checkoutInit,{paypalEnv:"production",deviceId:l,deviceSessionId:P,deviceCountryCode:$,deviceLanguage:V,sessionId:D,storeCheckoutConfig:k,offers:{offers:K,cartProductsWithOffer:Q,productOffersInCartSum:J},storeId:f.id,storeName:f.name,storeApplyCodesComplete:f.applyCodesComplete,storeNumCoupons:f.numCoupons,storeGold:f.gold,pageTypes:q,browser:"ch",extVersion:"13.11.0",parentHref:window.location.href,parentPathname:window.location.pathname,parentOrigin:window.location.origin,jsonRequestKey:H,requestIV:[].concat(M(F))});case 19:X=e.sent,z(!0),(0,R.setHoneyCheckoutEligibilityState)(f.id,X,12e4),U(X);case 23:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)}),r=e.checkoutCoordinator,o=e.iframeSrc,f=e.store,k=e.storeCheckoutConfig,D=e.user,U=e.onIFrameLoadedProp,G=(0,c.useRef)(),B=(0,c.useRef)((function(){})),H=(0,c.useRef)(document.querySelector("body")),$=(0,c.useState)(!1),V=i($,2),q=V[0],z=V[1];function W(){G.current.remove()}function Y(e){var t=e.visible,n=e.lockScrolling,r=e.bodyStyle,o=void 0===r?{}:r,i=e.iframeStyle,u=void 0===i?{}:i;return Object.assign(H.current.style,a({overflow:n?"hidden":"auto"},o)),Object.assign(G.current.style,a({visibility:t?"visible":"hidden"},u)),!0}var X=(0,P.default)(D,f,q),K=X.offers,Q=X.cartProductsWithOffer,J=X.productOffersInCartSum;return(0,c.useEffect)((function(){return B.current()}),[]),(0,c.useEffect)((function(){var e,t,n=(e=N(regeneratorRuntime.mark((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n&&n.action,e.next="openCheckoutModal"===e.t0?3:5;break;case 3:return h.default.hide(),e.abrupt("return",C.default.request(T.types.checkoutOpenFromFS));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)}),r=(t=N(regeneratorRuntime.mark((function e(t,n){var r,o=n.user;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.default.request(T.types.checkoutUserUpdate,{user:o,parentHref:window.location.href,parentPathname:window.location.pathname,parentOrigin:window.location.origin});case 2:r=e.sent,(0,R.setHoneyCheckoutEligibilityState)(f.id,r,12e4);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)});function o(e,t){var n=t.action,r=t.pathname;"location-change"===n&&C.default.request(T.types.checkoutRouteChange,{pathname:r})}return q?(d.default.addListener("checkout:action:ui",n),d.default.addListener("user:current:update",r),d.default.addListener("ui:action",o),function(){d.default.removeListener("checkout:action:ui",n),d.default.removeListener("user:current:update",r),d.default.removeListener("ui:action",o)}):function(){}}),[q]),l.default.createElement("iframe",{ref:G,id:"honeyCheckoutIFrame",title:"Honey Checkout",src:o,style:{visibility:"hidden"},onLoad:n,scrolling:"no"})}G.propTypes={checkoutCoordinator:f.default.object.isRequired,iframeSrc:f.default.string.isRequired,store:f.default.object.isRequired,storeCheckoutConfig:f.default.object.isRequired,user:f.default.object.isRequired,onIFrameLoadedProp:f.default.func.isRequired},t.default=G},2553:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=f(n(7)),u=f(n(149)),s=f(n(37)),c=n(1328),l=f(c);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}t.default=function(e,t,n){var f,p=this,v=(0,a.useState)([]),h=o(v,2),g=h[0],y=h[1],m=(0,a.useState)([]),b=o(m,2),w=b[0],E=b[1],_=(0,a.useState)(0),x=o(_,2),S=x[0],O=x[1],I=(0,a.useMemo)((function(){return{offers:g,cartProductsWithOffer:w,productOffersInCartSum:S}}),[g,w,S]),P=(f=d(regeneratorRuntime.mark((function n(r){var o,a,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=r.updatedCartProductsWithOffer,a=r.updatedProductOffersInCartSum,n.next=3,u.default.getProductOfferActivations(e.id,t.id);case 3:i=n.sent,y(i),E(o),O(a);case 7:case"end":return n.stop()}}),n,p)}))),function(e){return f.apply(this,arguments)});n&&l.default.request(c.types.checkoutCartContentsDetected,r({},I)),(0,a.useEffect)((function(){d(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=[],o=0,n.prev=2,n.next=5,s.default.get("offers:"+e.id+":"+t.id+":cart");case 5:return r=n.sent,n.next=8,s.default.get("offerGoldBonus:"+t.id);case 8:o=n.sent,n.next=13;break;case 11:n.prev=11,n.t0=n.catch(2);case 13:P({cartProductsWithOfferFromCache:r,productOffersInCartSumFromCache:o});case 14:case"end":return n.stop()}}),n,p,[[2,11]])})))()}),[]);var T,C=(T=d(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.action,o=n.data,e.t0=r,e.next="cartContentsDetected"===e.t0?4:5;break;case 4:return e.abrupt("return",P({updatedCartProductsWithOffer:o.cartProductsWithOffer,updatedProductOffersInCartSum:o.productOffersInCartSum}));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,p)}))),function(e,t){return T.apply(this,arguments)});return(0,a.useEffect)((function(){return i.default.addListener("offers:action",C),function(){i.default.removeListener("offers:action",C)}}),[i.default,C]),I}},2554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mockStoreCheckoutConfig=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.setCheckoutDevToolsState=function(e){g=o({},g,e),y(g)};var a=n(0),i=p(a),u=p(n(1)),s=n(2),c=n(3),l=p(n(8)),f=n(414),d=n(301);function p(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}t.mockStoreCheckoutConfig=function(e){return{sdkLatest:null,storeId:e.id,config:{status:"SUPPORTED",guestEnabled:!0,pi4Enabled:!0,encryptedRcvrId:"1234",updatedAt:"2021-03-04T20:09:24.288799000Z",storeName:e.name}}};var h=(0,s.createUseStyles)({container:{position:"fixed",color:c.Colors.grey800,bottom:"0",right:"0",minWidth:"500px",border:"1px solid "+c.Colors.grey300,fontSize:"14px",background:c.Colors.white,zIndex:"2147483647"},header:{borderBottom:"1px solid "+c.Colors.grey300,padding:"8px",cursor:"pointer",display:"flex",alignItems:"center"},expandArrow:{marginLeft:"auto","& svg":{height:"14px"}},content:{padding:"6px 8px 14px","& > div":{marginTop:"3px","& > span":{marginRight:"4px"},display:"flex",alignItems:"center"},"& span":{fontWeight:"500"},"& input[type=checkbox]":{margin:"0"}},green:{color:c.Colors.green600},iframeInput:{width:"100%"},infoRow:{paddingBottom:"6px"},red:{color:c.Colors.red600}}),g={paypalDiscoveryComplete:!1,eligibilityReason:null,isEligible:null,iframeLoaded:!1},y=function(){};function m(e){var t,n=this,o=(t=v(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=5;break}return e.next=3,(0,d.setLocalStorageItem)(f.checkoutSettings.iFrameOriginUrl.localStorageKey,U);case 3:(0,d.clearExistingCheckoutSessionState)(u.id),B();case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)}),u=e.store,s=h(),p=(0,a.useState)(g),m=r(p,2),b=m[0],w=m[1],E=(0,a.useState)(!1),_=r(E,2),x=_[0],S=_[1],O=(0,a.useState)(!1),I=r(O,2),P=I[0],T=I[1],C=(0,a.useState)(!0),R=r(C,2),k=R[0],M=R[1],L=(0,a.useState)(!0),A=r(L,2),N=A[0],D=A[1],j=(0,a.useState)("https://cdn.joinhoney.com/honey-checkout/index.html"),F=r(j,2),U=F[0],G=F[1];function B(){(0,d.reloadBg)(),setTimeout((function(){window.location.reload()}),500)}(0,a.useEffect)((function(){v(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getCheckoutSetting)(f.checkoutSettings.iFrameOriginUrl);case 2:(t=e.sent)&&G(t);case 4:case"end":return e.stop()}}),e,n)})))()}),[]),(0,a.useEffect)((function(){y=function(e){w(e)}}),[w]),(0,a.useEffect)((function(){var e;(e=v(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getCheckoutSetting)(f.checkoutSettings.allStoresEnabled);case 2:t=e.sent,S(t),M(!1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,a.useEffect)((function(){var e;(e=v(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.getCheckoutSetting)(f.checkoutSettings.devToolsExpanded);case 2:t=e.sent,T(t),D(!1);case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]);var H=b.isEligible,$=b.eligibilityReason,V=b.paypalDiscoveryComplete,q=b.iframeLoaded,z=null===H,W="ineligible:";return z?W="eligibility: waiting...":H&&(W="eligible:"),N?null:i.default.createElement("div",{className:s.container},i.default.createElement("div",{className:s.header,onClick:function(){(0,d.setLocalStorageBoolean)(f.checkoutSettings.devToolsExpanded.localStorageKey,!P),T(!P)}},i.default.createElement("div",null,"Checkout DevTools"),i.default.createElement(c.Icon,{className:s.expandArrow,icon:P?"direction-down-16":"direction-up-16"})),P&&i.default.createElement("div",{className:s.content},i.default.createElement("div",{className:s.infoRow},i.default.createElement("span",null,"data:")," ","production"),i.default.createElement("div",{className:s.infoRow},i.default.createElement("span",null,"paypal:")," ","production"),i.default.createElement("div",{className:(0,l.default)(s.infoRow,s.spb)},i.default.createElement("span",null,"SPB: ",!V&&"waiting..."),V&&i.default.createElement("strong",{className:s.green},"detected")),i.default.createElement("div",{className:s.infoRow},i.default.createElement("span",null,W),!z&&i.default.createElement("strong",{className:H?s.green:s.red},$)),i.default.createElement("div",{className:s.infoRow},i.default.createElement("span",null,"iframe:"),i.default.createElement("input",{className:(0,l.default)(s.iframeInput,q?s.green:s.red),type:"text",onChange:function(e){G(e.target.value)},onKeyDown:o,value:U})),i.default.createElement("div",{className:s.infoRow},i.default.createElement("span",null,"all stores enabled:"),!1,k?null:i.default.createElement("input",{type:"checkbox",checked:x,onChange:function(){(0,d.setLocalStorageBoolean)(f.checkoutSettings.allStoresEnabled.localStorageKey,!x),S(!x)}})),i.default.createElement(c.Button,{size:24,onClick:B,copy:"refresh background and current tab",buttonType:"secondary-ghost"})))}m.propTypes={store:u.default.object.isRequired},t.default=m},2555:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=(r=regeneratorRuntime.mark((function e(t,n,r){var o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n,e.t0){e.next=5;break}return e.next=4,u.default.getCurrent();case 4:e.t0=e.sent;case 5:return o=e.t0,a=[c,l,f],r&&(a=r),e.next=10,Promise.all(a.map((function(e){return e(t,o)})));case 10:return i=e.sent,e.abrupt("return",i.some((function(e){return e}))&&d(o));case 12:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e,t,n){return o.apply(this,arguments)}),i=s(n(33)),u=s(n(12));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e,t){return e.GOLD_REWARDS&&(!t.gold||t.gold&&t.gold.activated)},l=function(e,t){return e&&(e.FIND_SAVINGS||e.GOLD_REWARDS)&&i.default.unix(t.applyCodesComplete).isAfter((0,i.default)().subtract(2,"hours"))},f=function(e){return e&&!e.FIND_SAVINGS},d=function(e){return!e.standDown};t.default={isFsOrGoldAndMoreThanTwoHrs:l,isNotOnFs:f,isOnGoldRewardsOrActivated:c,isPaymentsViewPrioritized:a}},2556:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=(r=R(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.generateKey({name:"AES-CBC",length:256},!0,["encrypt","decrypt"]);case 2:L=e.sent,A=crypto.getRandomValues(new Uint8Array(16)),N={name:"AES-CBC",iv:A};case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),s=(o=R(regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=M(t),e.next=3,crypto.subtle.decrypt(N,L,n);case 3:return r=e.sent,o=new TextDecoder,a=o.decode(r),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),c=n(0),l=I(c),f=I(n(1)),d=I(n(7)),p=I(n(10)),v=I(n(82)),h=n(510),g=I(n(49)),y=I(n(4)),m=I(n(93)),b=I(n(14)),w=I(n(23)),E=I(n(12)),_=n(1331),x=I(n(2557)),S=n(1332),O=I(S);function I(e){return e&&e.__esModule?e:{default:e}}function P(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function R(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var k="https://cdn.joinhoney.com/gift-cards/index.html";function M(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0,o=e.length;r<o;r+=1)n[r]=e.charCodeAt(r);return t}var L=void 0,A=void 0,N=void 0;function D(e){var t,n=this,r=(t=R(regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return O.default.setTarget(I.current.contentWindow,k),O.default.beginListening((function(e){return k.match(new RegExp("^("+e+")"))})),M.current=O.default.bindResponders((T(t={},S.types.extensionSendSDataEvent,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.eventName,r=C(t,["eventName"]),e.next=3,p.default.sendEvent(n,r);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionRemoveIFrame,ne),T(t,S.types.extensionUpdateStyles,re),T(t,S.types.extensionExperimentsGetVariant,(function(e){return g.default.getVariant(e.variantName)})),T(t,S.types.extensionGetI18nMessage,(function(e){return y.default.getMessage(e.messageName)})),T(t,S.types.extensionSetIFrameAttribute,(function(e){return I.current.setAttribute(e.attributeName,e.value),!0})),T(t,S.types.extensionRemoveIFrameAttribute,(function(e){return I.current.removeAttribute(e.attributeName),!0})),T(t,S.types.extensionSetGiftCardsEnabledForUser,(function(e){return b.default.updateSetting("honeyWallet",e.enabled?1:0)})),T(t,S.types.extensionOpenLoginPrompt,(function(){return w.default.open({pathname:"/gift-cards-auth",query:{},state:{},force:!0,feature:"gift-cards-auth",surface:"popup"})})),T(t,S.types.extensionHideContentUI,(function(){return w.default.hide()})),T(t,S.types.extensionGetCartPrice,R(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getCurrent();case 2:return t=e.sent,e.next=5,(0,_.getCartPrice)(t);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,i)})))),T(t,S.types.extensionSetHoneyStorageItem,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,r=t.value,e.next=3,v.default.local.set(n,r);case 3:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionGetHoneyStorageItem,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,e.next=3,v.default.local.get(n).catch((function(){return null}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionRemoveHoneyStorageItem,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,e.next=3,v.default.local.del(n).catch((function(){return null}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionSetWindowLocalStorageItem,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,r=t.value,e.next=3,d.default.send("honey-pay-now:action:local-storage",{action:h.HONEY_PAY_NOW_MESSAGES.SET_LOCAL_STORAGE_ITEM,data:{key:n,value:r}},{background:!0});case 3:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionGetWindowLocalStorageItem,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,e.next=3,d.default.send("honey-pay-now:action:local-storage",{action:h.HONEY_PAY_NOW_MESSAGES.GET_LOCAL_STORAGE_ITEM,data:{key:n}},{background:!0});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionRemoveWindowLocalStorageItem,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,e.next=3,d.default.send("honey-pay-now:action:local-storage",{action:h.HONEY_PAY_NOW_MESSAGES.REMOVE_LOCAL_STORAGE_ITEM,data:{key:n}},{background:!0});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionGQLQuery,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:r=e.sent,n=JSON.parse(r);case 6:return e.next=8,d.default.send("honey-pay-now:action:gql-query",{action:h.HONEY_PAY_NOW_MESSAGES.GQL_QUERY,data:n},{background:!0});case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionGQLMutation,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:r=e.sent,n=JSON.parse(r);case 6:return e.next=8,d.default.send("honey-pay-now:action:gql-query",{action:h.HONEY_PAY_NOW_MESSAGES.GQL_MUTATION,data:n},{background:!0});case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionAuth,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.authProvider,r=t.isLoginMode,o=t.isOptOut,e.t0=n,e.next="google"===e.t0?4:"apple"===e.t0?6:"paypal"===e.t0?8:"facebook"===e.t0?10:(e.t0,12);break;case 4:return r?b.default.loginGoogle():b.default.registerGoogle(o),e.abrupt("break",14);case 6:return r?b.default.loginApple():b.default.registerApple(o),e.abrupt("break",14);case 8:return r?b.default.loginPaypal():b.default.registerPaypal(o),e.abrupt("break",14);case 10:return r?b.default.loginFacebook():b.default.registerFacebook(o),e.abrupt("break",14);case 12:a=r?"login":"join",b.default.openEmailAuth(a,"ext",!1,!1);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionGetUserABGroup,R(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.default.getUserABGroup("auth");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,i)})))),T(t,S.types.extensionGetI18nCountryCode,R(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.default.getCountryCode(),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e,i)})))),T(t,S.types.extensionSetIsMinimized,function(){var e=R(regeneratorRuntime.mark((function e(t){var n=t.isMinimized,r=t.savings,o=t.goldAward,a=t.autoPopType;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(a),r&&W(r),o&&Q(o),$(n);case 4:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,S.types.extensionOpenGiftCardDealModal,R(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getCurrent();case 2:t=e.sent,E.default.tag(t.id,"extension_links",null,{forceHidden:!0,src:"GiftCardDealOpenModal"});case 4:case"end":return e.stop()}}),e,i)})))),t)),e.next=7,crypto.subtle.exportKey("jwk",L);case 7:return n=e.sent,e.next=10,O.default.request(S.types.giftCardsInit,a({},o,{jsonRequestKey:n,requestIV:[].concat(P(A)),parentOrigin:window.location.origin}));case 10:r=e.sent,f.current=r;case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)}),o=e.data,f=(0,c.useRef)(!1),I=(0,c.useRef)(),M=(0,c.useRef)((function(){})),N=(0,c.useRef)(document.querySelector("body")),D=(0,c.useState)(null),j=i(D,2),F=j[0],U=j[1],G=(0,c.useState)(!1),B=i(G,2),H=B[0],$=B[1],V=(0,c.useState)(null),q=i(V,2),z=q[0],W=q[1],Y=(0,c.useState)(null),X=i(Y,2),K=X[0],Q=X[1],J=(0,c.useState)(null),Z=i(J,2),ee=Z[0],te=Z[1];function ne(){M.current(),O.default.stopListening(),I.current.remove()}function re(e){var t=e.visible,n=e.lockScrolling,r=e.bodyStyle,o=void 0===r?{}:r,i=e.iframeStyle,u=void 0===i?{}:i;return Object.assign(N.current.style,a({overflow:n?"hidden":"auto"},o)),Object.assign(I.current.style,a({visibility:t?"visible":"hidden"},u)),!0}(0,c.useEffect)((function(){R(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.getFeatureFlag("gift_cards_use_remote_iframe");case 2:t=e.sent,U(t);case 4:case"end":return e.stop()}}),e,n)})))()}),[]),(0,c.useEffect)((function(){return function(){return ne()}}),[]),(0,c.useEffect)((function(){var e,t=(e=R(regeneratorRuntime.mark((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n&&n.action,e.next=e.t0===h.HONEY_PAY_NOW_MESSAGES.SET_PAY_NOW_MODAL_VISIBILITY?3:e.t0===h.HONEY_PAY_NOW_MESSAGES.REMOVE_PAY_NOW_IFRAME?5:7;break;case 3:return re({visible:n.data.isVisible,lockScrolling:n.data.isVisible}),e.abrupt("break",8);case 5:return ne(),e.abrupt("break",8);case 7:return e.abrupt("break",8);case 8:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)});function n(e,t){var n=t.user;O.default.request(S.types.giftCardsUserUpdate,n)}return d.default.addListener("honey-pay-now:action:ui",t),d.default.addListener("user:current:update",n),function(){d.default.removeListener("honey-pay-now:action:ui",t),d.default.removeListener("user:current:update",n)}}),[]);return null===F?null:l.default.createElement(c.Fragment,null,H&&l.default.createElement(x.default,{autoPopType:ee,handleUnMinimize:function(){O.default.request(S.types.giftCardsSetIsMinimized,!1),$(!1,ee)},goldAward:K,savings:z}),l.default.createElement("iframe",{ref:I,id:"giftcardsIFrame",title:"Honey Pay Now",src:k,className:null,style:{visibility:"hidden"},onLoad:r,scrolling:"no"}))}D.propTypes={data:f.default.object},D.defaultProps={data:{}},t.default=D},2557:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=f(o),i=f(n(1)),u=n(2),s=n(3),c=n(188),l=f(n(4));function f(e){return e&&e.__esModule?e:{default:e}}var d={root:{display:"flex",position:"fixed",right:"0px",top:"80px",zIndex:2147483647},container:{backgroundColor:s.Colors.white,width:"280px",right:function(e){return e.isExpanded?"0px":"-202px"},transition:"all 400ms ease-in-out",height:"56px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",borderRadius:"5px 0px 0px 5px",position:"relative",boxShadow:"0px 2px 35px rgba(0, 0, 0, 0.25)"},icon:{cursor:"pointer",width:"18px",height:"18px",marginLeft:"9px"},dotsContainer:{alignItems:"center",cursor:"move",display:"flex",height:"100%",paddingRight:"9px"},dots:{display:"flex",flexDirection:"column",height:"17px",width:"10px",justifyContent:"space-between",marginLeft:"16px"},dotRow:{width:"100%",display:"flex",justifyContent:"space-between"},dot:{height:"3px",width:"3px",display:"inline-block",borderRadius:"50%",backgroundColor:s.Colors.grey600},content:{cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%"},savingsText:{marginLeft:"18px"},giftCardInfo:{fontSize:"12px"},title:{color:s.Colors.grey900,fontSize:"12px",fontWeight:"600"},savings:{color:s.Colors.green500,fontWeight:"700"},goldAward:{color:s.Colors.gold900,fontWeight:"700"},seeSavings:{color:s.Colors.grey800,composes:"link1"}},p=(0,u.createUseStyles)(d),v=function(e){var t=e.handleUnMinimize,n=e.savings,i=e.goldAward,u=e.autoPopType,s=(0,o.useState)(!1),f=r(s,2),d=f[0],v=f[1],h=p({isExpanded:d}),g=(0,o.createRef)(),y=function(e){return function(){v(e)}},m=function(e){var t=e.changedTouches&&e.changedTouches[0].clientY||e.clientY;(t<0||t>window.innerHeight-56)&&(t=t<0?0:window.innerHeight-56),g.current.style.top=t+"px"};function b(){window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",b)}var w=function(){return n&&!i},E=function(){return!n&&i?l.default.getMessageAndReplace("Get_GOLDPOINTS_Gold_points",{GOLDPOINTS:a.default.createElement("span",{className:h.goldAward},i)}):w()?l.default.getMessageAndReplace("Save_SAVINGS_with_a_gift_card",{SAVINGS:a.default.createElement("span",{className:h.savings},(0,c.centsToDollars)(n))}):l.default.getMessageAndReplace("Save_SAVINGS_and_get_Gold",{SAVINGS:a.default.createElement("span",{className:h.savings},(0,c.centsToDollars)(n))})};return a.default.createElement("div",{ref:g,className:h.root},a.default.createElement("div",{className:h.container},a.default.createElement("div",{className:h.dotsContainer,onMouseDown:function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",b)},onMouseUp:b,onTouchMove:m},a.default.createElement("div",{className:h.dots},a.default.createElement("div",{className:h.dotRow},a.default.createElement("div",{className:h.dot}),a.default.createElement("div",{className:h.dot})),a.default.createElement("div",{className:h.dotRow},a.default.createElement("div",{className:h.dot}),a.default.createElement("div",{className:h.dot})),a.default.createElement("div",{className:h.dotRow},a.default.createElement("div",{className:h.dot}),a.default.createElement("div",{className:h.dot})))),a.default.createElement("div",{className:h.content,onClick:t,onMouseEnter:y(!0),onMouseLeave:y(!1)},a.default.createElement("img",{className:h.icon,src:"https://cdn.honey.io/images/finance/honey-icon-orange.svg",alt:"Open Honey"}),a.default.createElement("div",{className:h.savingsText},"HOOK"===u?a.default.createElement(o.Fragment,null,a.default.createElement("div",{className:h.title},E()),a.default.createElement("div",{className:h.seeSavings},w()?l.default.getMessage("Click_to_see_savings"):l.default.getMessage("Click_to_see_Gift_Card_Deal"))):a.default.createElement("div",{className:h.giftCardInfo},l.default.getMessage("Click_for_gift_card_info"))))))};v.propTypes={handleUnMinimize:i.default.func.isRequired,savings:i.default.number.isRequired,goldAward:i.default.number.isRequired,autoPopType:i.default.string.isRequired},t.default=v},2564:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1141),a=(r=o)&&r.__esModule?r:{default:r};t.default={getExtensionID:function(){return a.default.getExtensionID()},connect:function(e,t){return a.default.connect(e,t)},addOnConnectListener:function(e){return a.default.addOnConnectListener(e)},removeOnConnnectListener:function(e){return a.default.removeOnConnnectListener(e)}}},2565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unMountApp=function(e){(0,i.unmountComponentAtNode)(e)};var r,o,a=h(n(0)),i=n(46),u=n(6),s=n(30),c=n(2),l=h(n(135)),f=h(n(2566)),d=h(n(292)),p=h(n(173)),v=n(1336);function h(e){return e&&e.__esModule?e:{default:e}}t.default=(r=regeneratorRuntime.mark((function e(){var t,n,r,o,i,h,g,y,m,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,l.default)(),n=t.plugins,(r=document.createElement("div")).style="z-index: 2147483647 !important",document.body.appendChild(r),o=r,(i=new MutationObserver((function(e){var t=!0,n=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(t=(a=u.next()).done);t=!0){var s=a.value;"attributes"===s.type&&"style"===s.attributeName&&(i.disconnect(),r.style="z-index: 2147483647 !important")}}catch(e){n=!0,o=e}finally{try{!t&&u.return&&u.return()}finally{if(n)throw o}}}))).observe(o,{attributes:!0,attributeFilter:["style"]}),h="closed",e.next=11,(0,p.default)(r,null,{mode:h,dontInjectFonts:!0});case 11:return g=e.sent,y=new c.SheetsRegistry,(m=(0,s.create)()).setup({plugins:n,insertionPoint:g.getElementById("honey")}),b=a.default.createElement(c.JssProvider,{registry:y,jss:m},a.default.createElement(u.Provider,{store:d.default},a.default.createElement(v.Provider,{value:{shadowContainer:r}},a.default.createElement(f.default,null)))),e.next=18,(0,p.default)(r,b,{mode:h,dontInjectFonts:!0,feature:"honey-tips",surface:"badge"});case 18:return e.abrupt("return",{shadowRoot:g});case 19:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(){return o.apply(this,arguments)})},2566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=c(r),a=c(n(2567)),i=c(n(2598)),u=c(n(2617)),s=c(n(2618));function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return o.default.createElement(r.Fragment,null,o.default.createElement(u.default,null,o.default.createElement(s.default,null,o.default.createElement(a.default,null)),o.default.createElement(i.default,null)))}},2567:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=y(n(0)),a=y(n(9)),i=n(6),u=y(n(2568)),s=y(n(2591)),c=y(n(2596)),l=n(215),f=y(n(327)),d=y(n(2597)),p=n(152),v=n(26),h=n(16),g=n(888);function y(e){return e&&e.__esModule?e:{default:e}}var m={movable:u.default,teaser:s.default,sticky_teaser:u.default,launchpad:c.default,launchpadTeaser:s.default,launchpadBadge:u.default},b="teaser",w="sticky_teaser",E="movable",_="launchpadTeaser",x="launchpadBadge",S="none";t.default=function(){var e=(0,l.useTeaser)(),t=e.teaserDisabled,n=e.showTeaser,u=void 0,s=(0,f.default)()||[],c=(0,d.default)()||!1,y=c.hasValidLaunchpadTips,O=c.hasValidLaunchpadBadgeTips,I=(0,p.useIsStickyTeaser)(),P=r(I,1)[0],T=(0,i.useSelector)(v.selectCurrentContainerId),C=((0,i.useSelector)((0,h.selectUniversalContainerById)(T))||{}).isLaunchpad;if(C&&(!s||!s.length))return null;C?y?O?u=n&&!t?_:x:(a.default.debug("\n        "+g.UNIVERSAL_CONTAINER_LOG_PREFIX+"containerFactory: Could not find tips "+Array.from(g.VALID_LAUNCHPAD_BADGE_TIPS).join(", ")+" so not showing launchpad badge"),u=S):(a.default.debug(g.UNIVERSAL_CONTAINER_LOG_PREFIX+"containerFactory: Could not find tips "+Array.from(g.VALID_LAUNCHPAD_TIPS).join(", ")+" so not showing launchpad"),u=S):u=n&&!t?P?w:b:E;var R=m[u];return R?o.default.createElement(R,{isMini:!0,isLaunchpad:C,isTeaser:n&&!t,isMiniTeaser:!0,isNotification:!1,isFullyExpandedPdp:!0,isMiniEngagement:!0}):null}},2568:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=K(o),i=K(n(1)),u=n(6),s=n(2),c=n(47),l=K(n(101)),f=K(n(901)),d=K(n(4)),p=K(n(7)),v=K(n(14)),h=n(238),g=K(n(300)),y=K(n(42)),m=K(n(130)),b=K(n(152)),w=n(420),E=K(n(504)),_=n(3),x=K(n(498)),S=K(n(501)),O=K(n(1223)),I=n(16),P=K(n(187)),T=n(19),C=n(215),R=K(n(524)),k=K(n(327)),M=K(n(234)),L=K(n(1207)),A=K(n(893)),N=K(n(2569)),D=K(n(2575)),j=K(n(521)),F=K(n(2576)),U=K(n(2577)),G=K(n(943)),B=n(25),H=K(n(944)),$=K(n(945)),V=K(n(946)),q=K(n(1339)),z=K(n(2583)),W=K(n(1341)),Y=K(n(2588)),X=K(n(2590));function K(e){return e&&e.__esModule?e:{default:e}}function Q(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var J=(0,s.createUseStyles)({middleHeader:{composes:"title1",color:_.Colors.grey900},contentLoading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},containerLoader:{paddingTop:"60px",backgroundColor:_.Colors.white,display:"flex",justifyContent:"center",alignItems:"center"}}),Z=function(){var e=J();return a.default.createElement("div",{className:e.contentLoading})},ee=function(e){var t=e.isMini,n=e.isMiniTeaser,i=e.isNotification,s=e.isFullyExpandedPdp,K=e.isTeaser,ee=e.isLaunchpad,te=(0,u.useDispatch)(),ne=(0,o.createRef)(),re=(0,o.useRef)(),oe=(0,o.useRef)(),ae=(0,o.useRef)(),ie=(0,C.useContainerState)(),ue=r(ie,3),se=ue[0],ce=ue[1],le=ue[2],fe=(0,C.useContainerOpen)(),de=r(fe,3),pe=de[0],ve=de[1],he=de[2],ge=(0,L.default)(),ye=r(ge,2)[1],me=(0,o.useRef)(!0),be=(0,M.default)()||{},we=(0,B.useFeedbackMode)(),Ee=r(we,3),_e=Ee[0],xe=Ee[2],Se=(0,D.default)(),Oe=r(Se,2),Ie=Oe[0],Pe=Oe[1],Te=(0,k.default)()||[],Ce=l.default.getTipsConfigSync().storeIds,Re=void 0===Ce?[]:Ce,ke=be.id,Me=(0,o.useMemo)((function(){return Re.every((function(e){return e!==ke}))}),[ke,Re]),Le=(0,A.default)(),Ae=Le.showBanner,Ne=void 0!==Ae&&Ae,De=Le.copy,je=Le.color,Fe=Le.ctaAction,Ue=Le.ctaCopy,Ge=(0,o.useState)(),Be=r(Ge,2),He=Be[0],$e=Be[1],Ve=(0,o.useState)(!1),qe=r(Ve,2),ze=qe[0],We=qe[1],Ye=(0,o.useState)(0),Xe=r(Ye,2),Ke=Xe[0],Qe=Xe[1],Je=(0,B.useBadgeSnoozed)(),Ze=(0,B.useFullscreenTipInstance)(),et=J(),tt=(0,o.useState)(),nt=r(tt,2),rt=nt[0],ot=nt[1],at=(0,W.default)(ne),it=at.scrollToCategory,ut=at.addTipRef,st=at.scrollToTop,ct=at.isScrolling,lt=[],ft=(0,q.default)().startAnimation,dt=(0,b.default)(),pt=r(dt,1)[0],vt=(0,u.useSelector)((0,I.selectCategoryIdsByTipInstanceIds)(Te)),ht=pt===w.TIPS_EXP_ENUM.delayed_hover_or_click;(0,o.useEffect)((function(){0!==Te.length&&(0,T.incrementSessionCount)()}),[Te]),(0,o.useEffect)((function(){if(ee){var e=y.default.INCREMENT_LAUNCHPAD_TIP_SHOWN_BY_STORE,t={background:!0};le&&ke&&me.current&&pe&&Q(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return me.current=!1,n.next=3,p.default.send("honeyTips:tips",{action:e,storeId:ke},t);case 3:case"end":return n.stop()}}),n,void 0)})))()}}),[le,ke,me,ve,ee,pe]),(0,o.useEffect)((function(){ee&&Q(regeneratorRuntime.mark((function e(){var t,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!be.id){e.next=11;break}return e.next=3,Promise.all([v.default.getInfo(),v.default.getUserFollow(),v.default.getStoreSessionCount(be.id)]);case 3:t=e.sent,n=r(t,3),o=n[0],a=n[1],i=n[2],$e(o),We(a.includes(be.id)),Qe(i);case 11:case"end":return e.stop()}}),e,void 0)})))()}),[be.id,be.storeIcon,ee]),(0,o.useEffect)((function(){var e;(e=Q(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye();case 2:e.sent&&he();case 4:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,o.useLayoutEffect)((function(){var e=setInterval((function(){_e||Ze||ne.current&&(oe.current=ne.current.clientHeight)}),100);return function(){e&&clearInterval(e)}}));var gt,yt=(0,B.useTipInstanceFullscreen)(Ze),mt=r(yt,2)[1],bt=(0,B.useBottomSheet)(),wt=r(bt,2),Et=wt[0],_t=void 0===Et?{}:Et,xt=wt[1],St=(0,B.useTipInstanceBottomSheet)(_t.tipInstanceId),Ot=r(St,1)[0],It=void 0===Ot?"":Ot,Pt=m.default.AMAZON_STORES.includes(be.id),Tt=function(e){var t=e.touches&&e.touches[0].clientY||e.clientY;re.current=!1,Pe({dragging:!0,mouseTop:t})},Ct=function(){Pe({dragging:!1})},Rt=function(e){var t=e.changedTouches[0].clientY;re.current=t!==Ie.mouseTop,e.preventDefault()},kt=(gt=Q(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return He&&He.isLoggedIn||v.default.openEmailAuth("login","launchpad-ext",!0),"FOLLOW"==(t=ze?"UNFOLLOW":"FOLLOW")?te((0,T.storeFollow)()):"UNFOLLOW"===t&&te((0,T.storeUnfollow)()),e.next=5,v.default.updateUserFollow(be.id,He.id,t);case 5:n=e.sent,We(n.includes(be.id));case 7:case"end":return e.stop()}}),e,void 0)}))),function(){return gt.apply(this,arguments)}),Mt=function(){xe()};if((0,o.useEffect)((function(){var e=function(){Pe({dragging:!1})},t=function(e){re.current=e.clientY!==Ie.mouseTop};return Ie.dragging?(ht&&window.addEventListener("mousemove",t),window.addEventListener("mouseup",e)):(ht&&window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e)),function(){ht&&window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e)}}),[Ie.dragging,Ie.mouseTop,Pe,ht]),!ce)return a.default.createElement(o.Fragment,null);var Lt,At=(Lt=(0,z.default)(),a.default.createElement("div",{className:et.containerLoader},a.default.createElement(c.ContainerLoader,{loadingImage:"https://cdn.honey.io/images/tips/coiny_happy_scientist_beakers_transparent.gif",loadingPhrases:Lt,marqueeDelay:2e3}))),Nt=ee?!!He&&!_e&&a.default.createElement(h.StoreFollowUI,{inPopover:!1,store:be,storeFollowButton:a.default.createElement("div",{className:et.followBtnOverrides},a.default.createElement(g.default,{allowTooltip:!1,isFollowing:ze,isHeaderButton:!0,store:{storeId:be.id,storeName:be.name},storeSessionCount:Ke,subSrc:"launchpad",updateUserFollow:kt,user:He}))}):null,Dt=a.default.createElement(o.Fragment,null,Nt,0!==Te.length?Te.map((function(e,t){var n=Pt&&t===Te.length-1,r=Pt?"1px":"0px";return a.default.createElement(V.default,{isFullyExpandedPdp:s,key:""+e,tipInstanceId:e,fullScreenTipInstanceId:Ze},a.default.createElement("div",{key:e,style:{marginBottom:n?r:"8px"}},a.default.createElement(G.default,null,a.default.createElement("div",{ref:function(t){t&&ut(vt[e],t)}},a.default.createElement(R.default,{hideCaret:!0,isSecondary:t>0,tipInstanceId:e,templateType:"card",scrollToCard:it,scrollToTop:st})))))})):At),jt=Ze&&a.default.createElement("div",{style:{minHeight:oe.current}},Ze?a.default.createElement(V.default,{key:""+Ze,tipInstanceId:Ze},a.default.createElement(R.default,{tipInstanceId:Ze,templateType:"fullscreen"})):a.default.createElement(c.LoaderGroup,null))||null,Ft=a.default.createElement(G.default,null,a.default.createElement(f.default,{id:It,open:_t.isOpen,onClose:xt,onTransitionEnd:function(){_t.isOpen||te((0,T.resetBottomSheet)())}},a.default.createElement(R.default,{tipInstanceId:_t.tipInstanceId,templateType:"bottomSheet"}))),Ut=se?a.default.createElement(Z,null):!_e&&!Ze&&Dt||null,Gt=_e&&a.default.createElement("div",{style:{minHeight:oe.current}},a.default.createElement(H.default,null))||null,Bt=i&&a.default.createElement("div",{style:{position:"absolute",left:10,top:-5,zIndex:1}},a.default.createElement(O.default,null))||null,Ht=a.default.createElement(_.NotificationBanner,{show:Ne,copy:De,color:je,ctaAction:Fe,ctaCopy:Ue,onClose:function(){return te((0,T.resetNotificationBanner)())},src:"UniversalContainer-ConnectedMovableContainer",short:!0,stackAbove:!0,zIndex:3}),$t=t?a.default.createElement(U.default,{dragging:Ie.dragging,dragged:re,onMouseDown:Tt,onMouseUp:Ct,onTouchMove:Rt,snoozed:Je,openContainer:function(e){ht&&Pe({dragging:!1}),te((0,X.default)(e))&&ot(e),ve()},onTeaserCTAClick:function(e){return te((0,X.default)(e))&&ot(e)},closeContainer:he,isStaticContainer:ht,isMiniTeaser:n,isTeaser:K,notificationBadge:Bt}):a.default.createElement(F.default,{dragging:Ie.dragging,dragged:re,onMouseDown:Tt,onMouseUp:Ct,onTouchMove:Rt,snoozed:Je,openContainer:ve,closeContainer:he}),Vt=Te.length>0?$t:null,qt=Me?Vt:$t;return a.default.createElement(P.default.Provider,{value:{isScrolling:ct,isBadge:!0}},a.default.createElement(N.default,{position:Ie,isContainerOpen:pe,dragging:Ie.dragging,onInjectionError:function(e){te((0,T.sdataTipBadgeInjectionError)(e))},isStaticContainer:ht,container:a.default.createElement("div",{onMouseOver:ht?function(){}:ve,onMouseLeave:ht?function(){}:function(){Ze&&Ze.split(":")[1].includes("DL")?he(8e3):he()},ref:function(e){return e&&e.firstChild&&e.firstChild.firstChild&&e.firstChild.firstChild.firstChild&&e.firstChild.firstChild.firstChild.firstChild&&2===e.firstChild.firstChild.firstChild.firstChild.childNodes.length&&lt.push(e.firstChild.firstChild.firstChild.firstChild.childNodes[1]),ae},style:{}},a.default.createElement(Y.default,{show:pe&&!Je,onVisible:function(){if(rt&&"string"==typeof rt&&!rt.includes("Main")){var e=te((0,T.getTipByTipInstanceId)(rt)).categoryId;it(e)}}},a.default.createElement(c.UniversalContainer,{open:pe&&!Je},a.default.createElement(c.UniversalContainerLayout,{ref:{refContent:ne},header:a.default.createElement(E.default,{leftContainer:a.default.createElement((function(){return _e?a.default.createElement("span",{onClick:Mt},a.default.createElement(x.default,null)):Ze?a.default.createElement("span",{onClick:mt(!1)},a.default.createElement(x.default,null)):a.default.createElement(S.default,null)}),null),middleContainer:a.default.createElement((function(){return Ze?a.default.createElement("span",{className:et.middleHeader},d.default.getMessage("Droplist")):null}),null),rightContainer:a.default.createElement($.default,{onClick:function(){te((0,T.tipContainerActionsClose)())},onSettingsClick:function(){}})}),footer:Pt&&a.default.createElement(j.default,{isContainerOpen:pe})},se&&At,Ht,jt,Ut,Gt,Ft)))),badge:qt,startBadgeAnimation:ft}))};ee.propTypes={isMini:i.default.bool,isLaunchpad:i.default.bool,isMiniTeaser:i.default.bool,isNotification:i.default.bool,isFullyExpandedPdp:i.default.bool,isTeaser:i.default.bool},ee.defaultProps={isMini:!1,isLaunchpad:!1,isMiniTeaser:!1,isNotification:!1,isFullyExpandedPdp:!1,isTeaser:!1},t.default=ee},2569:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=h(a),u=n(304),s=h(n(1)),c=h(n(2570)),l=h(n(942)),f=h(n(2572)),d=h(n(2573)),p=h(n(878)),v=h(n(2574));function h(e){return e&&e.__esModule?e:{default:e}}var g=void 0,y={transition:"opacity 500ms ease-in-out",opacity:1},m={transition:"opacity 0ms ease-in-out",opacity:0},b={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}},w={entering:{transform:"translateX(57px)"},entered:{transform:"translateX(0px)"},exiting:{transform:"translateX(0px)"},exited:{transform:"translateX(57px)"}},E={transition:"transform 200ms ease-in-out",transform:"translateX(57px)"},_=function(e){var t=e.container,n=e.position,s=e.badge,h=e.isContainerOpen,_=e.dragging,x=e.isStaticContainer,S=e.startBadgeAnimation,O=(0,p.default)(),I=O.movableBadgeSettings,P=O.movableBadgeDefaults,T="bottomRight"===(I&&I.orientation||P&&P.orientation),C=(0,d.default)(T),R=o(C,2),k=R[0],M=R[1],L=i.default.createRef(),A=(0,a.useState)(),N=o(A,2),D=N[0],j=N[1],F=(0,a.useState)(!1),U=o(F,2),G=U[0],B=U[1],H=(0,a.useState)(!1),$=o(H,2),V=$[0],q=$[1],z=(0,a.useState)(!1),W=o(z,2),Y=W[0],X=W[1],K=(0,a.useState)(!1),Q=o(K,2),J=Q[0],Z=Q[1],ee=(0,a.useState)(!1),te=o(ee,2),ne=te[0],re=te[1];if((0,a.useEffect)((function(){var e=void 0;return h&&!_?x?X(!0):e=setTimeout((function(){q(!0)}),400):x?X(!1):q(!1),function(){e&&clearTimeout(e)}}),[h,_,x]),(0,a.useEffect)((function(){var e=document.createElement("div");document.body.appendChild(e),j(e)}),[]),(0,a.useEffect)((function(){var e=setInterval((function(){var e=L&&L.current&&L.current.getBoundingClientRect();k?e&&e.y<16?B(!0):B(!1):e&&e.bottom-16>window.innerHeight-16?B(!0):B(!1)}),10);return function(){clearInterval(e)}})),!D)return i.default.createElement(a.Fragment,null);var oe=i.default.createElement(u.Transition,{appear:!0,exit:!1,onEntered:function(){g=!0},onEntering:function(){return setTimeout(S,200)},in:!h&&s,timeout:200},(function(e){return i.default.createElement("div",{style:r({},E,w[e])},s)})),ae=i.default.createElement(u.Transition,{enter:!1,in:!h,timeout:500,onEntered:function(){re(!0)},onExiting:function(){re(!1)}},(function(e){return i.default.createElement("div",{style:r({},y,b[e],{visibility:J?"hidden":"visible"})},s)})),ie=(!x&&V||x&&Y)&&G;return i.default.createElement(a.Fragment,null,i.default.createElement(f.default,{outsideDomNode:D},i.default.createElement("div",{style:{position:"fixed",top:k?16:"unset",bottom:k?"unset":0,zIndex:"2147483647",right:"16px",display:ie?"flex":"none"}},t)),i.default.createElement(c.default,{isStaticContainer:x,setIsBottom:M,isBottom:k,position:n,ref:L},i.default.createElement("div",{style:{display:"flex",flexDirection:k?"column-reverse":"column"}},!x&&s,x&&(g?ae:oe),i.default.createElement("div",{style:{opacity:!x&&!V||x&&!Y||G?0:1,visibility:!x&&!V||x&&!Y||G?"hidden":"visible",zIndex:2,position:"relative",top:k?"unset":16,bottom:k?16:"unset",right:"16px"}},!x&&t))),x&&i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Transition,{in:h,timeout:500,exit:!1,onEntered:function(){Z(!0)},onExited:function(){Z(!1)}},(function(e){return i.default.createElement("div",{style:r({position:"fixed",top:73,zIndex:"2147483647",right:360,display:"flex"},m,b[e],{visibility:ne?"hidden":"visible"})},i.default.createElement(v.default,null))})),i.default.createElement(l.default,{container:t,badge:s})))};t.default=_,_.propTypes={isContainerOpen:s.default.bool.isRequired,position:s.default.object,container:s.default.node,badge:s.default.node,dragging:s.default.bool,isStaticContainer:s.default.bool,startBadgeAnimation:s.default.func},_.defaultProps={position:{},container:void 0,badge:void 0,dragging:!0,isStaticContainer:!1,startBadgeAnimation:function(){}}},2570:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=c(o),i=c(n(1)),u=c(n(2571)),s=c(n(878));function c(e){return e&&e.__esModule?e:{default:e}}var l=a.default.forwardRef((function(e,t){var n=e.position,i=e.isBottom,c=e.setIsBottom,l=e.children,f=(0,o.useRef)(!1),d=(0,o.useState)(),p=r(d,2),v=p[0],h=p[1],g=(0,s.default)(),y=g.movableBadgeSettings,m=g.updateBadgeSettings,b=g.movableBadgeDefaults,w=n.dragging,E=n.mouseTop,_=y&&y.top||b&&b.top||16,x=y&&y.bottom||b&&b.bottom||0,S=(0,o.useState)({top:_,bottom:x}),O=r(S,2),I=O[0],P=O[1],T=(0,o.useState)({diff:0}),C=r(T,2),R=C[0],k=C[1],M=(window.innerHeight-56-16)/2;(0,o.useEffect)((function(){var e=(0,u.default)((function(){var e=i?window.innerHeight-I.bottom-16-56>=M:I.top>=M;i?(P({top:window.innerHeight-I.bottom-16-56,bottom:I.bottom}),e&&c(!1)):e&&(P({top:I.top,bottom:window.innerHeight-I.top-16-56}),c(!0))}),500);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[I.top,I.bottom,i,c,M]),(0,o.useEffect)((function(){var e=function(e){if(w){var t=void 0;if(i){var n=e.changedTouches&&e.changedTouches[0].clientY||e.clientY,r=window.innerHeight-n-(window.innerHeight-E),o=r+I.bottom;t=o>=16?o+56<=window.innerHeight-16?r:window.innerHeight-56-I.bottom-16:-1*I.bottom+16}else{var a=(e.changedTouches&&e.changedTouches[0].clientY||e.clientY)-E,u=a+I.top;t=u>=16?u+56<=window.innerHeight-16?a:window.innerHeight-56-I.top-16:-1*I.top+16}k({diff:t})}},t=function(t){e(t),t.preventDefault()};if(w)window.addEventListener("mousemove",e),window.addEventListener("touchmove",t);else{window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",t);var n=i?I.bottom+R.diff:I.top+R.diff,r=n!==v;h(n);var o=i?window.innerHeight-n-56-16:n,a=i?n:window.innerHeight-n-56-16,u=i?window.innerHeight-a-16-56>=M:o>=M;c(u),P({top:o,bottom:a}),f.current!==w&&m({top:o,bottom:a,orientation:u?"bottomRight":"topRight",sendSdata:r}),k({diff:0})}return f.current!==w&&(f.current=w),function(){window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",t)}}),[w,I.top,I.bottom,R.diff,E,c,m,i,M]);var L=i?-1*R.diff:R.diff;return a.default.createElement("div",{style:{position:"fixed",top:i?"unset":I.top,bottom:i?I.bottom:"unset",right:"0px",transform:"translate(0px, "+L+"px)",zIndex:2147483647},ref:t},l)}));t.default=l,l.propTypes={isBottom:i.default.bool,setIsBottom:i.default.func,children:i.default.any,position:i.default.object},l.defaultProps={isBottom:!1,setIsBottom:function(){},children:void 0,position:{}}},2571:function(e,t,n){var r=n(494),o=n(148);e.exports=function(e,t,n){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:a,maxWait:t,trailing:i})}},2572:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=p(o),i=p(n(1)),u=p(n(46)),s=n(2),c=p(n(135)),l=n(30),f=p(n(21)),d=n(1336);function p(e){return e&&e.__esModule?e:{default:e}}var v=(0,c.default)().plugins,h=function(e){var t=e.children;return a.default.createElement("div",{id:"honey"},a.default.createElement("link",{rel:"stylesheet",href:"https://cdn.honey.io/css/honey-font.min.css?v2"}),t)};h.propTypes={children:i.default.any},h.defaultProps={children:void 0};t.default=function(e){var t=e.outsideDomNode,n=e.children,i=(0,o.useState)(),c=r(i,2),p=c[0],g=c[1],y=(0,o.useState)(),m=r(y,2),b=m[0],w=m[1],E=(0,o.useState)(),_=r(E,2),x=_[0],S=_[1],O=(0,o.useState)(),I=r(O,2),P=I[0],T=I[1];if((0,o.useEffect)((function(){var e=document.createElement("div");w(e)}),[]),(0,o.useEffect)((function(){if(b){var e=!!b.attachShadow&&"function attachShadow() { [native code] }"===b.attachShadow.toString(),t=e?b.attachShadow({mode:"closed"}):b;e&&(0,f.default)(b).data("_honeyShadowRoot",t),g(t)}}),[b]),(0,o.useEffect)((function(){return t&&b&&t.appendChild(b),function(){t&&b&&t.removeChild(b)}}),[t,b]),(0,o.useEffect)((function(){}),[p]),(0,o.useEffect)((function(){if(p){var e=new s.SheetsRegistry;S(e);var t=(0,l.create)();t.setup({plugins:v,insertionPoint:p.querySelector("#honey")}),T(t)}}),[p]),p&&P&&x){var C=a.default.createElement(s.JssProvider,{jss:P},n);return u.default.createPortal(a.default.createElement(h,null,a.default.createElement(d.Provider,{value:{shadowContainer:b}},C)),p)}return p?u.default.createPortal(a.default.createElement(h,null),p):a.default.createElement(o.Fragment,null)}},2573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,r.useState)(e)};var r=n(0)},2574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(415)),a=n(6),i=n(19);function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=(0,a.useDispatch)();return r.default.createElement("div",{style:{cursor:"pointer "},onMouseUp:function(){e((0,i.tipContainerActionsClose)())}},r.default.createElement(o.default,null))}},2575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.useState)({mouseTop:0,dragging:!1})};var r=n(0)},2576:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=M(o),i=M(n(1)),u=n(6),s=n(3),c=M(n(897)),l=M(n(1220)),f=M(n(1221)),d=M(n(1222)),p=M(n(1219)),v=M(n(499)),h=M(n(1217)),g=M(n(1235)),y=M(n(1233)),m=M(n(39)),b=M(n(4)),w=M(n(14)),E=M(n(101)),_=M(n(1204)),x=n(890),S=n(497),O=n(215),I=M(n(1337)),P=M(n(885)),T=n(19),C=n(882),R=n(1338),k=M(R);function M(e){return e&&e.__esModule?e:{default:e}}function L(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var A={openContainer:i.default.func,closeContainer:i.default.func,snoozed:i.default.bool,dragging:i.default.bool,dragged:i.default.object,onMouseDown:i.default.func,onMouseUp:i.default.func,onTouchMove:i.default.func,isStaticContainer:i.default.bool},N=function(e){var t=e.openContainer,n=e.closeContainer,i=e.onMouseDown,M=e.dragging,A=e.dragged,N=e.isStaticContainer,D=(0,o.createRef)(),j=(0,u.useDispatch)(),F=(0,o.useState)(),U=r(F,2),G=U[0],B=U[1],H=(0,o.useState)(),$=r(H,2),V=$[0],q=$[1],z=(0,o.useState)(!1),W=r(z,2),Y=W[0],X=W[1],K=(0,k.default)({isStaticContainer:N}),Q=r(K,2),J=Q[0],Z=Q[1],ee=(0,o.useState)(!1),te=r(ee,2),ne=te[0],re=te[1],oe=(0,o.useState)("https://www.joinhoney.com/settings/feature-settings"),ae=r(oe,2),ie=ae[0],ue=ae[1],se=(0,o.useState)(!1),ce=r(se,2),le=ce[0],fe=ce[1],de=(0,o.useState)(""),pe=r(de,2),ve=pe[0],he=pe[1],ge=(0,O.useContainerState)(),ye=r(ge,3)[2],me=(0,o.useState)(!1),be=r(me,2),we=be[0],Ee=be[1],_e=(0,I.default)(),xe=_e.shouldShowTooltip,Se=_e.forceHideTooltip,Oe=_e.startClickBadgeTooltip,Ie=_e.endClickBadgeTooltip,Pe=(0,P.default)({isStaticContainer:N}).shouldShowToolTip,Te=(0,_.default)().id,Ce=(0,S.useTip)(Te),Re=r(Ce,1)[0].badge,ke=void 0===Re?{}:Re,Me=ke.title,Le=ke.subtitle,Ae=(0,x.useCategoryData)(Te),Ne=r(Ae,1)[0],De=function(){var e=(0,o.useState)(!1),t=r(e,2),n=t[0],a=t[1],i=(0,o.useState)(!1),u=r(i,2),s=u[0],c=u[1],l=(0,o.useRef)(!1);return[n,function(){n||a(!0),c(!0),clearTimeout(l.current)},function(){s&&(c(!1),l.current=setTimeout((function(){a(!1)}),600))}]}(),je=r(De,3),Fe=je[0],Ue=je[1],Ge=je[2],Be=Fe&&!M;(0,o.useEffect)((function(){M||fe(!1)}),[M]),(0,o.useEffect)((function(){var e=setInterval((function(){var e=D&&D.current&&D.current.getBoundingClientRect();(e?e.y+e.height/2:0)>=window.innerHeight/2?Ee(!0):Ee(!1)}),10);return function(){clearInterval(e)}})),(0,o.useEffect)((function(){j((0,T.badgeShown)())}),[j]),(0,o.useEffect)((function(){var e;(e=L(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getTipsConfig();case 2:t=e.sent,n=t.badgeTooltipText,he(n||a.default.createElement("div",{style:{width:"176px"}},a.default.createElement("div",{style:{fontSize:"12px",lineHeight:"16px"}},b.default.getMessage("New_Shop_smarter_with_Honey_Tips_Badge_blocking_your_view_Just_drag_it_up_or_down"),a.default.createElement("div",null,a.default.createElement("img",{style:{width:"100%"},src:"https://cdn.honey.io/images/tips/movable-badge-example.gif",alt:"Gif of example"})))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,o.useEffect)((function(){var e;(e=L(regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getTipsConfig();case 2:return t=e.sent,n=t.hasExtraSnoozeSettings,r=void 0!==n&&n,o=t.links,a=void 0===o?{}:o,e.next=9,w.default.getInfo();case 9:i=e.sent,u=i.isLoggedIn,s=void 0!==u&&u,r&&X(!0),re(s),ue(a.featureSettings||ie);case 15:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[ie]);var He=function(){N&&Oe(),G||e.dragging||(m.default.updateSetting("movable_badge:first_time_hovered","true"),j((0,T.badgeHover)()),t(),B(!0))},$e=function(){if(!A.current){if(V)return n(),void q(!1);Se(),m.default.updateSetting("movable_badge:first_time_clicked","true"),j((0,T.badgeClick)()),t(),q(!0)}};if((0,o.useEffect)((function(){xe&&ye&&j((0,T.clickBadgeTooltipShown)())}),[j,xe,ye]),(0,o.useEffect)((function(){if(null!==Z&&N){var t=Z.event;t===R.hoverOrClickEvents.MOUSEUP?($e(),e.onMouseUp()):t===R.hoverOrClickEvents.MOUSEOVER&&He()}}),[Z]),e.snoozed)return a.default.createElement(o.Fragment,null);var Ve=function(t){e.onMouseUp(t),$e(),t.preventDefault()},qe=a.default.createElement("span",null,b.default.getMessageAndReplace("NOTIPS_for_this_item",{NOTIPS:a.default.createElement("b",null,b.default.getMessage("No_tips"))})),ze=M&&le?"Click to pin this badge":("function"==typeof Me?Me(Ne):Me)||qe,We=M&&le?"Move your cursor to position":("function"==typeof Le?Le(Ne):Le)||b.default.getMessage("But_were_working_on_it"),Ye=[{copy:"Reposition this",key:"reposition_this",onClick:function(e){fe(!0),i(e),j((0,T.setClickMove)())}},{copy:b.default.getMessage("Snooze_for_24_hours"),key:"snooze_24",onClick:function(){j((0,T.setBadgeSnoozeOneDay)())}}],Xe=ne?{copy:b.default.getMessage("Go_to_settings"),key:"go_to_settings",onClick:function(){j((0,C.setBadgeSnoozeAllLoggedIn)()),window.open(ie)}}:{copy:b.default.getMessage("Dont_show_on_any_store"),key:"snooze_all",onClick:function(){j((0,T.setBadgeSnoozeAll)())}};Y&&Ye.push({copy:b.default.getMessage("Dont_show_on_this_site"),key:"snooze_store",onClick:function(){j((0,T.setBadgeSnoozeOneStore)())}},Xe);var Ke=-10-24*Ye.length,Qe=we?Ke+"px":"64px";if(e.snoozed)return a.default.createElement(o.Fragment,null);var Je=b.default.getMessage("Droplist_this_item"),Ze=b.default.getMessage("Get_price_drop_alerts");return a.default.createElement("div",{ref:D},a.default.createElement(y.default,{showDropDown:Be,settingsOptions:Ye,onMouseOver:Ue,onMouseLeave:Ge,offset:Qe},a.default.createElement(g.default,null,a.default.createElement("div",{style:{position:"relative",top:"-0px"}},Pe&&a.default.createElement(c.default,{copy:ve})),ye&&!Pe&&xe&&a.default.createElement("div",{style:{position:"relative",top:"-0px"}},a.default.createElement(c.default,{copy:b.default.getMessage("Click_the_Honey_button_to_reveal_our_deal_insights_for_this_store")})),a.default.createElement("div",{ref:J},a.default.createElement(l.default,{onFocus:function(){},onMouseOver:N?function(){}:He,onMouseLeave:function(){Ie(),N&&n(),B(!1)},onTouchStart:N?function(t){e.onMouseDown(t),t.preventDefault()}:function(){},onTouchEnd:N?Ve:function(){},onTouchCancel:N?Ve:function(){},onTouchMove:N?e.onTouchMove:function(){},onMouseDown:e.onMouseDown},a.default.createElement(f.default,null,a.default.createElement(s.Icon,{icon:"honey-18",color:s.Colors.white})),a.default.createElement(d.default,{firstLine:ye?ze:Je,secondLine:ye?We:Ze}))),a.default.createElement(p.default,{onMouseOver:Ue,onMouseLeave:Ge,onClick:function(){j((0,T.setBadgeSnooze)())}},a.default.createElement(v.default,null)),a.default.createElement(h.default,null))))};N.propTypes=A,N.defaultProps={dragging:!1,dragged:{},onMouseDown:function(){},onMouseUp:function(){},onTouchMove:function(){},openContainer:function(){},closeContainer:function(){},snoozed:!1,isStaticContainer:!1},t.default=N},2577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=D(o),i=D(n(1)),u=n(6),s=n(2),c=D(n(4)),l=D(n(101)),f=n(3),d=D(n(897)),p=D(n(895)),v=D(n(896)),h=D(n(39)),g=D(n(415)),y=n(890),m=D(n(234)),b=n(497),w=n(215),E=D(n(1206)),_=D(n(1168)),x=D(n(885)),S=n(410),O=n(62),I=D(n(1337)),P=D(n(524)),T=D(n(152)),C=n(420),R=D(n(2578)),k=n(413),M=D(n(2579)),L=n(1338),A=D(L),N=n(25);function D(e){return e&&e.__esModule?e:{default:e}}function j(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var F={isMiniTeaser:i.default.bool.isRequired,openContainer:i.default.func,closeContainer:i.default.func,isStaticContainer:i.default.bool,isTeaser:i.default.bool,snoozed:i.default.bool,dragging:i.default.bool,dragged:i.default.object,onMouseDown:i.default.func,onMouseUp:i.default.func,onTeaserCTAClick:i.default.func,onTouchMove:i.default.func,notificationBadge:i.default.node},U=(0,s.createUseStyles)({root:{width:"100%",display:"flex",justifyContent:"flex-end",userSelect:"none",border:"none",margin:0,padding:0,background:"transparent"},loader:{width:"128px",height:"9px",display:"inline-block",background:"linear-gradient(92.25deg, #E6E6E6 2.21%, rgba(238, 238, 238, 0) 107.89%)",borderRadius:"1px"},container:function(e){var t=e.showMovableBadge;return{position:"relative",display:"flex",transition:"margin-right 300ms cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.18)",borderRadius:"5px 0px 0px 5px",alignItems:"center",cursor:e.isStaticContainer?"pointer":"move",marginRight:t?"0px":"-28px",touchAction:"none",background:f.Colors.white}},teaserAnimateIn:function(e){return{right:"1px",maxWidth:e.animateTeaserIn?"1000px":"0",transition:"max-width 800ms cubic-bezier(0.4, 0, 0.2, 1)",textAlign:"left"}}}),G=function(e){var t=e.openContainer,n=e.closeContainer,i=e.isMiniTeaser,s=e.notificationBadge,D=e.isStaticContainer,F=e.isTeaser,G=e.onTeaserCTAClick,B=(0,o.useRef)({}),H=(0,o.useRef)(!0),$=(0,u.useDispatch)(),V=(0,o.useState)(),q=r(V,2),z=q[0],W=q[1],Y=(0,A.default)({isStaticContainer:D}),X=r(Y,2),K=X[0],Q=X[1],J=(0,w.useContainerOpen)(),Z=r(J,1)[0],ee=(0,o.useState)(),te=r(ee,2),ne=te[0],re=te[1],oe=(0,o.useState)(""),ae=r(oe,2),ie=ae[0],ue=ae[1],se=(0,o.useState)(!1),ce=r(se,2),le=ce[0],fe=ce[1],de=(0,w.useContainerState)(),pe=r(de,3)[2],ve=(0,o.useState)(!1),he=r(ve,2),ge=he[0],ye=he[1],me=(0,o.useState)(!1),be=r(me,2),we=be[0],Ee=be[1],_e=(0,E.default)(),xe=(0,x.default)({isStaticContainer:D}),Se=xe.shouldShowTooltip,Oe=xe.incrementTooltipCount,Ie=xe.forceCloseTooltip,Pe=(0,I.default)(),Te=Pe.shouldShowTooltip,Ce=Pe.forceHideTooltip,Re=Pe.startClickBadgeTooltip,ke=Pe.endClickBadgeTooltip,Me=(0,m.default)(),Le=(0,T.default)(),Ae=r(Le,1)[0]!==C.TIPS_EXP_ENUM.control,Ne=U({animateTeaserIn:ge,showMovableBadge:z||e.dragging,isStaticContainer:D}),De=(0,N.useHighestRankedTipInstance)().id,je=(0,b.useTip)(De),Fe=r(je,1)[0],Ue=Fe.badge,Ge=void 0===Ue?{}:Ue,Be=Fe.teaser,He=void 0===Be?{}:Be,$e=Ge.title,Ve=Ge.subtitle,qe=He.title,ze=He.CTA,We=(0,y.useCategoryData)(De),Ye=r(We,1)[0],Xe=Me&&Me.standDown&&Me.standDownValue>2,Ke=(0,_.default)(De),Qe=r(Ke,1)[0],Je=a.default.createElement("span",null,c.default.getMessageAndReplace("NOTIPS_for_this_item",{NOTIPS:a.default.createElement("b",null,c.default.getMessage("No_tips"))})),Ze=("function"==typeof $e?$e(Ye):$e)||Je,et=("function"==typeof Ve?Ve(Ye):Ve)||c.default.getMessage("But_were_working_on_it"),tt=("function"==typeof qe?qe(Ye):qe)||Ze,nt=("function"==typeof ze?ze(Ye):ze)||et;(0,o.useEffect)((function(){return function(){H.current=!1}}),[]),(0,o.useEffect)((function(){if(_e&&s&&H.current){var e=Object.values(_e).includes("unread");Ee(e)}}),[_e]),(0,o.useEffect)((function(){!Se&&Te&&pe&&$((0,S.clickBadgeTooltipShown)())}),[$,Te,pe,Se]),(0,o.useEffect)((function(){if(pe&&Xe){var e={type:"standdown",standDownType:Me.standDown,standDownValue:Me.standDownValue};$((0,O.sdataTipBadgeTeaserSuppressedEvent)({suppressedReason:e}))}}),[Me.standDown,Me.standDownValue,Xe,pe,$]),(0,o.useEffect)((function(){var e;(e=j(regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,R.default)();case 4:if(t=e.sent,n=r(t,1),o=n[0],pe&&!Z){e.next=9;break}return e.abrupt("return");case 9:if(!le){e.next=12;break}return o&&fe(!1),e.abrupt("return");case 12:if(!F){e.next=17;break}return $((0,S.stickyTeaserShown)()),$((0,k.tipShown)(De,!0)),fe(!o),e.abrupt("return");case 17:!Xe&&Qe&&!Se&&!le&&!o&&(fe(!0),$((0,S.miniBadgeTeaserShown)()));case 19:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[pe,le,Z,Xe,Qe,Se,$,F,De]),(0,o.useEffect)((function(){var e;(e=j(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.getTipsConfig();case 2:t=e.sent,n=t.badgeTooltipText,ue(a.default.createElement("div",{style:{width:"176px"}},a.default.createElement("div",{style:{fontSize:"12px",color:f.Colors.white,lineHeight:"16px",textAlign:"left"}},n||c.default.getMessage("Check_Honey_Tips_before_you_buy_See_deal_insights_price_changes_and_add_items_to_your_Droplist"))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,o.useEffect)((function(){pe&&ye(!0)}),[pe]),(0,o.useEffect)((function(){$((0,S.badgeShown)())}),[$]),(0,o.useEffect)((function(){return pe&&!F&&(ge?B.current=setTimeout((function(){ye(!1)}),5e3):clearTimeout(B.current)),function(){clearTimeout(B.current)}}),[ge,pe,F]),(0,o.useEffect)((function(){re(D?Z:void 0)}),[Z,D]);var rt=function(){B&&B.current&&clearTimeout(B.current)},ot=(0,o.useCallback)((function(){Oe(!1),Ie()}),[Oe,Ie]),at=(0,o.useCallback)((function(n){ot(),D&&!Z&&Re(),rt(),z||e.dragging||(h.default.updateSetting("movable_badge:first_time_hovered","true"),$((0,S.badgeHover)()),t(n),W(!0))}),[ot,$,z,Z,D,t,e.dragging,Re]),it=(0,o.useCallback)((function(){ke(),e.dragging||ye(!1),!D&&n(2e3),W(!1)}),[n,ke,D,e.dragging]),ut=function(){if(clearTimeout(B.current),!e.dragged.current){if(ne)return n(D?0:null),void re(!1);ye(!1),re(!0),Ce(),requestAnimationFrame(t),$((0,S.badgeClick)()),h.default.updateSetting("movable_badge:first_time_clicked","true")}},st=function(t){e.onMouseUp(t),ut(),t.preventDefault()};if((0,o.useEffect)((function(){if(null!==Q&&D){var t=Q.event;t===L.hoverOrClickEvents.MOUSEUP?(ut(),e.onMouseUp()):t===L.hoverOrClickEvents.DELAYED_MOUSEENTER?at():t===L.hoverOrClickEvents.MOUSEENTER&&rt()}}),[Q]),e.snoozed)return a.default.createElement(o.Fragment,null);var ct=a.default.createElement("div",{className:Ne.loader}),lt=le&&pe&&De?a.default.createElement(P.default,{isTeaser:!0,onMouseOver:function(e){at(e)},onCTAClick:G,onClose:function(){return ye(!1)},tipInstanceId:De,templateType:"teaser"}):null,ft=le?a.default.createElement(v.default,{firstLine:pe?a.default.createElement("div",{style:{fontWeight:"700"}},tt):ct,secondLine:pe?a.default.createElement("div",{style:{fontWeight:"500"}},nt):ct}):null,dt=Ae?lt:ft;return a.default.createElement("button",{className:Ne.root,tabIndex:0,"aria-pressed":"false","aria-expanded":Z,onClick:at},a.default.createElement("div",{ref:K,className:Ne.container,onMouseOver:D?function(){}:at,onMouseLeave:it,onTouchStart:D?function(t){ot(),e.onMouseDown(t),t.preventDefault()}:function(){},onTouchEnd:D?st:function(){},onTouchCancel:D?st:function(){},onTouchMove:D?e.onTouchMove:function(){},onMouseDown:e.onMouseDown},pe&&Te&&a.default.createElement("div",{style:{position:"absolute",zIndex:1}},a.default.createElement(d.default,{copy:c.default.getMessage("Click_the_Honey_button_to_reveal_our_deal_insights_for_this_store")})),a.default.createElement("div",{style:{position:"absolute",zIndex:1}},Se&&a.default.createElement(d.default,{copy:ie})),we&&s,D?a.default.createElement(M.default,null):a.default.createElement(g.default,null),i&&!(D&&Z)&&a.default.createElement("div",{className:Ne.teaserAnimateIn}," ",dt," "),a.default.createElement(p.default,null)))};G.propTypes=F,G.defaultProps={dragging:!1,dragged:{},onMouseDown:function(){},onMouseUp:function(){},onTouchMove:function(){},openContainer:function(){},closeContainer:function(){},onTeaserCTAClick:function(){},isStaticContainer:!1,isTeaser:!1,snoozed:!1,notificationBadge:null},t.default=G},2578:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(174)),o=n(324),a=i(n(65));function i(e){return e&&e.__esModule?e:{default:e}}var u,s,c=void 0,l=void 0,f=void 0,d=!1,p=(u=regeneratorRuntime.mark((function e(){var t,n,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,o.getIsProductPage)()){e.next=2;break}return e.abrupt("return",[!1]);case 2:return e.next=4,(0,r.default)();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(t=e.t0,n=t.parentId,a=new URL(document.URL),i=a.pathname,u=a.search,s=void 0!==l&&l===n&&(c!==i||f!==u),!d){e.next=13;break}return e.abrupt("return",[!0]);case 13:if(!s){e.next=16;break}return d=!0,e.abrupt("return",[!0]);case 16:return c=i,f=u,l=n,e.abrupt("return",[!1]);case 20:case"end":return e.stop()}}),e,void 0)})),s=function(){var e=u.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(){return s.apply(this,arguments)});(0,a.default)("honeyTips:resetCurrent")((function(){d=!1})),(0,a.default)("honeyTips:newPage")((function(){d=!1})),(0,a.default)("honeyTips:turnOff")((function(){d=!1})),(0,a.default)("honeyTips:updateLaunchpad")((function(){d=!1})),(0,a.default)("honeyTips:updateProduct")((function(){d=!1})),t.default=p},2579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=d(a),u=d(n(1)),s=n(2),c=n(304),l=n(1339),f=d(l);function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,s.createUseStyles)({root:{display:"flex"},container:{width:"58px",height:"56px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"5px 0px 0px 5px",position:"relative",background:"linear-gradient(90deg, #FF7227 0%, #FC973B 100%)"},logoContainer:{display:"inherit"},icon:{width:"24px",height:"24px"},mask:{position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px"}}),v=function(e){var t=e.duration,n=p(),u=(0,a.useState)(!1),s=o(u,2),d=s[0],v=s[1],h=(0,a.useRef)(!0),g=(0,f.default)(),y=g.animate,m=g.endAnimation,b=l.BadgeAnimationState.END===y?0:t,w={transition:"opacity "+b+"ms ease-in-out",opacity:0},E={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}};(0,a.useEffect)((function(){(y===l.BadgeAnimationState.START||y===l.BadgeAnimationState.END&&h.current)&&(v(!0),h.current=!1)}),[y]);var _=i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:n.mask}),i.default.createElement("img",{src:"https://cdn.honey.io/images/tips/honey-24.svg",alt:"Open Honey"})),x=i.default.createElement(c.Transition,{onEntered:function(){return setTimeout(m,b)},exit:!1,in:d,timeout:b},(function(e){return i.default.createElement("div",{className:n.logoContainer,style:r({},w,E[e])},_)}));return i.default.createElement("div",{ref:h,className:n.root},i.default.createElement("div",{className:n.container},x))};v.propTypes={duration:u.default.number},v.defaultProps={duration:400},t.default=v},2580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),o=n(38),a=n(43);t.default=function(e){return function(t,n){var i=n(),u={id:i&&i.universalContainer&&i.universalContainer.currentContainerId,badgeAnimationState:e},s=(0,r.normalize)(u,o.UNIVERSAL_CONTAINER);t({type:a.BADGE_ANIMATION_STATE,data:s})}}},2581:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(158);t.default=function(e){var t=e.containerId,n=e.productId,o=e.debugProductLink,a=void 0===o?"":o;return function(e){var o=a.replace("{PRODUCT_ID}",n);window.open(o,"_blank"),e((0,r.sdataTipsDebugProductClicked)(t))}}},2582:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1340),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(){var e=(0,a.default)(),t=e.currentProduct,n=e.isDebugProductFeatureEnabled,r=e.user,o=(r&&r.email||"").endsWith("@joinhoney.com");return n&&o&&t}},2583:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){u||(u=i.loadingPhrases.map((function(e){return a.default.getMessage(e)})));return u};var r,o=n(4),a=(r=o)&&r.__esModule?r:{default:r},i=n(1166);var u=void 0},2584:function(e,t,n){"use strict";(function(t){e.exports=y;var r,o=n(2585),a=n(171),i=n(2587),u=(r="function"==typeof Symbol&&"1"!==t.env._nodeLRUCacheForceNoSymbol?function(e){return Symbol(e)}:function(e){return"_"+e})("max"),s=r("length"),c=r("lengthCalculator"),l=r("allowStale"),f=r("maxAge"),d=r("dispose"),p=r("noDisposeOnSet"),v=r("lruList"),h=r("cache");function g(){return 1}function y(e){if(!(this instanceof y))return new y(e);"number"==typeof e&&(e={max:e}),e||(e={});var t=this[u]=e.max;(!t||"number"!=typeof t||t<=0)&&(this[u]=1/0);var n=e.length||g;"function"!=typeof n&&(n=g),this[c]=n,this[l]=e.stale||!1,this[f]=e.maxAge||0,this[d]=e.dispose,this[p]=e.noDisposeOnSet||!1,this.reset()}function m(e,t,n,r){var o=n.value;w(e,o)&&(_(e,n),e[l]||(o=void 0)),o&&t.call(r,o.value,o.key,e)}function b(e,t,n){var r=e[h].get(t);if(r){var o=r.value;w(e,o)?(_(e,r),e[l]||(o=void 0)):n&&e[v].unshiftNode(r),o&&(o=o.value)}return o}function w(e,t){if(!t||!t.maxAge&&!e[f])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[f]&&n>e[f]}function E(e){if(e[s]>e[u])for(var t=e[v].tail;e[s]>e[u]&&null!==t;){var n=t.prev;_(e,t),t=n}}function _(e,t){if(t){var n=t.value;e[d]&&e[d](n.key,n.value),e[s]-=n.length,e[h].delete(n.key),e[v].removeNode(t)}}function x(e,t,n,r,o){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=o||0}Object.defineProperty(y.prototype,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),this[u]=e,E(this)},get:function(){return this[u]},enumerable:!0}),Object.defineProperty(y.prototype,"allowStale",{set:function(e){this[l]=!!e},get:function(){return this[l]},enumerable:!0}),Object.defineProperty(y.prototype,"maxAge",{set:function(e){(!e||"number"!=typeof e||e<0)&&(e=0),this[f]=e,E(this)},get:function(){return this[f]},enumerable:!0}),Object.defineProperty(y.prototype,"lengthCalculator",{set:function(e){"function"!=typeof e&&(e=g),e!==this[c]&&(this[c]=e,this[s]=0,this[v].forEach((function(e){e.length=this[c](e.value,e.key),this[s]+=e.length}),this)),E(this)},get:function(){return this[c]},enumerable:!0}),Object.defineProperty(y.prototype,"length",{get:function(){return this[s]},enumerable:!0}),Object.defineProperty(y.prototype,"itemCount",{get:function(){return this[v].length},enumerable:!0}),y.prototype.rforEach=function(e,t){t=t||this;for(var n=this[v].tail;null!==n;){var r=n.prev;m(this,e,n,t),n=r}},y.prototype.forEach=function(e,t){t=t||this;for(var n=this[v].head;null!==n;){var r=n.next;m(this,e,n,t),n=r}},y.prototype.keys=function(){return this[v].toArray().map((function(e){return e.key}),this)},y.prototype.values=function(){return this[v].toArray().map((function(e){return e.value}),this)},y.prototype.reset=function(){this[d]&&this[v]&&this[v].length&&this[v].forEach((function(e){this[d](e.key,e.value)}),this),this[h]=new o,this[v]=new i,this[s]=0},y.prototype.dump=function(){return this[v].map((function(e){if(!w(this,e))return{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}}),this).toArray().filter((function(e){return e}))},y.prototype.dumpLru=function(){return this[v]},y.prototype.inspect=function(e,t){var n="LRUCache {",r=!1;this[l]&&(n+="\n  allowStale: true",r=!0);var o=this[u];o&&o!==1/0&&(r&&(n+=","),n+="\n  max: "+a.inspect(o,t),r=!0);var i=this[f];i&&(r&&(n+=","),n+="\n  maxAge: "+a.inspect(i,t),r=!0);var d=this[c];d&&d!==g&&(r&&(n+=","),n+="\n  length: "+a.inspect(this[s],t),r=!0);var p=!1;return this[v].forEach((function(e){p?n+=",\n  ":(r&&(n+=",\n"),p=!0,n+="\n  ");var o=a.inspect(e.key).split("\n").join("\n  "),u={value:e.value};e.maxAge!==i&&(u.maxAge=e.maxAge),d!==g&&(u.length=e.length),w(this,e)&&(u.stale=!0),u=a.inspect(u,t).split("\n").join("\n  "),n+=o+" => "+u})),(p||r)&&(n+="\n"),n+="}"},y.prototype.set=function(e,t,n){var r=(n=n||this[f])?Date.now():0,o=this[c](t,e);if(this[h].has(e)){if(o>this[u])return _(this,this[h].get(e)),!1;var a=this[h].get(e).value;return this[d]&&(this[p]||this[d](e,a.value)),a.now=r,a.maxAge=n,a.value=t,this[s]+=o-a.length,a.length=o,this.get(e),E(this),!0}var i=new x(e,t,o,r,n);return i.length>this[u]?(this[d]&&this[d](e,t),!1):(this[s]+=i.length,this[v].unshift(i),this[h].set(e,this[v].head),E(this),!0)},y.prototype.has=function(e){return!!this[h].has(e)&&!w(this,this[h].get(e).value)},y.prototype.get=function(e){return b(this,e,!0)},y.prototype.peek=function(e){return b(this,e,!1)},y.prototype.pop=function(){var e=this[v].tail;return e?(_(this,e),e.value):null},y.prototype.del=function(e){_(this,this[h].get(e))},y.prototype.load=function(e){this.reset();for(var t=Date.now(),n=e.length-1;n>=0;n--){var r=e[n],o=r.e||0;if(0===o)this.set(r.k,r.v);else{var a=o-t;a>0&&this.set(r.k,r.v,a)}}},y.prototype.prune=function(){var e=this;this[h].forEach((function(t,n){b(e,n,!1)}))}}).call(this,n(123))},2585:function(e,t,n){(function(t){"pseudomap"===t.env.npm_package_name&&"test"===t.env.npm_lifecycle_script&&(t.env.TEST_PSEUDOMAP="true"),"function"!=typeof Map||t.env.TEST_PSEUDOMAP?e.exports=n(2586):e.exports=Map}).call(this,n(123))},2586:function(e,t){var n=Object.prototype.hasOwnProperty;function r(e){if(!(this instanceof r))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),e)if(e instanceof r||"function"==typeof Map&&e instanceof Map)e.forEach((function(e,t){this.set(t,e)}),this);else{if(!Array.isArray(e))throw new TypeError("invalid argument");e.forEach((function(e){this.set(e[0],e[1])}),this)}}function o(e,t){return e===t||e!=e&&t!=t}function a(e,t,n){this.key=e,this.value=t,this._index=n}function i(e,t){for(var r=0,a="_"+t,i=a;n.call(e,i);i=a+r++)if(o(e[i].key,t))return e[i]}e.exports=r,r.prototype.forEach=function(e,t){t=t||this,Object.keys(this._data).forEach((function(n){"size"!==n&&e.call(t,this._data[n].value,this._data[n].key)}),this)},r.prototype.has=function(e){return!!i(this._data,e)},r.prototype.get=function(e){var t=i(this._data,e);return t&&t.value},r.prototype.set=function(e,t){!function(e,t,r){for(var i=0,u="_"+t,s=u;n.call(e,s);s=u+i++)if(o(e[s].key,t))return void(e[s].value=r);e.size++,e[s]=new a(t,r,s)}(this._data,e,t)},r.prototype.delete=function(e){var t=i(this._data,e);t&&(delete this._data[t._index],this._data.size--)},r.prototype.clear=function(){var e=Object.create(null);e.size=0,Object.defineProperty(this,"_data",{value:e,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(r.prototype,"size",{get:function(){return this._data.size},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.values=r.prototype.keys=r.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},2587:function(e,t){function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)t.push(arguments[r]);return t}function r(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function o(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,n,r){if(!(this instanceof a))return new a(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)r(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},n.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},n.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,o=this.head;null!==o;)r.push(e.call(t,o.value,this)),o=o.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,o=this.tail;null!==o;)r.push(e.call(t,o.value,this)),o=o.prev;return r},n.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var o=0;null!==r;o++)n=e(n,r.value,o),r=r.next;return n},n.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var o=this.length-1;null!==r;o--)n=e(n,r.value,o),r=r.prev;return n},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,a=this.head;null!==a&&o<e;o++)a=a.next;for(;null!==a&&o<t;o++,a=a.next)r.push(a.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,a=this.tail;null!==a&&o>t;o--)a=a.prev;for(;null!==a&&o>e;o--,a=a.prev)r.push(a.value);return r},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this}},2588:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=u(r),a=u(n(1)),i=u(n(2589));function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.children,n=e.show,a=e.onVisible,u=void 0===a?function(){}:a,s=(0,i.default)(),c=s.isVisible,l=s.ref;return(0,r.useEffect)((function(){c&&setTimeout(u,1e3)}),[c]),n?o.default.createElement("div",{ref:l}," ",t):null};s.propTypes={show:a.default.bool,onVisible:a.default.func.isRequired,children:a.default.node},s.defaultProps={show:!1,children:null},t.default=s},2589:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0px",t=(0,o.useState)(!1),n=r(t,2),a=n[0],i=n[1],u=(0,o.createRef)();return(0,o.useEffect)((function(){var t=new IntersectionObserver((function(e){var t=r(e,1)[0];i(1===t.intersectionRatio)}),{rootMargin:e}),n=u.current;return n&&t.observe(n),function(){return n&&t.unobserve(n)}}),[u]),{isVisible:a,ref:u}}},2590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=new Set(["StoreSavings"]);t.default=function(e){return function(t,n){if("string"!=typeof e)return!1;var a=((0,r.selectTipByTipInstanceId)(e)(n())||{}).categoryId;return!o.has(a)}}},2591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=X(o),i=n(6),u=n(2),s=X(n(1)),c=n(47),l=X(n(2592)),f=X(n(901)),d=X(n(4)),p=X(n(7)),v=X(n(9)),h=X(n(39)),g=X(n(42)),y=X(n(14)),m=n(238),b=X(n(300)),w=X(n(130)),E=X(n(504)),_=n(3),x=n(108),S=X(n(498)),O=X(n(501)),I=n(16),P=n(19),T=X(n(20)),C=n(215),R=X(n(524)),k=X(n(327)),M=X(n(234)),L=X(n(1210)),A=X(n(1341)),N=X(n(942)),D=X(n(521)),j=X(n(943)),F=X(n(1342)),U=X(n(496)),G=n(25),B=X(n(893)),H=X(n(892)),$=X(n(944)),V=X(n(945)),q=X(n(946)),z=X(n(2594)),W=X(n(2595)),Y=X(n(187));function X(e){return e&&e.__esModule?e:{default:e}}function K(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var Q=(0,u.createUseStyles)({middleHeader:{composes:"title1",color:_.Colors.grey900},contentLoading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},seeMore:{marginTop:"1px"},seeDealSummary:{borderTop:"1px solid "+T.default.grey300}}),J=function(){var e=Q();return a.default.createElement("div",{className:e.contentLoading},a.default.createElement(_.LoadingIcon,null))},Z=function(e){var t=e.isFullyExpandedPdp,n=e.isLaunchpad,u=e.isMiniEngagement,s=(0,i.useDispatch)(),T=(0,o.useRef)(),X=(0,o.useRef)(),Z=(0,o.useState)(!1),ee=r(Z,2),te=ee[0],ne=ee[1],re=(0,o.useState)(!1),oe=r(re,2),ae=oe[0],ie=oe[1],ue=(0,C.useContainerState)(),se=r(ue,1)[0],ce=(0,C.useContainerOpen)(),le=r(ce,2),fe=le[0],de=le[1],pe=(0,U.default)(),ve=r(pe,3),he=ve[0],ge=ve[2],ye=(0,C.useHasMainTip)(),me=(0,k.default)()||[],be=(0,G.useShowMoreTips)(),we=(0,i.useSelector)((0,I.selectCategoryIdsByTipInstanceIds)(me)),Ee=(0,G.useHighestRankedTipInstance)(),_e=Ee.id,xe=Ee.categoryId,Se=n||be?me:[_e],Oe=(0,L.default)(),Ie=(0,B.default)(),Pe=Ie.showBanner,Te=void 0!==Pe&&Pe,Ce=Ie.copy,Re=Ie.color,ke=Ie.ctaAction,Me=Ie.ctaCopy,Le=(0,o.useState)(),Ae=r(Le,2),Ne=Ae[0],De=Ae[1],je=(0,o.useState)(!1),Fe=r(je,2),Ue=Fe[0],Ge=Fe[1],Be=(0,o.useState)(0),He=r(Be,2),$e=He[0],Ve=He[1],qe=(0,H.default)(),ze=(0,G.useTipInstanceFullscreen)(qe),We=r(ze,2)[1],Ye=(0,G.useBottomSheet)(),Xe=r(Ye,2),Ke=Xe[0],Qe=void 0===Ke?{}:Ke,Je=Xe[1],Ze=(0,G.useTipInstanceBottomSheet)(Qe.tipInstanceId),et=r(Ze,1)[0],tt=void 0===et?"":et,nt=(0,M.default)()||{},rt=w.default.AMAZON_STORES.includes(nt.id),ot=Q(),at=(0,o.useRef)(!0),it=(0,o.useRef)(!0);(0,o.useEffect)((function(){n&&K(regeneratorRuntime.mark((function e(){var t,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!nt.id){e.next=11;break}return e.next=3,Promise.all([y.default.getInfo(),y.default.getUserFollow(),y.default.getStoreSessionCount(nt.id)]);case 3:t=e.sent,n=r(t,3),o=n[0],a=n[1],i=n[2],De(o),Ge(a.includes(nt.id)),Ve(i);case 11:case"end":return e.stop()}}),e,void 0)})))()}),[nt.id,nt.storeIcon,n]),(0,o.useEffect)((function(){p.default.addListener("honeyTips:tips",(function(e,t){var n=t.action,r=t.closePromptShown;n!==g.default.RESET_TEASER_CLOSED_WITHOUT_CTA_COUNT_DONE||r||ie(!0)}))}),[]),(0,o.useEffect)((function(){if(at.current&&!se){if(n){var e=g.default.INCREMENT_LAUNCHPAD_TIP_SHOWN_BY_STORE,t=nt&&nt.id,r={background:!0};it.current&&K(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return it.current=!1,n.next=3,p.default.send("honeyTips:tips",{action:e,storeId:t},r);case 3:case"end":return n.stop()}}),n,void 0)})))()}de()}at.current=!1}),[se,de,fe,n,nt]);var ut,st,ct,lt,ft=(ut=K(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.send("honeyTips:tips",{action:g.default.SET_TEASER_CLOSED_PROMPT_SHOWN},{background:!0});case 2:s((0,P.promptShown)());case 3:case"end":return e.stop()}}),e,void 0)}))),function(){return ut.apply(this,arguments)}),dt=(st=K(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.isNoAutopopPrompt)();case 2:if(e.t0=e.sent,e.t0){e.next=7;break}return e.next=6,(0,x.isNoAutopopSuppression)();case 6:e.t0=e.sent;case 7:if(!e.t0){e.next=11;break}return v.default.debug("honeyTips:connectedTeaserContainer: bypassed showing prompt, isNoAutopopPromptVariant is true"),e.abrupt("return",!1);case 11:return e.abrupt("return",p.default.send("honeyTips:tips",{action:g.default.GET_TEASER_CLOSED_SHOULD_SHOW_PROMPT},{background:!0}));case 12:case"end":return e.stop()}}),e,void 0)}))),function(){return st.apply(this,arguments)}),pt=(ct=K(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=4;break}return v.default.debug("honeyTips:connectedTeaserContainer: closed teaser in non-prompt variant"),s((0,P.closeTeaser)()),e.abrupt("return");case 4:return v.default.debug("honeyTips:connectedTeaserContainer: closed teaser in prompt variant"),ae||p.default.send("honeyTips:tips",{action:g.default.INCREMENT_TEASER_CLOSED_WITHOUT_CTA_COUNT},{background:!0}),e.next=8,dt();case 8:e.sent&&!te?(ne(!0),ft(),p.default.send("honeyTips:tips",{action:g.default.RESET_TEASER_CLOSED_WITHOUT_CTA_COUNT,closePromptShown:!0},{background:!0}),s((0,P.closeTeaserSdataOnly)())):s(te?(0,P.closePrompt)():(0,P.closeTeaser)());case 10:case"end":return e.stop()}}),e,void 0)}))),function(){return ct.apply(this,arguments)}),vt=(lt=K(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ne&&Ne.isLoggedIn||y.default.openEmailAuth("login","launchpad-ext",!0),"FOLLOW"==(t=Ue?"UNFOLLOW":"FOLLOW")?s((0,P.storeFollow)()):"UNFOLLOW"===t&&s((0,P.storeUnfollow)()),e.next=5,y.default.updateUserFollow(nt.id,Ne.id,t);case 5:n=e.sent,Ge(n.includes(nt.id));case 7:case"end":return e.stop()}}),e,void 0)}))),function(){return lt.apply(this,arguments)});(0,o.useEffect)((function(){void 0!==Oe&&Oe&&s((0,P.updateShowMoreTips)({showMoreTips:!0}))}),[Oe]);var ht=(0,A.default)(T),gt=ht.scrollToCategory,yt=ht.addTipRef,mt=ht.scrollToTop,bt=function(e){be||s((0,P.updateShowMoreTips)({showMoreTips:!0})),setTimeout((function(){gt(e)}),500)},wt=function(){ge()},Et=se&&a.default.createElement(c.LoaderGroup,null)||null,_t=n?!!Ne&&!he&&a.default.createElement(m.StoreFollowUI,{inPopover:!1,store:nt,storeFollowButton:a.default.createElement("div",{className:ot.followBtnOverrides},a.default.createElement(b.default,{allowTooltip:!1,isFollowing:Ue,isHeaderButton:!0,store:{storeId:nt.id,storeName:nt.name},storeSessionCount:$e,subSrc:"launchpad",updateUserFollow:vt,user:Ne}))}):null,xt=a.default.createElement(o.Fragment,null,_t,0!==Se.length&&Se.map((function(e,r){var o=!be&&!n||rt&&r===Se.length-1,i=rt?"1px":"0px";return a.default.createElement(q.default,{isFullyExpandedPdp:t,key:""+e,tipInstanceId:e},a.default.createElement("div",{key:e,style:{marginBottom:o?i:"8px"}},a.default.createElement(j.default,null,a.default.createElement("div",{ref:function(t){t&&yt(we[e],t)}},a.default.createElement(R.default,{isTeaser:!0,hideCaret:!0,isSecondary:r>0,tipInstanceId:e,templateType:"card",scrollToTop:mt,scrollToCard:bt})))))})));te&&(xt=a.default.createElement(z.default,{onClosePromptConfirm:function(){s((0,P.closePromptConfirm)())},onClosePromptDisable:function(){h.default.updateSetting("autopopsDisabled",!0),s((0,P.closePromptDisable)())}}));var St=qe&&a.default.createElement("div",{style:{minHeight:X.current}},qe?a.default.createElement(q.default,{key:""+qe,tipInstanceId:qe},a.default.createElement(R.default,{tipInstanceId:qe,templateType:"fullscreen"})):a.default.createElement(F.default,{yOffset:"45%"}))||null,Ot=se?a.default.createElement(J,null):!he&&!qe&&xt||null,It=he&&a.default.createElement("div",{style:{minHeight:X.current}},a.default.createElement($.default,null))||null,Pt=a.default.createElement(j.default,null,a.default.createElement(f.default,{id:tt,open:Qe.isOpen,onClose:Je,onTransitionEnd:function(){Qe.isOpen||s((0,P.resetBottomSheet)())}},a.default.createElement(R.default,{tipInstanceId:Qe.tipInstanceId,templateType:"bottomSheet"}))),Tt=a.default.createElement(_.NotificationBanner,{show:Te,copy:Ce,color:Re,ctaAction:ke,ctaCopy:Me,onClose:function(){return s((0,P.resetNotificationBanner)())},src:"UniversalContainer-ConnectedTeaserContainer",short:!0,stackAbove:!0,zIndex:3}),Ct=a.default.createElement(D.default,{isContainerOpen:fe}),Rt=!te&&!be&&!n&&me.length>1,kt=a.default.createElement("div",{className:ot.seeMore},a.default.createElement(W.default,{onClick:function(){return s((0,P.updateShowMoreTips)({showMoreTips:!be}))}})),Mt=a.default.createElement("div",{className:ot.seeDealSummary},a.default.createElement(l.default,{onClick:function(){s((0,P.updateShowMoreTips)({showMoreTips:!be})),s((0,P.clickSeeMoreTips)())}})),Lt=ye&&"Main"!==xe,At=Lt?{flexBasis:0}:{},Nt=rt?Ct:Rt?Lt?Mt:kt:"";return a.default.createElement(Y.default.Provider,null,a.default.createElement(N.default,{container:a.default.createElement("div",{style:{marginBottom:"16px "}},a.default.createElement(c.UniversalContainer,{open:fe},a.default.createElement(c.UniversalContainerLayout,{ref:{refContent:T},styles:{footer:At},header:a.default.createElement(E.default,{leftContainer:a.default.createElement((function(){return he?a.default.createElement("span",{onClick:wt},a.default.createElement(S.default,null)):qe?a.default.createElement("span",{onClick:We(!1)},a.default.createElement(S.default,null)):a.default.createElement(O.default,null)}),null),middleContainer:a.default.createElement((function(){return qe?a.default.createElement("span",{className:ot.middleHeader},d.default.getMessage("Droplist")):null}),null),rightContainer:a.default.createElement(V.default,{onClick:pt})}),footer:Nt},Et,Tt,St,Ot,It,Pt)))}))};Z.propTypes={isFullyExpandedPdp:s.default.bool,isLaunchpad:s.default.bool,isMiniEngagement:s.default.bool},Z.defaultProps={isFullyExpandedPdp:!1,isLaunchpad:!1,isMiniEngagement:!1},t.default=Z},2592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DealSummaryNavigationButton=t.DealSummartNavigationDirection=t.DealSummartNavigationButtonTypes=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=s(n(0)),a=s(n(1)),i=s(n(2593)),u=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=t.DealSummartNavigationButtonTypes={ROUND:"round",STANDARD:"standard"},l=t.DealSummartNavigationDirection={UP:"up-line-16",DOWN:"down-line-16",RIGHT:"right-line-16",LEFT:"left-line-16"},f={rootRound:{maxWidth:200,borderRadius:100,padding:"9px 27px",boxShadow:"0px 6px 12px rgba(0, 0, 0, 0.08)"},text:{composes:"title0"}},d=function(e){var t=e.type,n=e.direction,a=e.copy,u=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["type","direction","copy"]);return t===c.ROUND?o.default.createElement(i.default,r({text:a,classes:{root:f.rootRound},icon:n},u)):o.default.createElement(i.default,r({text:a,classes:{text:f.text},icon:n},u))};t.DealSummaryNavigationButton=d,d.propTypes={type:a.default.oneOf(Object.values(c)),copy:a.default.oneOfType([a.default.node,a.default.string]),direction:a.default.oneOf(Object.values(l))},d.defaultProps={type:c.STANDARD,copy:u.default.getMessage("See_deal_summary"),direction:l.RIGHT},t.default=d},2593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NavigationButton=void 0;var r=s(n(0)),o=s(n(1)),a=n(2),i=n(3),u=s(n(41));function s(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,a.createUseStyles)({root:function(e){var t=e.background,n=e.classes;return d({display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",padding:9,border:"none",width:"100%"},(void 0===n?{}:n).root||{},{background:t})},text:function(e){var t=e.classes,n=void 0===t?{}:t;return d({paddingRight:6,fontSize:10,fontWeight:600,color:i.Colors.grey600},n.text||{},{verticalAlign:"middle"})}}),h=function(e){var t,n=e.text,o=(e.classes,e.icon),a=e.children,s=l(e,["text","classes","icon","children"]),f=v(e);t=a?"string"==typeof a?r.default.createElement("div",{className:f.text}," ",a," "):a:"string"==typeof n?r.default.createElement("div",{className:f.text}," ",n," "):n;var d="string"==typeof o?r.default.createElement(u.default,{color:i.Colors.grey500,icon:o}):o;return r.default.createElement("button",c({tabIndex:0,"aria-label":"honey-tips-navigation-button",className:f.root},s),t,d)};t.NavigationButton=h,h.propTypes={text:o.default.oneOfType([o.default.string,o.default.node]),icon:o.default.oneOfType([o.default.string,o.default.node]),background:o.default.string,classes:o.default.object,children:o.default.oneOfType([o.default.string,o.default.node])},h.defaultProps={text:null,icon:null,background:"white",classes:{},children:null};var g=h;t.default=g},2594:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(0)),o=c(n(4)),a=c(n(1)),i=n(2),u=n(47),s=n(3);function c(e){return e&&e.__esModule?e:{default:e}}var l=(0,i.createUseStyles)({container:{margin:"24px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center"},title:{composes:"title3",marginBottom:"8px"},description:{fontSize:"14px",marginBottom:"16px"},hideText:{composes:"link3",color:s.Colors.grey600,marginTop:"16px",cursor:"pointer"}}),f=function(e){var t=e.onClosePromptConfirm,n=e.onClosePromptDisable,a=l();return r.default.createElement(u.Card,null,r.default.createElement("div",{className:a.container},r.default.createElement("div",{className:a.title},o.default.getMessage("Want_to_stay_in_the_know")),r.default.createElement("div",{className:a.description},o.default.getMessage("These_Honey_Tips_are_realtime_deal_alerts_Even_if_you_hide_alerts_you_can_still_find_them_by_clicking_the_Honey_icon_on_the_right")),r.default.createElement(s.Button,{id:"TIPS:TeaserClosePrompt",size:40,buttonType:"secondary",copy:o.default.getMessage("Yes_Keep_Showing_Me_Tips"),isFlexible:!0,onClick:t}),r.default.createElement("div",{className:a.hideText,onClick:n},o.default.getMessage("No_Hide_Tip_Alerts"))))};f.propTypes={onClosePromptConfirm:a.default.func.isRequired,onClosePromptDisable:a.default.func.isRequired},t.default=f},2595:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(0)),o=c(n(1)),a=n(6),i=c(n(4)),u=c(n(1213)),s=n(413);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.onClick,n=(0,a.useDispatch)();return r.default.createElement(u.default,{body:i.default.getMessage("View_More_Tips"),onClick:function(){n((0,s.clickSeeMoreTips)()),t(!0)}})};l.propTypes={onClick:o.default.func},l.defaultProps={onClick:null},t.default=l},2596:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=N(o),i=n(6),u=n(2),s=n(47),c=N(n(4)),l=N(n(7)),f=N(n(130)),d=N(n(42)),p=n(238),v=N(n(300)),h=N(n(14)),g=N(n(504)),y=n(3),m=N(n(498)),b=N(n(501)),w=n(19),E=n(215),_=N(n(524)),x=N(n(327)),S=N(n(234)),O=N(n(942)),I=N(n(521)),P=N(n(943)),T=N(n(1342)),C=N(n(496)),R=n(1205),k=N(n(892)),M=N(n(944)),L=N(n(945)),A=N(n(946));function N(e){return e&&e.__esModule?e:{default:e}}function D(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var j=(0,u.createUseStyles)({middleHeader:{composes:"title1",color:y.Colors.grey900},contentLoading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},launchpadHeader:{borderBottom:"1px solid",borderBottomColor:y.Colors.grey50}}),F=function(){var e=j();return a.default.createElement("div",{className:e.contentLoading},a.default.createElement(y.LoadingIcon,null))},U=function(){var e=(0,i.useDispatch)(),t=j(),n=(0,o.useRef)(),u=(0,o.useRef)(),y=(0,o.useState)(!0),N=r(y,1)[0],U=(0,E.useContainerState)(),G=r(U,2),B=G[0],H=G[1],$=(0,E.useContainerOpen)(),V=r($,2),q=V[0],z=V[1],W=(0,C.default)(),Y=r(W,3),X=Y[0],K=Y[1],Q=Y[2],J=(0,x.default)()||[],Z=J.slice(0,4),ee=(0,k.default)(),te=(0,R.useTipInstanceFullscreen)(ee),ne=r(te,2)[1],re=(0,S.default)()||{},oe=f.default.AMAZON_STORES.includes(re.id),ae=(0,o.useState)(),ie=r(ae,2),ue=ie[0],se=ie[1],ce=(0,o.useState)(!1),le=r(ce,2),fe=le[0],de=le[1],pe=(0,o.useState)(!1),ve=r(pe,2),he=ve[0],ge=ve[1],ye=(0,o.useState)(0),me=r(ye,2),be=me[0],we=me[1],Ee=(0,o.useRef)(!0);(0,o.useEffect)((function(){D(regeneratorRuntime.mark((function e(){var t,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!re.id){e.next=11;break}return e.next=3,Promise.all([h.default.getInfo(),h.default.getUserFollow(),h.default.getStoreSessionCount(re.id)]);case 3:t=e.sent,n=r(t,3),o=n[0],a=n[1],i=n[2],se(o),de(a.includes(re.id)),we(i);case 11:case"end":return e.stop()}}),e,void 0)})))()}),[re.id,re.storeIcon]),(0,o.useEffect)((function(){J&&J.length>0&&(he||ge(!0))}),[J,he]),(0,o.useEffect)((function(){var e=d.default.INCREMENT_LAUNCHPAD_TIP_SHOWN_BY_STORE,t=re&&re.id,n={background:!0};t&&Ee.current&&D(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Ee.current=!1,z(),r.next=4,l.default.send("honeyTips:tips",{action:e,storeId:t},n);case 4:case"end":return r.stop()}}),r,void 0)})))()}),[re,Ee,z]);var _e,xe=(_e=D(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ue&&ue.isLoggedIn||h.default.openEmailAuth("login","launchpad-ext",!0),"FOLLOW"==(n=fe?"UNFOLLOW":"FOLLOW")?e((0,w.storeFollow)()):"UNFOLLOW"===n&&e((0,w.storeUnfollow)()),t.next=5,h.default.updateUserFollow(re.id,ue.id,n);case 5:r=t.sent,de(r.includes(re.id));case 7:case"end":return t.stop()}}),t,void 0)}))),function(){return _e.apply(this,arguments)});if(!H)return a.default.createElement(o.Fragment,null);var Se=B&&a.default.createElement(s.LoaderGroup,null)||null,Oe=a.default.createElement(o.Fragment,null,0!==Z.length&&Z.map((function(e,t){var n=!N||t===Z.length-1,r=oe?"1px":"0px";return a.default.createElement("div",{key:e,style:{marginBottom:n?r:"8px"}},a.default.createElement(P.default,null,a.default.createElement(A.default,{isFullyExpandedPdp:!0,tipInstanceId:e},a.default.createElement(_.default,{hideCaret:!0,isSecondary:t>0,tipInstanceId:e,templateType:"card"}))))}))),Ie=ee&&a.default.createElement("div",{style:{minHeight:u.current}},ee?a.default.createElement(_.default,{tipInstanceId:ee,templateType:"fullscreen"}):a.default.createElement(T.default,{yOffset:"45%"}))||null,Pe=B?a.default.createElement(F,null):!X&&!ee&&Oe||null,Te=X&&a.default.createElement("div",{style:{minHeight:u.current}},a.default.createElement(M.default,{isLaunchpad:!ee}))||null;return 0===Z.length?a.default.createElement(o.Fragment,null):a.default.createElement(O.default,{container:a.default.createElement("div",{style:{marginBottom:"16px "}},a.default.createElement(s.UniversalContainer,{open:q},a.default.createElement(s.UniversalContainerLayout,{ref:{refContent:n},header:a.default.createElement("div",null,a.default.createElement("div",{className:t.launchpadHeader},a.default.createElement(g.default,{leftContainer:a.default.createElement((function(){return X?a.default.createElement("span",{onClick:Q},a.default.createElement(m.default,null)):ee?a.default.createElement("span",{onClick:ne(!1)},a.default.createElement(m.default,null)):a.default.createElement(b.default,null)}),null),middleContainer:a.default.createElement((function(){return ee?a.default.createElement("span",{className:t.middleHeader},c.default.getMessage("Droplist")):null}),null),rightContainer:a.default.createElement(L.default,{onClick:function(){e((0,w.tipContainerActionsClose)())},showFeedback:function(){return K({tipInstanceId:null})}})})),!!ue&&!X&&a.default.createElement(p.StoreFollowUI,{inPopover:!1,store:re,storeFollowButton:a.default.createElement(v.default,{allowTooltip:!1,isFollowing:fe,isHeaderButton:!0,store:{storeId:re.id,storeName:re.name},storeSessionCount:be,subSrc:"launchpad",updateUserFollow:xe,user:ue})})),footer:oe&&a.default.createElement(I.default,{isContainerOpen:q})},Se,Ie,Pe,Te)))})};U.propTypes={},t.default=U},2597:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,r.useSelector)(o.selectCurrentContainerId),t=(0,r.useSelector)((0,a.selectUniversalContainerById)(e))||{},n=t.hasValidLaunchpadTips,i=void 0!==n&&n,u=t.hasValidLaunchpadBadgeTips,s=void 0!==u&&u;return{hasValidLaunchpadTips:i,hasValidLaunchpadBadgeTips:s}};var r=n(6),o=n(26),a=n(16)},2598:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(6),a=n(29),i=n(53),u=y(n(1209)),s=y(n(1211)),c=y(n(2599)),l=y(n(1271)),f=y(n(1272)),d=y(n(2604)),p=y(n(2607)),v=y(n(2608)),h=y(n(2609)),g=y(n(2611));function y(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e;return(0,u.default)(),(0,s.default)(),(0,h.default)(),(0,g.default)(),(0,c.default)(),(0,l.default)(),(0,f.default)(),(0,d.default)(),e=(0,o.useDispatch)(),(0,r.useEffect)((function(){e(a.storesActions.load()),e(i.userActions.load())}),[e]),(0,p.default)(),(0,v.default)(),null}},2599:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e=(0,i.useDispatch)();(0,a.useEffect)((function(){var t=(0,l.default)("honeyTips:createRelevanceRequest")((function(t){var n=Array.isArray(t)?t:[t],a=r(n,1)[0].data.stateId,i=(0,u.default)();n.forEach((function(t){return e((n=t,function(e){var t=n.fetchedData,r=n.categoryId,a=n.data;if(n.update){var i=a.stateId,u={id:i,data:v({},r,o({},t,{id:i+"_"+r,relevanceStateId:i,categoryId:r}))},c=(0,s.normalize)(u,d.RELEVANCE_STATE);e({type:f.UPDATE_RELEVANCE,data:c})}}));var n})),e((0,c.default)(a,i))}));return function(){t()}}),[e])};var a=n(0),i=n(6),u=p(n(184)),s=n(35),c=p(n(2600)),l=p(n(65)),f=n(493),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(38));function p(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},2600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=v(n(184)),a=n(35),i=n(493),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(38)),s=n(16),c=n(1268),l=n(1269),f=n(413),d=v(n(2601)),p=v(n(2602));function v(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,n){return function(r){var s=Date.now(),c=(0,o.default)(),l={id:c,result:n,relevanceRequest:t,relevanceState:{id:e,relevanceResponseId:c,result:n,updated:s},created:s},d=(0,a.normalize)(l,u.RELEVANCE_RESPONSE);r({type:i.RELEVANCE_RESPONSE,data:d}),r((0,f.setCurrentTips)(c))}},g=function(e){return t=regeneratorRuntime.mark((function t(n,o){var a,i,u,f,v,g,y,m,b,w,E;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(0,s.selectById)("relevanceRequests")(e)(o()),i=a.relevanceState,u=(0,s.selectAll)("categories")(o()),f=(0,s.selectAll)("tips")(o()),v=Object.keys(f),t.next=7,(0,d.default)(v);case 7:return g=t.sent,y=g.reduce((function(e,t){return r({},e,(n={},o=t,a=f[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n));var n,o,a}),{}),m=(0,s.selectRelevanceStateDataById)(i)(o()),b=o().universalContainer.currentContainerId,t.next=13,(0,p.default)({categoryData:m,getEligibilityFilter:c.getEligibilityFilter,getScoringFn:l.getScoringFn,entities:{categories:u,tips:y},containerId:b,dispatch:n});case 13:w=t.sent,E=w.hits,n(h(i,a,E));case 16:case"end":return t.stop()}}),t,void 0)})),n=function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e,t){return n.apply(this,arguments)};var t,n};t.default=function(e,t){return function(n,o){var c=(0,s.selectById)("relevanceStates")(e)(o()),l=c.data,f=Date.now(),d={id:t,relevanceState:r({},c,{updated:f,relevanceRequestId:t}),data:l,created:f},p=(0,a.normalize)(d,u.RELEVANCE_REQUEST);n({type:i.RELEVANCE_REQUEST,data:p}),n(g(t))}}},2601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1286)),o=a(n(1285));function a(e){return e&&e.__esModule?e:{default:e}}var i,u,s=function(e){return function(t){return e.indexOf(t)<0}},c=(i=regeneratorRuntime.mark((function e(t){var n,a,i,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.default)();case 2:return n=e.sent,a=n.honeyTipsConfiguration,i=a.blacklistTipIds,u=void 0===i?[]:i,c=t.filter(s(u)),e.next=8,(0,o.default)(c);case 8:return l=e.sent,e.abrupt("return",l);case 10:case"end":return e.stop()}}),e,void 0)})),u=function(){var e=i.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e){return u.apply(this,arguments)});t.default=c},2602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(35),a=v(n(127)),i=v(n(12)),u=v(n(490)),s=n(175),c=v(n(101)),l=n(38),f=n(43),d=v(n(2603)),p=v(n(174));function v(e){return e&&e.__esModule?e:{default:e}}function h(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var g,y,m,b=(0,s.v4)(),w=(g=h(regeneratorRuntime.mark((function e(t,n){var o,s,c,l=t.debugEvent,f=t.action;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.getCurrent();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return o=e.t0,e.next=8,(0,p.default)();case 8:if(e.t1=e.sent,e.t1){e.next=11;break}e.t1={};case 11:return s=e.t1,c=o.storeId,e.next=15,(0,a.default)({debugEvent:l,action:f},r({},n,{url:window.location.href}),r({store:{id:c},productId:s&&s.id},(0,u.default)()))();case 15:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return g.apply(this,arguments)}),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.length===t.length&&e.every((function(e,n){return e===t[n]}));n||w({debugEvent:"tips_api_mismatched_tip_ids",action:"performance_relevanceengine_gettips"},{metricId:b,apiTipIds:t,testTraditionalTipIds:e})},_=function(e){var t=e.categoryData,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["categoryData"]),o=n.Tip_id,a=r({},n,{id:o});return r({},t,{id:t.categoryId,tips:[a]})},x=function(e,t){e.forEach((function(e){var n=e.tip,r=_(n),a=(0,o.normalize)(r,l.CATEGORY);t({type:f.SET_CATEGORY,data:a})}))},S=(y=h(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.categoryData,r=t.dispatch,e.next=3,c.default.getTips(n);case 3:return o=e.sent,a=o.hits,i=void 0===a?[]:a,u=o.count,(s=void 0===u?0:u)&&x(i,r),e.abrupt("return",{hits:{hits:i,count:s}});case 7:case"end":return e.stop()}}),e,void 0)}))),function(e){return y.apply(this,arguments)}),O=(m=h(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,u,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=performance.now(),r=(0,d.default)(t),o=performance.now(),e.next=5,c.default.useAPI();case 5:if(!e.sent){e.next=18;break}return w({debugEvent:"tips_api_performance",action:"performance_relevanceengine_traditional"},{fetchDeltaMs:o-n,metricId:b}),a=performance.now(),e.next=11,S(t);case 11:return i=e.sent,u=performance.now(),w({debugEvent:"tips_api_performance",action:"performance_relevanceengine_api"},{fetchDeltaMs:u-a,metricId:b}),s=r&&r.hits&&r.hits.hits&&r.hits.hits.map((function(e){return e._id}))||[],l=i&&i.hits&&i.hits.hits&&i.hits.hits.map((function(e){return e._id}))||[],E(s,l),e.abrupt("return",i);case 18:return e.abrupt("return",(0,d.default)(t));case 19:case"end":return e.stop()}}),e,void 0)}))),function(e){return m.apply(this,arguments)});t.default=O},2603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=e.categoryData,n=void 0===t?{}:t,o=e.getEligibilityFilter,a=void 0===o?function(){}:o,s=e.getScoringFn,c=void 0===s?function(){}:s,l=e.entities,f=void 0===l?{}:l,d=e.containerId,p=e.product,v=void 0===p?{}:p,h=e.dispatch,g=void 0===h?function(){}:h,y=f.categories,m=void 0===y?{}:y,b=f.tips,w=void 0===b?{}:b,E=function(e,t,n){var r=[];for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=e[o];t[o]&&n(o)&&r.push(a)}return r}(m,n,a).map((function(e){var t=e.id,r=Object.values(w).filter((function(e){return e.categoryId===t}));if(r.length<=0)return null;var o=n[t],i=a(t)(o);return r.filter((function(e){return function(e,t){var n=!0;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=t[r],a=e[r];o!==a&&(n=!1)}return n}(e,i)}))[0]})).filter((function(e){return Boolean(e)})).map((function(e){var t=(e||{}).categoryId,o=n[t],a=c(t);return"function"!=typeof a?e:r({},e,{score:a(o,e)})})),_=E.map((function(e){return{_id:e.id,score:e.score,_source:e}})),x=E.map((function(e){return e.id}));(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e){return e}));if(!u&&t)return u=t,!0;if(t.length>0){var n=u.length===t.length&&u.every((function(t,n){return t===e[n]}));return u=t,!n}return!1})(x)&&g((0,i.default)({universalContainerId:d,debugEvent:"offers_miss_rate",action:"performance_relevanceengine_generated_tips"},{productId:v.productId,offer:null,canShowAutoPop:!1,tipCount:E.length,tipHits:_}));return{hits:{count:E.length,hits:_}}};var o,a=n(127),i=(o=a)&&o.__esModule?o:{default:o};var u=null},2604:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.useDispatch)();(0,r.useEffect)((function(){var t=(0,a.default)("honeyTips:updateVariant")((function(t){e((0,i.default)(t))}));return function(){t()}}),[e])};var r=n(0),o=n(6),a=u(n(65)),i=u(n(2605));function u(e){return e&&e.__esModule?e:{default:e}}},2605:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(12)),o=p(n(9)),a=p(n(14)),i=p(n(216)),u=p(n(2606)),s=p(n(883)),c=p(n(293)),l=n(26),f=n(16),d=n(108);function p(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return t=regeneratorRuntime.mark((function t(n,p){var v,h,g,y,m,b,w,E,_,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v=p(),h=(0,l.selectCurrentContainerId)(v),g=(0,f.selectUniversalContainerById)(h)(v)||{},y=g.relevanceStateId,m=!(0,i.default)(e),t.next=8,(0,c.default)();case 8:return b=t.sent,t.next=11,(0,d.canShowAutoPop)();case 11:return w=t.sent,t.next=14,r.default.getCurrent();case 14:return E=t.sent,_=E&&E.id,t.next=18,a.default.getInfo();case 18:x=t.sent,n((0,u.default)(y,{storeId:_,merchId:m&&e.merchId,variantId:m&&e.variantId,parentId:m&&e.merchId,productId:m&&e.id,product:m&&e,isLaunchpad:b,isAutopop:w,store:E,user:x})),n((0,s.default)({product:e})),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),o.default.error(t.t0);case 26:case"end":return t.stop()}}),t,void 0,[[0,23]])})),n=function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e,t){return n.apply(this,arguments)};var t,n}},2606:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(35),i=n(7),u=(r=i)&&r.__esModule?r:{default:r},s=n(493),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(38));t.default=function(e,t){return function(n){var r=o({},t,{stateId:e}),i=o({},t,{id:e}),l=(0,a.normalize)(i,c.RELEVANCE_STATE);return n({type:s.UPDATE_VARIANT_IN_RELEVANCE_STATE,data:l}),u.default.send("honeyTips:updateVariantInRelevanceState",r),e}}},2607:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),o=n(29),a=n(0),i=n(6);t.default=function(){var e=(0,i.useDispatch)(),t=(0,i.useSelector)(r.userSelectors.selectUser()),n=t&&t.id,u=t&&t.isLoggedIn,s=(0,i.useSelector)(o.storesSelectors.selectCurrentStore()),c=s&&s.id,l=s&&s.isDoubleGold;(0,a.useEffect)((function(){n&&c&&u&&l&&e(r.userActions.getDoubleGoldActivationsByUserId(n))}),[e,n,c,u,l])}},2608:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,a.useDispatch)();(0,o.useEffect)((function(){var t=function(t,n){"pre-open"===n.action&&e((0,s.handleUIAction)(n.pathname))};return u.default.addListener("ui:action",t),function(){u.default.removeListener("ui:action",t)}}),[e])};var r,o=n(0),a=n(6),i=n(7),u=(r=i)&&r.__esModule?r:{default:r},s=n(19)},2609:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(6),a=u(n(2610)),i=u(n(65));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=(0,o.useDispatch)();(0,r.useEffect)((function(){var t=(0,i.default)("offers:action")((function(t){var n=t.success.store,r=t.action;"offerActivated"===(void 0===r?"":r)&&e((0,a.default)(n))}));return function(){t()}}),[])}},2610:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(12)),o=i(n(7)),a=n(29);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return t=regeneratorRuntime.mark((function t(n){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,t.t0){t.next=5;break}return t.next=4,r.default.getCurrent();case 4:t.t0=t.sent;case 5:return i=t.t0,n((0,a.update)(i)),t.next=9,o.default.send("honeyTips:updateStore",i);case 9:case"end":return t.stop()}}),t,void 0)})),n=function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e){return n.apply(this,arguments)};var t,n}},2611:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,i.useDispatch)();(0,a.useEffect)((function(){var t=void 0,n=void 0,a=(0,u.default)("honeyTips:initDataFetcherFactory")((function(){t=(0,u.default)("honeyTips:createRelevanceState")((function(t){e(r.default.load(t,o.default.getAll()))})),n=(0,u.default)("honeyTips:updateVariantInRelevanceState")((function(t){e(r.default.load(t,o.default.getAll()))}))}));return function(){a(),t&&t(),n&&n()}}),[e])};var r=s(n(2612)),o=s(n(894)),a=n(0),i=n(6),u=s(n(65));function s(e){return e&&e.__esModule?e:{default:e}}},2612:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadDependencyData=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(35),i=h(n(9)),u=n(2613),s=n(132),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(38)),l=n(2614),f=n(1344),d=n(525),p=n(1343),v=h(n(2616));function h(e){return e&&e.__esModule?e:{default:e}}function g(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var y=function(e,t,n){return function(r){var i,u,s,l=(i={type:n,id:e},u=n,s=o({},t,{type:n}),u in i?Object.defineProperty(i,u,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[u]=s,i),f=(0,a.normalize)(l,c.CATEGORY_DEPENDENCY_DATA);return r({type:"CATEGORY_DEPENDENCY_DATA",data:f}),[f,l]}},m=function(e,t){return n=regeneratorRuntime.mark((function n(o){var a,c,p,h,g,m,b,w,E,_,x;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=void 0,c=v.default[e]||{},p=c.maxTimeout,h=void 0===p?s.DEFAULT_MAX_TIMEOUT:p,n.prev=2,g=v.default[e],m=g.dependsOn,b=g.dataFetcher,n.t0=m,!n.t0){n.next=8;break}return n.next=8,(0,l.waitForDependencies)(m,t.stateId,e);case 8:return n.next=10,(0,u.timeoutPromise)(o(b(t)),{maxTimeout:h}).catch();case 10:return w=n.sent,E=o(y(t.stateId,w,e)),_=r(E,2),x=_[1],n.next=14,(0,f.fireDependencyFinishedEvent)({type:e,status:s.dependencyStatus.SUCCESS,data:w,stateId:t.stateId});case 14:return n.abrupt("return",x);case 17:return n.prev=17,n.t1=n.catch(2),i.default.warn(d.LOG_PREFIX+"fetchDependencyData: Could not load dependency data for "+e),n.next=22,(0,f.fireDependencyFinishedEvent)({type:e,status:s.dependencyStatus.FAILED,data:null,stateId:t.stateId});case 22:throw n.t1;case 23:return n.prev=23,clearTimeout(a),a=void 0,n.finish(23);case 27:case"end":return n.stop()}}),n,void 0,[[2,17,23,27]])})),o=function(){var e=n.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e){return o.apply(this,arguments)};var n,o},b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return function(r){for(var o=(v.default[t]||{}).dependsOn,a=[].concat(g(void 0===o?[]:o));a.length>0;){var i=a.pop(),u=v.default[i].dependsOn,s=void 0===u?[]:u;if(n.has(i))break;r(m(i,e)),n.add(i),a=[].concat(g(s),g(a))}}},w=t.loadDependencyData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){var r=Array.from(new Set(t));i.default.debug(d.LOG_PREFIX+"loadDependencyData: Loading "+r.join(", "));var o=n((0,l.initializeDependencyListener)(e)),a=r.map((function(t){return n(m(t,e))}));return r.forEach((function(t){return n(b(e,t,new Set(r)))})),Promise.allSettled(a).then((function(t){o(),(0,p.logDependencyStatus)(e,t,!1)}))}};t.default={load:w}},2613:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutPromise=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(9),i=(r=a)&&r.__esModule?r:{default:r};var u={logger:function(e){return i.default.debug(e)},maxTimeout:5e3},s=t.timeoutPromise=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,n=o({},u,t),r=new Promise((function(e,t){var r=setTimeout((function(){clearTimeout(r);var e="honeyTips:util:timeoutPromise Timed out in "+n.maxTimeout+"ms.",o=new Error(e);t(o)}),n.maxTimeout)}));return Promise.race([e,r])};t.default={timeout:s}},2614:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.waitForDependencies=t.initializeDependencyListener=t.onFinished=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=l(n(65)),a=l(n(9)),i=n(132),u=n(1343),s=n(525),c=n(1344);function l(e){return e&&e.__esModule?e:{default:e}}var f=t.onFinished=function(e){return(0,o.default)(s.FINISHED_EVENT)(e)},d=t.initializeDependencyListener=function(e){return function(t){var n=(0,u.getCategoryDependents)(),o=(0,u.getDependenciesToProcess)();return t(function(e){var t=e.data,n=e.pendingDependencies;return function(e){var o=Object.entries(n).filter((function(e){return 0===r(e,2)[1].size})).map((function(n){var o=r(n,1)[0];return e((0,u.callDataFetcher)(o,t))}));Promise.allSettled(o).then((function(e){var t=e.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value}));(0,c.fireCreateRelevanceRequest)(t)}))}}({data:e,pendingDependencies:o})),f((function(r){var i=r.type,l=r.stateId;return t(function(e){var t=e.data,n=e.type,r=e.pendingDependencies,o=e.categoryDependents,i=e.stateId;return function(e){if(t.stateId===i){var l=o[n];for(var f in l)if(Object.prototype.hasOwnProperty.call(l,f)){var d=l[f],p=r[d];p.delete(n),0===p.size&&e((0,u.callDataFetcher)(d,t)).then(c.fireCreateRelevanceRequest).catch((function(e){a.default.warn(s.LOG_PREFIX+"callDataFetcher: "+n+": "+e)}))}}}}({data:e,type:i,stateId:l,pendingDependencies:o,categoryDependents:n}))}))}},p=t.waitForDependencies=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Promise((function(r,o){var u=new Set(e),c={},l=f((function(e){var f=e.type,d=e.data,p=e.status;if(e.stateId===t){if(u.has(f)&&(u.delete(f),c[f]=d),p===i.dependencyStatus.FAILED)return l(),void o(new Error(""+s.LOG_PREFIX+f+" failed to load"));0===u.size&&(l(),a.default.debug(s.LOG_PREFIX+"waitForDependencies: Successfully loaded dependencies for "+n),r(c))}}))}))};t.default={onFinished:f,waitFor:p,initialize:d}},2615:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=i(n(7)),a=i(n(9));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var s,c=new Map,l=function(e){var t=e.categoryId,n=e.fetchedData,r=e.data;o.default.send("honeyTips:createRelevanceRequest",[{categoryId:t,fetchedData:n,data:r,update:!0}])},f=function(e){c.has(e)&&(c.get(e)(),c.delete(e))},d=function(e,t){"function"==typeof t&&c.set(e,t)},p=(s=u(regeneratorRuntime.mark((function e(t){var n,o,i,s,c,p,v,h,g,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,o=t.dataFetcher,i=t.categoryId,s=t.dispatch,f(i),c=void 0,p=function(e){l({categoryId:i,fetchedData:e,data:n})},v=new Promise((function(e,t){c=setTimeout((function(){a.default.debug("Tips:dataFetcher:timeout for:"+i),t(new Error("Timeout"))}),y)})),h=new Promise(function(){var e=u(regeneratorRuntime.mark((function e(t,r){var u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=function(e){c?(a.default.debug("Tips:dataFetcher:resolved for:"+i),t(e)):(a.default.debug("Tips:dataFetcher:resolved late, running update for:"+i),p(e))},e.next=3,s(o(n,p,{resolve:u,reject:r}));case 3:l=e.sent,d(i,l);case 5:case"end":return e.stop()}}),e,void 0)})));return function(t,n){return e.apply(this,arguments)}}()),g=void 0,e.prev=7,e.next=10,Promise.race([v,h]).then((function(e){return{fetchedData:r({},e),categoryId:i,data:n,update:!!e}}));case 10:g=e.sent;case 11:return e.prev=11,clearTimeout(c),c=void 0,e.finish(11);case 15:return e.abrupt("return",g);case 16:case"end":return e.stop()}}),e,void 0,[[7,,11,15]])}))),function(e){return s.apply(this,arguments)});t.default={createDataFetcherPromise:p,addListener:d,cleanupListener:f,cleanupListeners:function(){c.forEach((function(e){return e()}))}}},2616:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.dependencies=void 0;var o,a=n(132),i=n(1261),u=(o=i)&&o.__esModule?o:{default:o};function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=t.dependencies=(s(r={},a.dependencyTypes.PRODUCT_CATALOG,{dataFetcher:u.default.productCatalog}),s(r,a.dependencyTypes.PRODUCT_COUPON,{dataFetcher:u.default.productCoupon}),s(r,a.dependencyTypes.OFFERS,{dataFetcher:u.default.offer}),s(r,a.dependencyTypes.DROPLIST,{dataFetcher:u.default.droplist,dependsOn:[a.dependencyTypes.PRODUCT_CATALOG]}),s(r,a.dependencyTypes.PRICE_TREND_PRODUCT,{dataFetcher:u.default.priceTrendProduct,dependsOn:[a.dependencyTypes.PRODUCT_CATALOG]}),r);t.default=c},2617:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=l(o),i=l(n(1)),u=n(6),s=l(n(9)),c=n(19);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasError:!1},n}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidCatch",value:(n=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.props.sendSdataEvent,s.default.error(t),n(t);case 3:case"end":return e.stop()}}),e,this)})),i=function(){var e=n.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?a.default.createElement(o.Fragment,null):e}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),t}(a.default.Component);f.propTypes={sendSdataEvent:i.default.func.isRequired,children:i.default.any},f.defaultProps={children:void 0};t.default=(0,u.connect)(null,(function(e){return{sendSdataEvent:function(t){return e((0,c.sdataTipBadgeInjectionError)(t))}}}))(f)},2618:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(1)),a=n(2),i=n(3);function u(e){return e&&e.__esModule?e:{default:e}}var s=(0,a.createUseStyles)({resetCss:{textTransform:"none",lineHeight:"normal",fontWeight:"normal",color:i.Colors.grey900}}),c=function(e){var t=e.children,n=s();return r.default.createElement("div",{className:n.resetCss},t)};c.propTypes={children:o.default.node},c.defaultProps={children:void 0},t.default=c},2619:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(39)),o=s(n(82)),a=s(n(1345)),i=s(n(217)),u=s(n(881));function s(e){return e&&e.__esModule?e:{default:e}}var c,l,f=(c=regeneratorRuntime.mark((function e(){var t,n,s,c,l,f,d,p,v,h,g,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.default)();case 2:return t=e.sent,n=t&&t.id,e.next=6,r.default.getSetting("hideTeaserOnTheseStores");case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0="";case 9:return s=e.t0,e.next=12,o.default.local.get(u.default.SNOOZE_ONE_DAY_EVENT).catch(NotFoundError,(function(){return!1}));case 12:return c=e.sent,l=s.split(","),f=c&&Date.now()<parseInt(c,10),d=l.includes(n),e.next=18,(0,a.default)();case 18:return p=e.sent,v=p.tipsEnabledByUser,h=!v,g=f||d||h,y=void 0,f?y="snoozed_for_day":d?y="snoozed_for_store":h&&(y="snoozed_for_all"),e.abrupt("return",{isSuppressed:g,reason:y});case 25:case"end":return e.stop()}}),e,void 0)})),l=function(){var e=c.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(){return l.apply(this,arguments)});t.default=f},2620:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(9)),o=s(n(1177)),a=s(n(293)),i=n(108),u=n(324);function s(e){return e&&e.__esModule?e:{default:e}}var c,l="honeyTips:getIsValidLaunchpadPage:";t.default=(c=regeneratorRuntime.mark((function e(){var t,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.canRunTips)({ignorePageTypeCheck:!0});case 2:if(e.sent){e.next=6;break}return r.default.debug(l+" Can't run tips"),e.abrupt("return",!1);case 6:if(t=(0,u.getIsLaunchpadPage)(),r.default.debug(l+" isLaunchpadPage: "+t),t){e.next=10;break}return e.abrupt("return",!1);case 10:return e.next=12,(0,o.default)();case 12:if(n=e.sent,r.default.debug(l+" canShowLaunchpad: "+n),n){e.next=16;break}return e.abrupt("return",!1);case 16:return e.next=18,(0,a.default)();case 18:if(s=e.sent,r.default.debug(l+" canShowLaunchpadWithBlacklist: "+s),s){e.next=22;break}return e.abrupt("return",!1);case 22:return r.default.debug(l+" returning true"),e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,this)})),function(){var e=c.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))})},2621:function(e,t,n){"use strict";var r=f(n(9)),o=f(n(7)),a=n(25),i=f(n(65)),u=f(n(1335)),s=n(1273),c=n(174),l=f(n(217));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var p,v,h={urlToPageTypeMap:{},parentId:void 0,variantId:void 0},g=function(e){var t=e.parentId,n=e.variantId;h.parentId?h.parentId&&t&&h.parentId===t?h.variantId&&n&&h.variantId!==n?(h.variantId=n,(0,c.setProduct)(e),o.default.send("honeyTips:updateVariant",e)):r.default.debug("honeyTips:pageController:same product, dont update"):(h.parentId=t,h.variantId=n,(0,c.setProduct)(e),o.default.send("honeyTips:updateProduct",e)):(h.parentId=t,h.variantId=n,r.default.debug("honeyTips:pageController:setting initial product"),(0,c.setProduct)(e))};(0,a.productFetcherListener)((p=d(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.default.debug("honeyTips:pageController:product v4"),o.default.send("pdp:debug",{eventName:"tips got hpid"},{background:!0,ignoreResponse:!0}),e.next=4,(0,l.default)();case 4:n=e.sent,a=n&&n.id,i=(0,s.formatInitialProduct)(t,a),g(i);case 8:case"end":return e.stop()}}),e,void 0)}))),function(e){return p.apply(this,arguments)})),(0,i.default)("current:product")((v=d(regeneratorRuntime.mark((function e(t){var n,a,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.default.debug("honeyTips:pageController:product v5"),o.default.send("pdp:debug",{eventName:"tips got hpid"},{background:!0,ignoreResponse:!0}),n=(t||{}).data,e.next=5,(0,l.default)();case 5:a=e.sent,i=a&&a.id,u=(0,s.formatInitialProductV5)(n,i),g(u);case 9:case"end":return e.stop()}}),e,void 0)}))),function(e){return v.apply(this,arguments)})),(0,i.default)("honeyTips:updateProduct")((function(){r.default.debug("honeyTips:pageController:updateProduct")})),(0,i.default)("honeyTips:updateVariant")((function(){r.default.debug("honeyTips:pageController:updateVariant")})),(0,i.default)("honeyTips:updateLaunchpad")((function(){r.default.debug("honeyTips:pageController:newLaunchpad")})),(0,i.default)("honeyTips:newPage")((function(){r.default.debug("honeyTips:pageController:newPage")})),(0,i.default)("honeyTips:turnOff")((function(){r.default.debug("honeyTips:pageController:turnOff")})),a.PAGE_TYPES.map((function(e){return(0,i.default)("pageDetected:"+e)((function(){!function(e){var t=e.currPageType,n=u.default.getInitialized(),r=u.default.getInitalizing(),i=new URL(document.URL);h.urlToPageTypeMap[i]||(h.urlToPageTypeMap[i]={}),h.urlToPageTypeMap[i][t]=!0;var s=Object.keys(h.urlToPageTypeMap[i]),c=s.some(a.isProductPage),f=s.some(a.isLaunchpadPage);n||r||(o.default.send("honeyTips:newPage",null),(0,l.default)()),c||f||!n||r||(o.default.send("honeyTips:turnOff",null),h.parentId=null,h.variantId=null,h.isLaunchPad=null),f&&!h.isLaunchPad&&(h.parentId=null,h.variantId=null,h.isLaunchPad=!0,o.default.send("honeyTips:updateLaunchpad",null)),c&&o.default.send("pdp:debug",{eventName:"tips waiting for hpid"},{background:!0,ignoreResponse:!0})}({currPageType:e})}))}))},2622:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=(r=S(regeneratorRuntime.mark((function e(t){var n,r,o,i,u,c,h,y,m,w,x,S,A,N,D,j,F,U;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([d.default.getCurrent(),v.default.getInfo(),v.default.getSetting("tipsEnabled"),(v.default.getUserABGroup("realTimeDroplistTip")||{}).allowNonRegisteredUsers]);case 2:if(n=e.sent,r=a(n,4),o=r[0],i=void 0===o?{}:o,u=r[1],c=void 0===u?{}:u,h=r[2],y=r[3],m=void 0===y||y,w=null,1===h&&i.metadata&&i.metadata.honeyTipsAutopopOn&&!k){e.next=15;break}return e.abrupt("return");case 15:l.default.send("pdp:debug",{eventName:"tips autopop started",storeId:i.id},{ignoreResponse:!0,background:!0}),k=!0,e.t0=i.standDown,e.next="base"===e.t0?20:"nopopup"===e.t0?21:"suspend"===e.t0?21:24;break;case 20:return e.abrupt("break",24);case 21:return l.default.send("pdp:debug",{eventName:"tips stood down",storeId:i.id},{background:!0,ignoreResponse:!0}),M=!0,e.abrupt("return");case 24:if(t!==T.BILLING){e.next=27;break}if(c.isLoggedIn){e.next=27;break}return e.abrupt("return");case 27:if(t!==T.PRODUCT){e.next=44;break}return e.next=30,(0,b.canShowAutoPop)();case 30:if(e.sent){e.next=33;break}return e.abrupt("return");case 33:return e.next=35,(0,E.default)();case 35:if(!e.sent.merchId){e.next=40;break}return e.next=39,(0,_.default)();case 39:w=e.sent;case 40:if((!0===i.metadata.droplist_universal_active||!0===i.metadata.droplist_universal_active_2||w)&&(m||c.isLoggedIn)){e.next=43;break}return l.default.send("pdp:debug",{eventName:"tips cannot autopop",isLoggedIn:c.isLoggedIn},{background:!0}),e.abrupt("return");case 43:l.default.send("pdp:debug",{eventName:"tips autopop got offer"},{background:!0});case 44:return L={creditCardOffers:void 0,lastFetchedTime:void 0,autoPopSetting:{},productId:void 0,productViewCount:void 0,userType:c.isLoggedIn?"registered":"non_registered"},e.next=47,v.default.getUserABGroup("activeHoneyTips");case 47:if(e.t2=e.sent,e.t2){e.next=50;break}e.t2={};case 50:if(e.t1=e.t2.tips,e.t1){e.next=53;break}e.t1={};case 53:if(x=e.t1,0!==Object.keys(x).length){e.next=56;break}return e.abrupt("return");case 56:e.t3=t,e.next=e.t3===T.BILLING?59:e.t3===T.PRODUCT?61:63;break;case 59:return R=x.billFixers&&x.billFixers[i.id]?P.BILL_FIXERS:null,e.abrupt("break",64);case 61:return R=x.realTimeDroplist&&x.realTimeDroplist[i.id]?P.REAL_TIME_DROPLIST:null,e.abrupt("break",64);case 63:R=null;case 64:return e.next=66,f.default.getSetting("autopop:suppression");case 66:if(e.t4=e.sent,e.t4){e.next=69;break}e.t4={};case 69:if(S=e.t4,L.autoPopSetting=S,R!==P.REAL_TIME_DROPLIST){e.next=73;break}return e.abrupt("return");case 73:if(A=(0,s.default)().unix(),"nextTimeToShowTip"in S&&!(A>S.nextTimeToShowTip)){e.next=92;break}if(R!==P.BILL_FIXERS){e.next=90;break}return e.next=78,v.default.getUserABGroup("billFixersAB");case 78:if(e.t5=e.sent,e.t5){e.next=81;break}e.t5={};case 81:return N=e.t5,D=N&&N.group,e.next=85,g.default.checkForCreditCardOffers(i,I.AUTO_POP,!0);case 85:if(0!==(j=e.sent).length){e.next=88;break}return e.abrupt("return");case 88:F=j.filter((function(e){var t=S[e.creditCardOfferId];return!t||t>0&&A>t})),"on"===D?F.length>0&&(U=Object.assign(S,{nextTimeToShowTip:A+O}),f.default.updateSetting("autopop:suppression",U),p.default.open({pathname:"/honey-tips",query:{},state:{creditCardOffers:F,lastFetchedTime:A,tipType:R,storeId:i.id,autoPopSetting:U},force:!1,feature:"honey-tips",surface:"badge"})):C(j,i.id,"control_group");case 90:e.next=100;break;case 92:if(R!==P.BILL_FIXERS){e.next=99;break}return e.next=95,g.default.checkForCreditCardOffers(i,I.AUTO_POP,!0);case 95:C(e.sent,i.id,"suppression"),e.next=100;break;case 99:l.default.send("pdp:debug",{eventName:"tips suppressed",storeId:i.id},{background:!0,ignoreResponse:!0});case 100:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),u=(o=S(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,u,v,g,m,b,E,_,x,S,O,I,T,C,k,A,N,D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.default)();case 2:if(n=e.sent,r=D.type,o=D.product,a=(o=void 0===o?{}:o).imprint,i=o.variant_id,u=o.parent_id,v=o.dealScore,g=o.imageUrl,m=o.lastPrice,b=o.canonicalUrl,E=o.storeId,_=o.title,"productFetcher"!==r||!a||!i){e.next=19;break}return e.next=9,d.default.getCurrent();case 9:return x=e.sent,S=(0,c.default)(i),L.productId=u?x.id+"_"+(0,c.default)(u)+"_"+S:x.id+"_"+S+"_"+S,O={productId:L.productId,storeId:x.id},e.next=15,l.default.send("honey-tip:smart-droplist",{action:"incrementNumTimesSeenForProduct",data:O},{background:!0});case 15:I=e.sent,L.productViewCount=I,e.next=30;break;case 19:if("catalogue"!==r){e.next=30;break}if(R===P.REAL_TIME_DROPLIST&&"number"==typeof v){e.next=22;break}return e.abrupt("return");case 22:return T=(0,s.default)().unix(),C={productId:L.productId,imageUrl:g,currentPrice:m,shopUrl:b,title:_,dealScore:v},(k=(L.autoPopSetting||{}).realTimeDroplist)||(k={product:{}},L.autoPopSetting.realTimeDroplist=k),e.next=28,y.default.getRealTimeDroplistHideReason(v,L,T,M,n);case 28:(A=e.sent)?h.default.sendEvent("droplist713",{dropListProduct:C,userType:L.userType,hideReason:A}):(N=k.count+1,k.count=N,k.product[L.productId]={timeLastSeen:T,dealScore:v},p.default.open({pathname:"/honey-tips",query:{},state:{lastFetchedTime:T,autoPopSetting:L.autoPopSetting,droplistProduct:C,storeId:E,tipType:P.REAL_TIME_DROPLIST,userType:L.userType},force:!1,feature:"honey-tips",surface:"badge"}),f.default.updateSetting("autopop:suppression",L.autoPopSetting));case 30:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),s=x(n(33)),c=x(n(427)),l=x(n(7)),f=x(n(39)),d=x(n(12)),p=x(n(23)),v=x(n(14)),h=x(n(10)),g=x(n(302)),y=x(n(2623)),m=x(n(515)),b=n(108),w=x(b),E=x(n(174)),_=x(n(326));function x(e){return e&&e.__esModule?e:{default:e}}function S(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var O=m.default.ONE_DAY_IN_SECONDS,I=m.default.SOURCES,P=m.default.TIP_TYPE,T=m.default.PAGE_TYPE;function C(e,t,n){h.default.sendEvent("tip003024",{card_offer_ids:e.map((function(e){return e.creditCardOfferId})),store:{id:t},reason_not_shown:n})}var R=void 0,k=!1,M=!1,L={creditCardOffers:void 0,lastFetchedTime:void 0,autoPopSetting:{},productId:void 0,productViewCount:void 0,userType:void 0};l.default.addListener("stores:session:started",S(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.default.getCurrent();case 2:return t=e.sent,e.abrupt("return",g.default.checkForCreditCardOffers(t));case 4:case"end":return e.stop()}}),e,void 0)})))),l.default.addListener("pageDetected:BILLING",(function(){return i(T.BILLING)})),l.default.addListener("pageDetected:PRODUCT",(function(){return i(T.PRODUCT)})),l.default.addListener("pageDetected:SHOPIFY_PRODUCT_PAGE",(function(){return i(T.PRODUCT)})),l.default.addListener("droplist:update",u),t.default={creditCardOffers:g.default}},2623:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=(r=regeneratorRuntime.mark((function e(t,n,r,o,a){var u,l,f,d,p,v,h,g,y,m,b,w,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.autoPopSetting.realTimeDroplist,l=n.productId,f=n.productViewCount,d=u.product[l]||{},e.next=4,i.default.getUserABGroup("realTimeDroplistTip");case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(p=e.t0,v=p.dailyMax,h=void 0===v?5:v,g=p.minDealScoreWithViews,y=void 0===g?5:g,m=p.minDealScoreWithoutViews,b=void 0===m?20:m,w=p.minViews,E=void 0===w?3:w,!a){e.next=11;break}return e.abrupt("return","universal_container_displayed");case 11:if(!o){e.next=13;break}return e.abrupt("return","stand_down");case 13:if(-1!==u.timeToShowNext){e.next=15;break}return e.abrupt("return","opt_out");case 15:if(!(u.timeToShowNext>r)){e.next=17;break}return e.abrupt("return","suppressed");case 17:if(u.count&&!(u.timeCountReset+s<r)){e.next=30;break}if(Object.assign(u,{count:0,timeCountReset:r}),!(d.timeLastSeen+30*s>r)){e.next=24;break}if(!(t<d.dealScore+5)){e.next=22;break}return e.abrupt("return","deal_score");case 22:e.next=28;break;case 24:if((t>=b||t>=y&&f>=E)&&t<=c){e.next=28;break}if(!(f<E&&t>=y)){e.next=27;break}return e.abrupt("return","view_count");case 27:return e.abrupt("return","deal_score");case 28:e.next=39;break;case 30:if(!(u.count>=h)){e.next=32;break}return e.abrupt("return","daily_max");case 32:if(!(d.timeLastSeen+30*s>r)){e.next=37;break}if(!(t<d.dealScore+5)){e.next=35;break}return e.abrupt("return","deal_score");case 35:e.next=39;break;case 37:if(!(t<=b||t>c)){e.next=39;break}return e.abrupt("return","deal_score");case 39:return e.abrupt("return","");case 40:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e,t,n,r,a){return o.apply(this,arguments)}),i=u(n(14));function u(e){return e&&e.__esModule?e:{default:e}}var s=u(n(515)).default.ONE_DAY_IN_SECONDS,c=75;t.default={getRealTimeDroplistHideReason:a}},2624:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(19);function o(){this.installed=!1,this.onUnloadFired=!1}o.prototype.install=function(){var e=this,t=function(t){e.onUnloadFired||(e.onUnloadFired=!0,(0,r.sdataTipsDebug)({debugEvent:"offers_miss_rate",action:"performance_user_unload"},t)())},n=Symbol("OffersPerformance");Object.defineProperty(t,"fnId",{get:function(){return n},configurable:!0}),"function"==typeof window.onunload&&window.onunload.fnId&&window.onunload.fnId===n||(window.onunload=t),"function"==typeof window.onbeforeunload&&window.onbeforeunload.fnId&&window.onbeforeunload.fnId===n||(window.onbeforeunload=t)},o.prototype.uninstall=function(){window.onunload=null,window.onbeforeunload=null};var a=new o;t.default=a},2625:function(e,t,n){"use strict";var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=(r=regeneratorRuntime.mark((function e(){var t,n,r,o,u,s,p,v,y,m,b,w,E,_,x,S,O,I,P,T,C,R,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([l.default.getCurrent(),c.default.getUserABGroup("pdpPopupEngine")]);case 2:return t=e.sent,n=i(t,2),r=n[0],o=void 0===r?{}:r,u=n[1],p=(s=void 0===u?{}:u).group,v=s.targetPlatform,y=s.targetMinVersion,m=s.targetMaxVersion,e.next=11,l.default.getPdpRegex(o.id);case 11:return b=e.sent,w="control"===p,E="ch"===v,_=g("13.11.0",y,m),x=0,e.next=18,d.default.local.get("HoneyPdpPopup:hide:"+o.id).then((function(e){e&&Date.now()-e.time<e.days?x=1:d.default.local.del("HoneyPdpPopup:hide:"+o.id)})).catch(NotFoundError,(function(){}));case 18:if(S=window.location.href,O=!1,!(b&&Array.isArray(b)&&b.length)){e.next=50;break}I=!0,P=!1,T=void 0,e.prev=24,C=b[Symbol.iterator]();case 26:if(I=(R=C.next()).done){e.next=34;break}if(k=R.value,!(O=h(k,S))){e.next=31;break}return e.abrupt("break",34);case 31:I=!0,e.next=26;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(24),P=!0,T=e.t0;case 40:e.prev=40,e.prev=41,!I&&C.return&&C.return();case 43:if(e.prev=43,!P){e.next=46;break}throw T;case 46:return e.finish(43);case 47:return e.finish(40);case 48:e.next=55;break;case 50:if("string"!=typeof b||!b.trim().length){e.next=54;break}O=h(b,S),e.next=55;break;case 54:return e.abrupt("return");case 55:!w&&O&&!x&&E&&_&&f.default.open({pathname:"/honey-pdp-popup",query:{},state:a({},s,{storeId:o.id}),force:!1,feature:"honey-pdp-popup",surface:"popup"});case 56:case"end":return e.stop()}}),e,this,[[24,36,40,48],[41,,43,47]])})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(){return o.apply(this,arguments)}),s=v(n(7)),c=v(n(14)),l=v(n(12)),f=v(n(23)),d=v(n(82)),p=v(n(2626));function v(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return"All PDP"===e||!!t.match(e)}function g(e,t,n){if(n&&t&&e){var r=t+" - "+n;return p.default.satisfies(e,r)}return!1}s.default.addListener("pageDetected:PRODUCT",(function(){u()})),s.default.addListener("pageDetected:SHOPIFY_PRODUCT_PAGE",(function(){u()}))},2626:function(e,t,n){const r=n(335);e.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n(526).SEMVER_SPEC_VERSION,SemVer:n(128),compareIdentifiers:n(947).compareIdentifiers,rcompareIdentifiers:n(947).rcompareIdentifiers,parse:n(336),valid:n(2627),clean:n(2628),inc:n(2629),diff:n(2630),major:n(2631),minor:n(2632),patch:n(2633),prerelease:n(2634),compare:n(223),rcompare:n(2635),compareLoose:n(2636),compareBuild:n(949),sort:n(2637),rsort:n(2638),gt:n(528),lt:n(950),eq:n(948),neq:n(1346),gte:n(951),lte:n(952),cmp:n(1347),coerce:n(2639),Comparator:n(953),Range:n(190),satisfies:n(1348),toComparators:n(2640),maxSatisfying:n(2641),minSatisfying:n(2642),minVersion:n(2643),validRange:n(2644),outside:n(954),gtr:n(2645),ltr:n(2646),intersects:n(2647)}},2627:function(e,t,n){const r=n(336);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},2628:function(e,t,n){const r=n(336);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},2629:function(e,t,n){const r=n(128);e.exports=(e,t,n,o)=>{"string"==typeof n&&(o=n,n=void 0);try{return new r(e,n).inc(t,o).version}catch(e){return null}}},2630:function(e,t,n){const r=n(336),o=n(948);e.exports=(e,t)=>{if(o(e,t))return null;{const n=r(e),o=r(t),a=n.prerelease.length||o.prerelease.length,i=a?"pre":"",u=a?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==o[e])return i+e;return u}}},2631:function(e,t,n){const r=n(128);e.exports=(e,t)=>new r(e,t).major},2632:function(e,t,n){const r=n(128);e.exports=(e,t)=>new r(e,t).minor},2633:function(e,t,n){const r=n(128);e.exports=(e,t)=>new r(e,t).patch},2634:function(e,t,n){const r=n(336);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},2635:function(e,t,n){const r=n(223);e.exports=(e,t,n)=>r(t,e,n)},2636:function(e,t,n){const r=n(223);e.exports=(e,t)=>r(e,t,!0)},2637:function(e,t,n){const r=n(949);e.exports=(e,t)=>e.sort((e,n)=>r(e,n,t))},2638:function(e,t,n){const r=n(949);e.exports=(e,t)=>e.sort((e,n)=>r(n,e,t))},2639:function(e,t,n){const r=n(128),o=n(336),{re:a,t:i}=n(335);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=a[i.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),a[i.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;a[i.COERCERTL].lastIndex=-1}else n=e.match(a[i.COERCE]);return null===n?null:o(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)}},2640:function(e,t,n){const r=n(190);e.exports=(e,t)=>new r(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},2641:function(e,t,n){const r=n(128),o=n(190);e.exports=(e,t,n)=>{let a=null,i=null,u=null;try{u=new o(t,n)}catch(e){return null}return e.forEach(e=>{u.test(e)&&(a&&-1!==i.compare(e)||(a=e,i=new r(a,n)))}),a}},2642:function(e,t,n){const r=n(128),o=n(190);e.exports=(e,t,n)=>{let a=null,i=null,u=null;try{u=new o(t,n)}catch(e){return null}return e.forEach(e=>{u.test(e)&&(a&&1!==i.compare(e)||(a=e,i=new r(a,n)))}),a}},2643:function(e,t,n){const r=n(128),o=n(190),a=n(528);e.exports=(e,t)=>{e=new o(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){e.set[t].forEach(e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!a(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})}return n&&e.test(n)?n:null}},2644:function(e,t,n){const r=n(190);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}},2645:function(e,t,n){const r=n(954);e.exports=(e,t,n)=>r(e,t,">",n)},2646:function(e,t,n){const r=n(954);e.exports=(e,t,n)=>r(e,t,"<",n)},2647:function(e,t,n){const r=n(190);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t))},2650:function(e,t,n){"use strict";var r;n.r(t);var o=new Uint8Array(16);function a(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(e){return"string"==typeof e&&i.test(e)},s=[],c=0;c<256;++c)s.push((c+256).toString(16).substr(1));var l,f,d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!u(n))throw TypeError("Stringified UUID is invalid");return n},p=0,v=0;var h=function(e,t,n){var r=t&&n||0,o=t||new Array(16),i=(e=e||{}).node||l,u=void 0!==e.clockseq?e.clockseq:f;if(null==i||null==u){var s=e.random||(e.rng||a)();null==i&&(i=l=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==u&&(u=f=16383&(s[6]<<8|s[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:v+1,g=c-p+(h-v)/1e4;if(g<0&&void 0===e.clockseq&&(u=u+1&16383),(g<0||c>p)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=c,v=h,f=u;var y=(1e4*(268435455&(c+=122192928e5))+h)%4294967296;o[r++]=y>>>24&255,o[r++]=y>>>16&255,o[r++]=y>>>8&255,o[r++]=255&y;var m=c/4294967296*1e4&268435455;o[r++]=m>>>8&255,o[r++]=255&m,o[r++]=m>>>24&15|16,o[r++]=m>>>16&255,o[r++]=u>>>8|128,o[r++]=255&u;for(var b=0;b<6;++b)o[r+b]=i[b];return t||d(o)};var g=function(e){if(!u(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};var y=function(e,t,n){function r(e,r,o,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=g(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var i=new Uint8Array(16+e.length);if(i.set(r),i.set(e,r.length),(i=n(i))[6]=15&i[6]|t,i[8]=63&i[8]|128,o){a=a||0;for(var u=0;u<16;++u)o[a+u]=i[u];return o}return d(i)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r};function m(e){return 14+(e+64>>>9<<4)+1}function b(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function w(e,t,n,r,o,a){return b((i=b(b(t,e),b(r,a)))<<(u=o)|i>>>32-u,n);var i,u}function E(e,t,n,r,o,a,i){return w(t&n|~t&r,e,t,o,a,i)}function _(e,t,n,r,o,a,i){return w(t&r|n&~r,e,t,o,a,i)}function x(e,t,n,r,o,a,i){return w(t^n^r,e,t,o,a,i)}function S(e,t,n,r,o,a,i){return w(n^(t|~r),e,t,o,a,i)}var O=y("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r=0;r<n;r+=8){var o=e[r>>5]>>>r%32&255,a=parseInt("0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[m(t)-1]=t;for(var n=1732584193,r=-271733879,o=-1732584194,a=271733878,i=0;i<e.length;i+=16){var u=n,s=r,c=o,l=a;n=E(n,r,o,a,e[i],7,-680876936),a=E(a,n,r,o,e[i+1],12,-389564586),o=E(o,a,n,r,e[i+2],17,606105819),r=E(r,o,a,n,e[i+3],22,-1044525330),n=E(n,r,o,a,e[i+4],7,-176418897),a=E(a,n,r,o,e[i+5],12,1200080426),o=E(o,a,n,r,e[i+6],17,-1473231341),r=E(r,o,a,n,e[i+7],22,-45705983),n=E(n,r,o,a,e[i+8],7,1770035416),a=E(a,n,r,o,e[i+9],12,-1958414417),o=E(o,a,n,r,e[i+10],17,-42063),r=E(r,o,a,n,e[i+11],22,-1990404162),n=E(n,r,o,a,e[i+12],7,1804603682),a=E(a,n,r,o,e[i+13],12,-40341101),o=E(o,a,n,r,e[i+14],17,-1502002290),r=E(r,o,a,n,e[i+15],22,1236535329),n=_(n,r,o,a,e[i+1],5,-165796510),a=_(a,n,r,o,e[i+6],9,-1069501632),o=_(o,a,n,r,e[i+11],14,643717713),r=_(r,o,a,n,e[i],20,-373897302),n=_(n,r,o,a,e[i+5],5,-701558691),a=_(a,n,r,o,e[i+10],9,38016083),o=_(o,a,n,r,e[i+15],14,-660478335),r=_(r,o,a,n,e[i+4],20,-405537848),n=_(n,r,o,a,e[i+9],5,568446438),a=_(a,n,r,o,e[i+14],9,-1019803690),o=_(o,a,n,r,e[i+3],14,-187363961),r=_(r,o,a,n,e[i+8],20,1163531501),n=_(n,r,o,a,e[i+13],5,-1444681467),a=_(a,n,r,o,e[i+2],9,-51403784),o=_(o,a,n,r,e[i+7],14,1735328473),r=_(r,o,a,n,e[i+12],20,-1926607734),n=x(n,r,o,a,e[i+5],4,-378558),a=x(a,n,r,o,e[i+8],11,-2022574463),o=x(o,a,n,r,e[i+11],16,1839030562),r=x(r,o,a,n,e[i+14],23,-35309556),n=x(n,r,o,a,e[i+1],4,-1530992060),a=x(a,n,r,o,e[i+4],11,1272893353),o=x(o,a,n,r,e[i+7],16,-155497632),r=x(r,o,a,n,e[i+10],23,-1094730640),n=x(n,r,o,a,e[i+13],4,681279174),a=x(a,n,r,o,e[i],11,-358537222),o=x(o,a,n,r,e[i+3],16,-722521979),r=x(r,o,a,n,e[i+6],23,76029189),n=x(n,r,o,a,e[i+9],4,-640364487),a=x(a,n,r,o,e[i+12],11,-421815835),o=x(o,a,n,r,e[i+15],16,530742520),r=x(r,o,a,n,e[i+2],23,-995338651),n=S(n,r,o,a,e[i],6,-198630844),a=S(a,n,r,o,e[i+7],10,1126891415),o=S(o,a,n,r,e[i+14],15,-1416354905),r=S(r,o,a,n,e[i+5],21,-57434055),n=S(n,r,o,a,e[i+12],6,1700485571),a=S(a,n,r,o,e[i+3],10,-1894986606),o=S(o,a,n,r,e[i+10],15,-1051523),r=S(r,o,a,n,e[i+1],21,-2054922799),n=S(n,r,o,a,e[i+8],6,1873313359),a=S(a,n,r,o,e[i+15],10,-30611744),o=S(o,a,n,r,e[i+6],15,-1560198380),r=S(r,o,a,n,e[i+13],21,1309151649),n=S(n,r,o,a,e[i+4],6,-145523070),a=S(a,n,r,o,e[i+11],10,-1120210379),o=S(o,a,n,r,e[i+2],15,718787259),r=S(r,o,a,n,e[i+9],21,-343485551),n=b(n,u),r=b(r,s),o=b(o,c),a=b(a,l)}return[n,r,o,a]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(m(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))}));var I=function(e,t,n){var r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return d(r)};function P(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function T(e,t){return e<<t|e>>>32-t}var C=y("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var o=0;o<r.length;++o)e.push(r.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,i=Math.ceil(a/16),u=new Array(i),s=0;s<i;++s){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=e[64*s+4*l]<<24|e[64*s+4*l+1]<<16|e[64*s+4*l+2]<<8|e[64*s+4*l+3];u[s]=c}u[i-1][14]=8*(e.length-1)/Math.pow(2,32),u[i-1][14]=Math.floor(u[i-1][14]),u[i-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<i;++f){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=u[f][p];for(var v=16;v<80;++v)d[v]=T(d[v-3]^d[v-8]^d[v-14]^d[v-16],1);for(var h=n[0],g=n[1],y=n[2],m=n[3],b=n[4],w=0;w<80;++w){var E=Math.floor(w/20),_=T(h,5)+P(E,g,y,m)+b+t[E]+d[w]>>>0;b=m,m=y,y=T(g,30)>>>0,g=h,h=_}n[0]=n[0]+h>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+m>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));var R=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)};n.d(t,"v1",(function(){return h})),n.d(t,"v3",(function(){return O})),n.d(t,"v4",(function(){return I})),n.d(t,"v5",(function(){return C})),n.d(t,"NIL",(function(){return"00000000-0000-0000-0000-000000000000"})),n.d(t,"version",(function(){return R})),n.d(t,"validate",(function(){return u})),n.d(t,"stringify",(function(){return d})),n.d(t,"parse",(function(){return g}))},334:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2527),t)},335:function(e,t,n){const{MAX_SAFE_COMPONENT_LENGTH:r}=n(526),o=n(527),a=(t=e.exports={}).re=[],i=t.src=[],u=t.t={};let s=0;const c=(e,t,n)=>{const r=s++;o(r,t),u[e]=r,i[r]=t,a[r]=new RegExp(t,n?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${i[u.NUMERICIDENTIFIER]})\\.`+`(${i[u.NUMERICIDENTIFIER]})\\.`+`(${i[u.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${i[u.NUMERICIDENTIFIERLOOSE]})\\.`+`(${i[u.NUMERICIDENTIFIERLOOSE]})\\.`+`(${i[u.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${i[u.NUMERICIDENTIFIER]}|${i[u.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${i[u.NUMERICIDENTIFIERLOOSE]}|${i[u.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${i[u.PRERELEASEIDENTIFIER]}(?:\\.${i[u.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${i[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[u.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${i[u.BUILDIDENTIFIER]}(?:\\.${i[u.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${i[u.MAINVERSION]}${i[u.PRERELEASE]}?${i[u.BUILD]}?`),c("FULL",`^${i[u.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${i[u.MAINVERSIONLOOSE]}${i[u.PRERELEASELOOSE]}?${i[u.BUILD]}?`),c("LOOSE",`^${i[u.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${i[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${i[u.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${i[u.XRANGEIDENTIFIER]})`+`(?:\\.(${i[u.XRANGEIDENTIFIER]})`+`(?:\\.(${i[u.XRANGEIDENTIFIER]})`+`(?:${i[u.PRERELEASE]})?${i[u.BUILD]}?`+")?)?"),c("XRANGEPLAINLOOSE",`[v=\\s]*(${i[u.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${i[u.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${i[u.XRANGEIDENTIFIERLOOSE]})`+`(?:${i[u.PRERELEASELOOSE]})?${i[u.BUILD]}?`+")?)?"),c("XRANGE",`^${i[u.GTLT]}\\s*${i[u.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${i[u.GTLT]}\\s*${i[u.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${r}})`+`(?:\\.(\\d{1,${r}}))?`+`(?:\\.(\\d{1,${r}}))?`+"(?:$|[^\\d])"),c("COERCERTL",i[u.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${i[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${i[u.LONETILDE]}${i[u.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${i[u.LONETILDE]}${i[u.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${i[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${i[u.LONECARET]}${i[u.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${i[u.LONECARET]}${i[u.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${i[u.GTLT]}\\s*(${i[u.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${i[u.GTLT]}\\s*(${i[u.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${i[u.GTLT]}\\s*(${i[u.LOOSEPLAIN]}|${i[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${i[u.XRANGEPLAIN]})`+"\\s+-\\s+"+`(${i[u.XRANGEPLAIN]})`+"\\s*$"),c("HYPHENRANGELOOSE",`^\\s*(${i[u.XRANGEPLAINLOOSE]})`+"\\s+-\\s+"+`(${i[u.XRANGEPLAINLOOSE]})`+"\\s*$"),c("STAR","(<|>)?=?\\s*\\*")},336:function(e,t,n){const{MAX_LENGTH:r}=n(526),{re:o,t:a}=n(335),i=n(128);e.exports=(e,t)=>{if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof i)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?o[a.LOOSE]:o[a.FULL]).test(e))return null;try{return new i(e,t)}catch(e){return null}}},436:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0,t.logger={info:function(e,t){}}},437:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var r=n(2522),o=function(){function e(e){var t=void 0===e?{}:e,n=t.value,o=t.replay;this.storage={},this.lastValue=n,this.replay=o||!1,this.uniqid=r.uniqid()}return e.prototype.next=function(e){var t=this.storage;Object.keys(t).forEach((function(n){return t[n](e)})),this.lastValue=e},e.prototype.subscribe=function(e){var t=this,n=this.uniqid();return this.storage[n]=e,this.replay&&setTimeout((function(){t.storage[n]&&t.storage[n](t.lastValue)}),0),{dispose:function(){delete t.storage[n]}}},e}();t.Observable=o},438:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformHandle=void 0,function(e){e.Safari="safari",e.Chrome="chrome",e.Browser="browser",e.Unknown="unknown"}(t.PlatformHandle||(t.PlatformHandle={}))},522:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FRAME_TRANPORT_IDS=t.FRAME_TRANSPORT_ACTIONS=t.MESSAGE_ACTIONS=t.SCRIPT_IDS=void 0;var r="CHECKOUT_EXTENSION_OBSEVATION",o={PAGE_TO_CONTENT_TRANSPORT:r+"_PAGE_TO_CONTENT_TRANSPORT"};t.FRAME_TRANPORT_IDS=o;var a={PAGE_TO_CONTENT_EVENT:r+"_PAGE_TO_CONTENT_EVENT"};t.FRAME_TRANSPORT_ACTIONS=a;var i={COLLECT_DATA:r+"_COLLECT_DATA",ENABLE_BG_SERVER:r+"_ENABLE_BG_SERVER",CONTENT_TO_BG_EVENT:r+"_PAGE_TO_CONTENT_EVENT"};t.MESSAGE_ACTIONS=i;t.SCRIPT_IDS={HONEY_ANALYTICS_CONFIG:"928a0802-4adc-4e55-9c29-45515240b713"}},523:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServerBase=t.ManagerBase=void 0;var o=n(2495);Object.defineProperty(t,"ManagerBase",{enumerable:!0,get:function(){return r(o).default}});var a=n(2496);Object.defineProperty(t,"ServerBase",{enumerable:!0,get:function(){return r(a).default}})},524:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=l(a),u=l(n(1)),s=n(1267),c=n(497);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){var t=e.tipInstanceId,n=e.templateType,u=e.isSecondary,l=void 0!==u&&u,f=e.hideCaret,d=void 0!==f&&f,p=e.isTeaser,v=void 0!==p&&p,h=e.scrollToCard,g=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["tipInstanceId","templateType","isSecondary","hideCaret","isTeaser","scrollToCard"]),y=(0,c.useTip)(t),m=o(y,1)[0].template;if(!m)return i.default.createElement(a.Fragment,null);var b=(0,s.getTemplate)(m);if(!b)return i.default.createElement(a.Fragment,null);var w=b[n];if(!w)return i.default.createElement(a.Fragment,null);var E=r({tipInstanceId:t,isSecondary:l,hideCaret:d,scrollToCard:h,isTeaser:v,templateType:n},g);return"card"===n?i.default.createElement("div",null,i.default.createElement(w,E)):i.default.createElement(w,E)};f.propTypes={tipInstanceId:u.default.string.isRequired,templateType:u.default.string.isRequired},t.default=f},525:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.FINISHED_EVENT="honeyTips:dependency:finished",o=t.CREATE_RELEVANCE_REQUEST="honeyTips:createRelevanceRequest",a=t.LOG_PREFIX="honeyTips:categories:dependencies:";t.default={FINISHED_EVENT:r,CREATE_RELEVANCE_REQUEST:o,LOG_PREFIX:a}},526:function(e,t){const n=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:n,MAX_SAFE_COMPONENT_LENGTH:16}},527:function(e,t,n){(function(t){const n="object"==typeof t&&t.env&&t.env.NODE_DEBUG&&/\bsemver\b/i.test(t.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=n}).call(this,n(123))},528:function(e,t,n){const r=n(223);e.exports=(e,t,n)=>r(e,t,n)>0},938:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2484),t)},939:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2492),t),o(n(2493),t),o(n(2494),t)},940:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2521),a=(r=o)&&r.__esModule?r:{default:r};t.default={events:a.default.events,start:function(){a.default.initialize()}}},941:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=(r=I(regeneratorRuntime.mark((function e(t){var n,r,o=t.type;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=A(),e.next=3,n.invoke(y.BackgroundAction.FrameIds);case 3:if(!(r=e.sent)||!r[o]||0!==r[o].length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.abrupt("return",r[o]);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),i=(o=I(regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=M()).debug("[CheckoutPaypal] Content script initialized"),n=A(),e.next=5,(0,x.getCheckoutSetting)(_.checkoutSettings.iFrameOriginUrl);case 5:return r=e.sent,o=new URL(r),a=new p.HoneyCheckoutServer({transport:new w.FrameTransportServer({allowedOrigins:[o.origin]})}),i=new v.PayPalCheckoutClient({transport:new b.HoneyMessagingTransportClient({id:"Content <-> Paypal Relay"}),defaultTimeoutMilliseconds:S.default.messaging.clientTimeout,options:{log:t}}),u=new h.DiscoveryRelayServer({transport:new w.FrameTransportServer({allowedOrigins:[o.origin,S.default.allowedOrigin]})}),s=new d.ContentCoordinator({log:t,backgroundClient:n,honeyCheckoutServer:a,paypalCheckoutClient:i,discoveryRelayServer:u,paypalRealyScriptPath:"/checkoutPaypal/paypal/relay.js",honeyRealyScriptPath:"/checkoutPaypal/honey/relay.js"}),e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)});t.getBackgroundClient=A;var u=O(n(7)),s=n(2523),c=O(n(9)),l=O(n(940)),f=n(2524),d=n(2526),p=n(1323),v=n(2535),h=n(1324),g=n(2536),y=n(1325),m=n(2537),b=n(1327),w=n(2547),E=n(437),_=n(414),x=n(301),S=O(n(2548));function O(e){return e&&e.__esModule?e:{default:e}}function I(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}function P(e){var t=e.type,n=e.tabId,r=e.frameId,o=e.discoveryService,a=e.timeout,i=e.observable,u=!1;o.discoveryStatus({type:t,tabId:n,frameId:r})!==m.DiscoveryStatus.Pending&&o.discover({type:t,tabId:n,frameId:r,timeout:a}).then((function(e){var t=e.subscribe((function(e){var o=e.status,a=e.message,s=e.handle;if(o===m.DiscoveryStatus.Discovered){if(u)return;u=!0,t.dispose(),i.next({tabId:n,frameId:r,origin:a,target:s,status:m.DiscoveryStatus.Discovered})}o===m.DiscoveryStatus.Error&&(c.default.warn("discovery service: discover: error: "+a+" tabId="+n+" frameId="+r),t.dispose())}))}))}function T(e){var t=e.timeout;c.default.info("discovery service: discover: paypal: start");var n=l.default.events.paypalCheckoutFrameDetected(),r=D();return u.default.addListener(s.honeyMessagesEvents.PAYPAL_IFRAME_DETECTED,(function(e,o){var a=o.tabId,i=o.frameId;c.default.debug("discovery service: discover: paypal: honeyMessages: returned frames from background",{frameId:i,tabId:a}),P({type:m.FrameIdKey.PayPal,tabId:a,frameId:i,discoveryService:r,timeout:t,observable:n})})),C().then((function(e){c.default.debug("discovery service: discover: paypal: returned frames from background",e),e.forEach((function(e){var o=e.frameId,a=e.tabId;P({type:m.FrameIdKey.PayPal,tabId:a,frameId:o,discoveryService:r,timeout:t,observable:n})}))})),n}function C(){return a({type:m.FrameIdKey.PayPal})}function R(){return a({type:m.FrameIdKey.Honey})}var k=void 0;function M(){return k||(k=f.LoggingDriverExtension.createService({honeyLogger:c.default})),k}var L=void 0;function A(){var e,t,n;return L||(e=f.LoggingDriverExtension.createService({honeyLogger:c.default}),t=new g.BackgroundClient({transport:new b.HoneyMessagingTransportClient({id:"Content <-> Background"}),defaultTimeoutMilliseconds:S.default.messaging.backgroundTimeout,options:{log:e}}),n=b.HoneyMessagingTransportClient.makeTransportInterop({honeyMessages:u.default,options:{ignoreResponse:!1,background:!0}}),t.connect(n),L=t),L}var N=void 0;function D(){var e,t,n;return N||(e=M(),t=A(),n=new h.DiscoveryRelayServer({transport:new b.HoneyMessagingTransportServer({target:u.default})}),N=new m.DiscoveryService({log:e,backgroundClient:t,discoveryRelayServer:n,paypalRealyScriptPath:"/checkoutPaypal/paypal/relay.js",honeyRealyScriptPath:"/checkoutPaypal/honey/relay.js"})),N}t.default={start:function(){D().start(),T({timeout:S.default.discovery.paypalDiscoveryTimeout})},initialize:i,getBackgroundClient:A,getDiscoveryService:D,discoverFrame:P,getPayPalFrames:C,getHoneyFrames:R,startPayPalDiscovery:T,startHoneyDiscovery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.timeout;if(!t)throw new Error("discovery service: discover: honey: timeout required");c.default.info("discovery service: discover: honey: start");var n=new E.Observable({value:void 0,replay:!1}),r=D();return R().then((function(e){c.default.debug("discovery service: discover: honey: returned frames from background",e),e.forEach((function(e){var o=e.frameId,a=e.tabId;P({type:m.FrameIdKey.Honey,tabId:a,frameId:o,discoveryService:r,timeout:t,observable:n})}))})),new Promise((function(e,r){var o=setTimeout((function(){r(new Error("discovery service: discover: honey: timeout error "+t+" ms"))}),t),a=n.subscribe((function(t){var n=t.tabId,i=t.frameId,u=t.message,s=t.status,c=t.origin,l=t.handle;if(s===m.DiscoveryStatus.Error)return clearTimeout(o),a.dispose(),void r(new Error(u));s===m.DiscoveryStatus.Discovered&&(clearTimeout(o),a.dispose(),e({tabId:n,frameId:i,message:u,status:s,origin:c,handle:l}))}))}))}}},942:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=i(r),a=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.container;return o.default.createElement(r.Fragment,null,o.default.createElement("div",{style:{position:"fixed",top:16,zIndex:"2147483647",right:16,display:"flex"}},t))};t.default=u,u.propTypes={container:a.default.node},u.defaultProps={container:void 0}},943:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=l(o),i=l(n(1)),u=n(6),s=l(n(9)),c=n(19);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasError:!1},n}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidCatch",value:(n=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.props.sendSdataEvent,s.default.error(t),n(t);case 3:case"end":return e.stop()}}),e,this)})),i=function(){var e=n.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?a.default.createElement(o.Fragment,null):e}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),t}(a.default.Component);f.propTypes={sendSdataEvent:i.default.func.isRequired,children:i.default.any},f.defaultProps={children:void 0};t.default=(0,u.connect)(null,(function(e){return{sendSdataEvent:function(t){return e((0,c.sdataTipCardErrorEvent)(t))}}}))(f)},944:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=g(n(0)),a=g(n(1)),i=n(3),u=g(n(2)),s=g(n(4)),c=n(420),l=g(n(152)),f=g(n(219)),d=g(n(500)),p=g(n(41)),v=g(n(1282)),h=g(n(891));function g(e){return e&&e.__esModule?e:{default:e}}var y=v.default.BUTTON_STATUS,m=v.default.BUTTON_COPY_STATUS,b=v.default.getButtonChoices,w={classes:a.default.object.isRequired,isLaunchpad:a.default.bool},E=function(e){var t=e.classes,n=e.isLaunchpad,a=(0,h.default)(),u=a.thoughts,v=a.status,g=a.comments,w=a.validationValue,E=a.handleSetComments,_=a.handleSetThoughts,x=a.send,S=m[v]||s.default.getMessage("Send"),O=y[v]||"",I=(0,l.default)(),P=r(I,1)[0]===c.TIPS_EXP_ENUM.thumbs_feedback,T=b(n,P).map((function(e){var t=e.value,n=e.copy;return o.default.createElement(i.RadioButton,{key:"".concat("radio-",t),value:t,copy:n})})),C="failed"===v,R={marginBottom:C?"8px":"16px",textAlign:"center"};return o.default.createElement(d.default,null,o.default.createElement("div",{className:t.main},o.default.createElement(f.default,{component:"div",variant:"title1",style:R},!n&&P?s.default.getMessage("We_want_to_hear_from_you_Whats_up_Q"):s.default.getMessage("What_are_your_thoughts_Q")),C&&o.default.createElement(f.default,{component:"div",variant:"body2",style:{color:i.Colors.red600,marginBottom:"8px"}},w),o.default.createElement(i.RadioGroup,{onChange:_,group:"paymentAmount",selectedValue:u},T),o.default.createElement(i.FormInput,{size:88,id:"forminput",label:s.default.getMessage("Comments_or_suggestions"),value:g,onChange:E}),!n&&P&&o.default.createElement(f.default,{component:"div",variant:"body2",style:{color:i.Colors.grey600,marginBottom:"18px"}},s.default.getMessageAndReplace("To_see_Tips_less_often_go_to_your_settings_GEARICON",{GEARICON:o.default.createElement(p.default,{icon:"setting-stroke-16",color:i.Colors.grey600,style:{display:"inline-flex",verticalAlign:"bottom"}})})),o.default.createElement(i.Button,{id:"SaveFeedback",size:40,buttonType:"primary",copy:S,isFlexible:!0,status:O,onClick:function(){return x(n,P)}})))};E.propTypes=w,E.defaultProps={isLaunchpad:!1},t.default=(0,u.default)({main:{padding:"24px"}})(E)},945:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=_(o),i=_(n(1)),u=n(6),s=_(n(499)),c=_(n(1225)),l=_(n(898)),f=_(n(4)),d=_(n(14)),p=_(n(101)),v=n(16),h=n(410),g=n(882),y=_(n(2581)),m=n(1186),b=(n(889),n(25)),w=_(n(1340)),E=_(n(2582));function _(e){return e&&e.__esModule?e:{default:e}}var x=function(e){var t=e.onClick,n=e.showFeedback,i=e.onSettingsClick,_=(0,u.useDispatch)(),x=(0,o.useState)(!1),S=r(x,2),O=S[0],I=S[1],P=(0,o.useState)(!1),T=r(P,2),C=T[0],R=T[1],k=(0,o.useState)("https://www.joinhoney.com/settings/feature-settings"),M=r(k,2),L=M[0],A=M[1],N=(0,o.useState)("https://dash.joinhoney.com/product-catalog/product?product_id={PRODUCT_ID}"),D=r(N,2),j=D[0],F=D[1],U=(0,o.useState)(!1),G=r(U,2),B=G[0],H=G[1],$=(0,E.default)(),V=(0,w.default)(),q=V.id,z=V.currentProduct;(0,o.useEffect)((function(){var e,t;(e=regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getTipsConfig();case 2:return t=e.sent,n=t.hasExtraSnoozeSettings,r=void 0!==n&&n,o=t.links,a=void 0===o?{}:o,e.next=9,d.default.getInfo();case 9:i=e.sent,u=i.isLoggedIn,s=void 0!==u&&u,r&&I(!0),R(s),A(a.featureSettings||L),F(a.debugProduct||j);case 16:case"end":return e.stop()}}),e,this)})),t=function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))},function(){return t.apply(this,arguments)})()}),[L]);var W=[{copy:f.default.getMessage("Hide_on_this_page"),key:"snooze_page",onClick:function(){_((0,h.setBadgeSnooze)()),H(!1)}},{copy:f.default.getMessage("Snooze_for_24_hours"),key:"snooze_24",onClick:function(){_((0,m.setTeaserSnoozeOneDay)()),H(!1)}}],Y=C?{copy:f.default.getMessage("Go_to_settings"),key:"go_to_settings",onClick:function(){_((0,g.setBadgeSnoozeAllLoggedIn)()),H(!1),window.open(L)}}:{copy:f.default.getMessage("Dont_show_on_any_store"),key:"snooze_all",onClick:function(){_((0,m.setTeaserSnoozeAll)()),H(!1)}};O&&W.push({copy:f.default.getMessage("Dont_show_on_this_site"),key:"snooze_store",onClick:function(){_((0,m.setTeaserSnoozeOneStore)()),H(!1)}},Y);(0,b.useCurrentStore)();var X=(0,b.useCurrentTipIds)()||[],K=(0,u.useSelector)((0,v.selectCategoryIdsByTipInstanceIds)(X))||{};Object.values(K);if(n&&"function"==typeof n){W.push({copy:f.default.getMessage("Leave_feedback_LOWER"),key:"leave_feedback",onClick:function(){n(),H(!1)}})}return $&&W.push({copy:f.default.getMessage("Debug_product"),key:"debug_product",onClick:function(){_((0,y.default)({containerId:q,productId:z,debugProductLink:j}))},icon:"bug-16"}),a.default.createElement(o.Fragment,null,B&&a.default.createElement(l.default,{classes:{main:{alignSelf:"end",whiteSpace:"nowrap",marginTop:"40px",right:"47px",width:"unset",position:"absolute"}},options:W}),a.default.createElement("span",{onClick:function(){"function"==typeof i&&i(),H(!B),_((0,h.setBadgeClickSettings)())}},a.default.createElement(c.default,null)),a.default.createElement("span",{onClick:t},a.default.createElement(s.default,null)))};x.propTypes={onClick:i.default.func,showFeedback:i.default.func,onSettingsClick:i.default.func},x.defaultProps={onClick:null,showFeedback:null,onSettingsClick:function(){}},t.default=x},946:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=d(o),i=d(n(1)),u=d(n(506)),s=n(6),c=n(25),l=n(413),f=n(215);function d(e){return e&&e.__esModule?e:{default:e}}var p={tipInstanceId:i.default.string.isRequired,isFullyExpandedPdp:i.default.bool,children:i.default.oneOfType([i.default.arrayOf(i.default.node),i.default.node])},v={isFullyExpandedPdp:!1,children:a.default.createElement(o.Fragment,null)},h=function(e){var t=e.tipInstanceId,n=e.children,i=e.isFullyExpandedPdp,d=(0,s.useDispatch)(),p=(0,o.useCallback)(d,[]),v=(0,f.useContainerOpen)(),h=r(v,1)[0],g=(0,c.useTipInstanceExpanded)(t),y=r(g,1)[0],m=(0,o.useRef)(),b=(0,o.useState)("100%"),w=r(b,2),E=w[0],_=w[1],x=(0,o.useRef)(!0),S=(0,o.useRef)(null);(0,o.useEffect)((function(){return function(){x.current=!1}}),[]),(0,o.useEffect)((function(){!i&&y&&p((0,l.tipShown)(t))}),[y,i,t,p,h]),(0,o.useLayoutEffect)((function(){if(m.current&&h&&x.current){var e=m.current.clientHeight;e>0&&_(e/2)}}),[h]);var O=function(){S.current&&(clearTimeout(S.current),S.current=null)};(0,o.useEffect)((function(){return function(){O()}}),[]);var I=function(){d((0,l.tipShown)(t))},P=i&&a.default.createElement(u.default,{onEnter:function(){S.current=setTimeout(I,1e3)},onLeave:O,topOffset:0,bottomOffset:E},a.default.createElement("div",null,n))||null,T=a.default.createElement(o.Fragment,null," ",n," ");return a.default.createElement("div",{ref:m},i?P:T)};h.propTypes=p,h.defaultProps=v,t.default=h},947:function(e,t){const n=/^[0-9]+$/,r=(e,t)=>{const r=n.test(e),o=n.test(t);return r&&o&&(e=+e,t=+t),e===t?0:r&&!o?-1:o&&!r?1:e<t?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},948:function(e,t,n){const r=n(223);e.exports=(e,t,n)=>0===r(e,t,n)},949:function(e,t,n){const r=n(128);e.exports=(e,t,n)=>{const o=new r(e,n),a=new r(t,n);return o.compare(a)||o.compareBuild(a)}},950:function(e,t,n){const r=n(223);e.exports=(e,t,n)=>r(e,t,n)<0},951:function(e,t,n){const r=n(223);e.exports=(e,t,n)=>r(e,t,n)>=0},952:function(e,t,n){const r=n(223);e.exports=(e,t,n)=>r(e,t,n)<=0},953:function(e,t,n){const r=Symbol("SemVer ANY");class o{static get ANY(){return r}constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}s("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(e){const t=this.options.loose?a[i.COMPARATORLOOSE]:a[i.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new c(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(s("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return u(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new l(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new l(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),a=this.semver.version===e.semver.version,i=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=u(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=u(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||a&&i||s||c}}e.exports=o;const{re:a,t:i}=n(335),u=n(1347),s=n(527),c=n(128),l=n(190)},954:function(e,t,n){const r=n(128),o=n(953),{ANY:a}=o,i=n(190),u=n(1348),s=n(528),c=n(950),l=n(952),f=n(951);e.exports=(e,t,n,d)=>{let p,v,h,g,y;switch(e=new r(e,d),t=new i(t,d),n){case">":p=s,v=l,h=c,g=">",y=">=";break;case"<":p=c,v=f,h=s,g="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(u(e,t,d))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let i=null,u=null;if(r.forEach(e=>{e.semver===a&&(e=new o(">=0.0.0")),i=i||e,u=u||e,p(e.semver,i.semver,d)?i=e:h(e.semver,u.semver,d)&&(u=e)}),i.operator===g||i.operator===y)return!1;if((!u.operator||u.operator===g)&&v(e,u.semver))return!1;if(u.operator===y&&h(e,u.semver))return!1}return!0}}});