{"version":3,"sources":["identity/ListIdentities.tsx","core/ColorButton.tsx","identity/AddIdentity.tsx","Command.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["ListIdentities","props","classes","makeStyles","theme","root","flexGrow","h3","marginTop","spacing","fontWeight","fontSize","lineHeight","color","list","width","listItemText","divider","backgroundColor","useStyles","DeleteIcon","SvgIcon","d","fill","params","URLSearchParams","window","location","search","className","referrer","url","URL","atob","get","pathname","toString","href","protocol","hostname","getReferrerHeader","List","component","aria-label","identities","map","i","ListItem","button","ListItemText","primary","name","secondary","Fragment","onClick","a","sendIdentity","navigator","clipboard","writeText","fingerprint","IconButton","edge","deleteIdentity","style","Divider","setCreation","ColorButton","withStyles","palette","main","padding","borderRadius","fontFamily","fontStyle","textTransform","Button","AddIdentity","nameInput","flex","form","display","flexDirection","alignItems","action","justifyContent","textAlign","bottom","useState","setName","regexDomain","onSubmit","e","preventDefault","createIndentity","TextField","error","test","required","label","variant","onChange","target","value","toLowerCase","_handleTextFieldChange","disabled","type","Box","length","Command","commandName","execute","obj","SendCommand","command","this","request","Promise","resolve","reject","console","log","chrome","runtime","sendMessage","response","GenerateIdentity","FetchAllIdentityName","SendIdentity","DeleteIdentity","createMuiTheme","disabledBackground","contrastThreshold","tonalOffset","typography","join","App","identity","splitDomain","split","tld","pop","host","records","ttl","redirectUrl","searchParams","append","btoa","baseDomain","JSON","stringify","encodeURIComponent","setIdentities","creation","HTMLFormElement","prototype","addInput","input","document","createElement","setAttribute","appendChild","state","result","body","getElementsByTagName","publicKey","signed","submit","confirm","fetchIdentities","useEffect","login","ThemeProvider","dangerouslySetInnerHTML","__html","b","Boolean","match","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.e9d473b2.chunk.js","sourcesContent":["import React, { Fragment } from \"react\";\nimport { Divider, IconButton, List, ListItem, ListItemText, SvgIcon } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nfunction ListIdentities(props: any) {\n\n  const useStyles = makeStyles((theme) => ({\n    root: {\n      flexGrow: 1,\n    },\n    h3: {\n      marginTop: theme.spacing(0),\n      fontWeight: 400,\n      fontSize: '14px',\n      lineHeight: '24px',\n      '& a': {\n        color: '#0A6CFF'\n      }\n    },\n    list: {\n      width: '400px'\n    },\n    listItemText: {\n      fontWeight: 500,\n      fontSize: '14px',\n      lineHeight: '24px',\n      color: 'white',\n      '&:hover': {\n        color: '#0A6CFF' \n      }\n    },\n    divider: { backgroundColor: '#242424' }\n  }));\n\n  const classes = useStyles();\n\n  function DeleteIcon(props: any) {\n    return (\n      <SvgIcon {...props}>\n        <path d=\"M10.4062 15.1875H10.9688C11.1094 15.1875 11.25 15.082 11.25 14.9062V5.34375C11.25 5.20312 11.1094 5.0625 10.9688 5.0625H10.4062C10.2305 5.0625 10.125 5.20312 10.125 5.34375V14.9062C10.125 15.082 10.2305 15.1875 10.4062 15.1875ZM4.78125 15.1875H5.34375C5.48438 15.1875 5.625 15.082 5.625 14.9062V5.34375C5.625 5.20312 5.48438 5.0625 5.34375 5.0625H4.78125C4.60547 5.0625 4.5 5.20312 4.5 5.34375V14.9062C4.5 15.082 4.60547 15.1875 4.78125 15.1875ZM15.4688 2.25H11.8125L10.6172 0.703125C10.3359 0.316406 9.73828 0 9.28125 0H6.46875C5.97656 0 5.37891 0.316406 5.09766 0.703125L3.9375 2.25H0.28125C0.105469 2.25 0 2.39062 0 2.53125V3.09375C0 3.26953 0.105469 3.375 0.28125 3.375H1.125V16.3125C1.125 17.2617 1.86328 18 2.8125 18H12.9375C13.8516 18 14.625 17.2617 14.625 16.3125V3.375H15.4688C15.6094 3.375 15.75 3.26953 15.75 3.09375V2.53125C15.75 2.39062 15.6094 2.25 15.4688 2.25ZM6.01172 1.37109C6.08203 1.23047 6.29297 1.16016 6.46875 1.125H9.28125C9.42188 1.16016 9.63281 1.23047 9.70312 1.37109L10.4062 2.25H5.34375L6.01172 1.37109ZM13.5 16.3125C13.5 16.6289 13.2188 16.875 12.9375 16.875H2.8125C2.49609 16.875 2.25 16.6289 2.25 16.3125V3.375H13.5V16.3125ZM7.59375 15.1875H8.15625C8.29688 15.1875 8.4375 15.082 8.4375 14.9062V5.34375C8.4375 5.20312 8.29688 5.0625 8.15625 5.0625H7.59375C7.41797 5.0625 7.3125 5.20312 7.3125 5.34375V14.9062C7.3125 15.082 7.41797 15.1875 7.59375 15.1875Z\" fill=\"#676767\" />\n      </SvgIcon>\n    );\n  }\n\n  const params = new URLSearchParams(window.location.search);\n\n  function getReferrerHeader() {\n    if (!props.referrer) {\n      return (<h3>&nbsp;</h3>);\n    } else {\n      let url = new URL(atob(params.get('referrer') || ''));\n      url.pathname = atob(params.get('action')?.toString() || '');\n      return (<h3 className={classes.h3}>to log in to <a href={url.protocol + '//' + url.hostname}>{url.hostname}</a></h3>)\n    }\n  }\n\n  return (\n    <div className=\"center\">\n      <h1>Choose an identity</h1>\n      { getReferrerHeader()}\n      <List component=\"nav\" className={classes.list} aria-label=\"main mailbox folders\">\n        {\n          props.identities.map((i: any) => {\n            return (\n              <Fragment key={i.name}><ListItem button >\n                <ListItemText classes={{ primary: classes.listItemText }}\n                  primary={i.name + '/'}\n                  secondary={<React.Fragment>\n                  </React.Fragment>}\n                  onClick={async () => { props.referrer ? props.sendIdentity(i.name, atob(params.get('state')?.toString() || '')) : navigator.clipboard.writeText(i.fingerprint); }} />\n                <IconButton edge=\"end\" onClick={async () => { props.deleteIdentity(i.name) }} >\n                  <DeleteIcon style={{ color: '#676767' }} />\n                </IconButton>\n              </ListItem>\n                <Divider classes={{ root: classes.divider }} />\n              </Fragment>\n            )\n          })\n        }\n        <Fragment>\n          <ListItem button >\n            <ListItemText classes={{ primary: classes.listItemText }}\n              primary=\"+&nbsp;&nbsp;Set up another identity\"\n              secondary={<React.Fragment>\n              </React.Fragment>}\n              onClick={() => props.setCreation(true)} />\n          </ListItem>\n        </Fragment>\n      </List>\n    </div>\n  );\n}\n\nexport default ListIdentities;\n","import {\n  withStyles,\n  Theme,\n} from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nconst ColorButton = withStyles((theme: Theme) => ({\n  root: {\n    color: theme.palette.primary.main,\n    backgroundColor: theme.palette.secondary.main,\n    padding: '8px 24px',\n    borderRadius: 4,\n    fontFamily: 'Roboto',\n    fontStyle: 'normal',\n    fontWeight: 500,\n    fontSize: '14px',\n    lineHeight: '24px',\n    textTransform: 'initial'\n  },\n}))(Button);\n\nexport default ColorButton;\n","import React, { Fragment, useState } from \"react\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport ColorButton from '../core/ColorButton';\nimport { Box } from \"@material-ui/core\";\n\nfunction AddIdentity(props: any) {\n\n  const useStyles = makeStyles((theme) => ({\n    root: {\n      flexGrow: 1,\n    },\n    h3: {\n      marginTop: theme.spacing(4),\n    },\n    nameInput: {\n      flex: 1,\n      marginTop: theme.spacing(1),\n    },\n    form: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: '',\n      width: 400,\n    },\n    action: {\n      display: 'flex',\n      flexDirection: 'row',\n      marginTop: theme.spacing(3),\n      justifyContent: 'space-between',\n      '& .caption': {\n        color: '#A9A9A9',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        '& span': {\n          fontSize: '12px',\n          lineHeight: '16px',\n          textAlign: 'left'\n        },\n        '& a':{\n          color: '#0A6CFF'\n        }\n      }\n    },\n    bottom: {\n      display: 'flex',\n      flexDirection: 'row',\n      marginTop: theme.spacing(6),\n      justifyContent: 'center',\n      '& .caption': {\n        color: '#A9A9A9',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        '& span': {\n          fontSize: '12px',\n          lineHeight: '16px',\n          textAlign: 'center'\n        }\n      }\n    },\n  }));\n\n  const classes = useStyles();\n\n  const [name, setName] = useState<string>('');\n\n  const _handleTextFieldChange = (e: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n    setName(e.target.value.toLowerCase());\n  }\n\n  const regexDomain = /^((xn--)?([a-z0-9-]{1,61}|[a-z0-9-]{1,30})\\.?){1,}$/;\n  return (\n    <div className=\"center\">\n      <h1>Set up a new identity</h1>\n      <h3 className={classes.h3}>Your Handshake name</h3>\n      <form className={classes.form} onSubmit={(e) => { e.preventDefault(); props.createIndentity(name); }}>\n        <TextField\n          error={regexDomain.test(name)}\n          required\n          className={classes.nameInput}\n          color=\"primary\"\n          label=\"Enter a Handshake name that you own\"\n          variant=\"outlined\"\n          onChange={e => _handleTextFieldChange(e)} />\n        <div className={classes.action}>\n          <div className='caption'>\n            <span>Handshake name not in Namebase?</span>\n            <span>See our <a href=\"https://docs.namebase.io/handshake-login/using-handshake-login\" target=\"_new\">instructions for settings the record<br /> outside of Namebase</a></span>\n          </div>\n          <ColorButton\n            variant=\"contained\"\n            disabled={!regexDomain.test(name)}\n            color=\"secondary\"\n            type=\"submit\"\n          >\n            <Box fontWeight=\"600\" component=\"div\">\n              Continue\n            </Box>\n\n          </ColorButton>\n        </div>\n        <div className={classes.bottom}>\n          <div className='caption'>\n            {props.identities.length === 0 ? (\n              <Fragment>\n                <span>Donâ€™t have a Handshake name? </span>\n                <span><a href=\"https://6cqg3vy1fsb.typeform.com/to/famUtbd0\" target=\"_new\">Request one for free</a></span>\n              </Fragment>\n            ): ''}\n          </div>\n        </div>\n      </form>\n    </div >\n  );\n}\n\nexport default AddIdentity;\n","export class Command {\n\n  public commandName: string;\n  public execute = (obj?: any) => Command.SendCommand({ command: this.commandName, ...obj });\n\n\n  constructor(commandName: string) {\n    this.commandName = commandName;\n  }\n\n  public static GenerateIdentity = new Command('GenerateIdentity');\n  public static FetchAllIdentityName = new Command('FetchAllIdentityName');\n  public static SendIdentity = new Command('SendIdentity');\n  public static DeleteIdentity = new Command('DeleteIdentity');\n\n  public static async SendCommand(request: any): Promise<any> {\n    return new Promise((resolve, reject) => {\n      console.log(`${request.command} Request`, request);\n\n      chrome.runtime.sendMessage(request, function (response) {\n        console.log(`${request.command} Response`, response);\n        resolve(response);\n      });\n    });\n  }\n}\n","import React, { useState, useEffect } from \"react\";\nimport { makeStyles, createMuiTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nimport './App.scss';\nimport ListIdentities from './identity/ListIdentities'\nimport AddIdentity from './identity/AddIdentity'\nimport { Command } from './Command'\n\nconst theme = createMuiTheme({\n  palette: {\n    action: {\n      disabled: \"white\",\n      disabledBackground: 'rgba(10, 108, 255, 0.5)',\n    },\n    primary: {\n      main: '#ffffff',\n    },\n    secondary: {\n      main: '#0A6CFF',\n    },\n    contrastThreshold: 3,\n    tonalOffset: 0.2,\n  },\n  typography: {\n    fontFamily: [\n      'Roboto',\n      'Arial',\n      'sans-serif',\n    ].join(','),\n  },\n});\n\nexport interface SimpleDialogProps {\n  open: boolean;\n  selectedValue: string;\n  onClose: (value: string) => void;\n}\n\nfunction App() {\n\n  const useStyles = makeStyles((theme) => ({\n    root: {\n      flexGrow: 1,\n    },\n  }));\n\n  const classes = useStyles();\n  const baseDomain = () => (window as any).baseDomain || 'https://www.namebase.io';\n  const createIndentity = async (name: string) => {\n    const identity = await Command.GenerateIdentity.execute({ name });\n    const splitDomain = identity.name.split('.');\n    const tld = splitDomain.pop();\n    const host = ['_auth', ...splitDomain].join('.');\n    const records = [{ type: 'TXT', host: host, value: 'authv=0;fingerprint=' + identity.fingerprint, ttl: 60 }];\n    const redirectUrl = new URL(window.location.toString());\n    redirectUrl.searchParams.append('login', btoa(identity.name));\n    const url = new URL(`${baseDomain()}/next/domain-manager/${tld}/records`);\n    url.searchParams.append('records', btoa(JSON.stringify(records)));\n    url.searchParams.append('redirect', encodeURIComponent(encodeURIComponent(redirectUrl.toString())));\n    window.location.href = url.toString();\n    setCreation(false);\n  }\n  const params = new URLSearchParams(window.location.search)\n  const referrer = atob(params.get('referrer') || '');\n  const action = atob(params.get('action') || '');\n\n  const [identities, setIdentities] = useState<any>([])\n  const [creation, setCreation] = useState<any>(false)\n\n  HTMLFormElement.prototype.addInput = function (name: string, value: string) {\n    const input = document.createElement('input');\n    input.setAttribute('type', 'hidden');\n    input.setAttribute('name', name);\n    input.setAttribute('value', value);\n    this.appendChild(input);\n  }\n\n  const sendIdentity = async (name: string, state: string) => {\n    if(!referrer){ return; } \n    const result = await Command.SendIdentity.execute({ name, state });\n    const body = document.getElementsByTagName('body')[0];\n    const form = document.createElement('form');\n    const url = new URL(referrer);\n    url.pathname = action;\n    form.setAttribute('action', url.toString());\n    form.setAttribute('method', 'POST');\n    form.addInput('publicKey', btoa(result.publicKey));\n    form.addInput('signed', btoa(result.signed))\n    form.addInput('domain', btoa(result.name));\n\n    body.appendChild(form)\n    form.submit();\n  }\n\n  const deleteIdentity = async (name: string) => {\n    if (window.confirm(`Are you sure you want to delete \"${name}\"?`)) {\n      await Command.DeleteIdentity.execute({ name });\n      await fetchIdentities();\n    }\n  }\n\n  const fetchIdentities = async () => {\n    const identities = await Command.FetchAllIdentityName.execute() || [];\n    setIdentities(identities);\n  }\n\n  useEffect(() => {\n    fetchIdentities();\n    const login = params.get('login');\n    const state = params.get('state');\n    if(login && state){\n     sendIdentity(atob(login), atob(state));\n    }\n  }, []);\n\n\n  const logo = {\n    __html: `<svg class=\"logo\" width=\"39\" height=\"40\" viewBox=\"0 0 39 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M14.9107 0C14.8632 0 14.7169 0 14.6038 0.209661C14.4576 0.479226 3.1254 21.4332 0.937593 25.4796H5.94983L8.98876 19.609C9.11567 19.3644 9.35639 19.2282 9.60607 19.2239C9.60923 19.2236 9.61239 19.223 9.61559 19.2223C9.62009 19.2213 9.62469 19.2204 9.62952 19.2204H27.9873C27.7279 18.7533 27.3982 18.1592 26.9996 17.439L26.8973 17.2544C26.4022 16.3611 25.8493 15.3635 25.5443 14.8168L13.2078 14.8339H13.2071C13.2057 14.8339 13.2044 14.8332 13.203 14.8332L12.8878 14.8339H12.8871H12.8864C12.8861 14.8339 12.8859 14.8337 12.8857 14.8335C12.8855 14.8334 12.8854 14.8332 12.885 14.8332C12.8292 14.8332 12.776 14.8253 12.7243 14.8125C12.715 14.8103 12.7063 14.8073 12.6976 14.8044L12.6976 14.8044L12.6975 14.8044L12.6975 14.8044C12.692 14.8025 12.6865 14.8006 12.6809 14.799C12.6402 14.7861 12.6015 14.7697 12.565 14.7505C12.5611 14.7486 12.5573 14.7473 12.5535 14.746C12.5485 14.7443 12.5435 14.7426 12.5388 14.7398C12.5346 14.7373 12.531 14.7344 12.5274 14.7316L12.5274 14.7316C12.5238 14.7287 12.5202 14.7259 12.516 14.7234C12.4946 14.7098 12.4746 14.6948 12.4546 14.6784L12.4516 14.676C12.4347 14.6626 12.4185 14.6497 12.4029 14.6349C12.3895 14.6217 12.3771 14.6075 12.3648 14.5935L12.356 14.5836C12.3401 14.565 12.325 14.5472 12.3119 14.528C12.3005 14.5121 12.2911 14.4959 12.2815 14.4795L12.2753 14.4688C12.2636 14.4481 12.2525 14.4281 12.2429 14.4067C12.2341 14.3872 12.227 14.3665 12.2201 14.3462L12.2201 14.3462L12.2181 14.3404L12.2161 14.3346C12.2092 14.3138 12.2024 14.2935 12.1974 14.2719C12.1918 14.2498 12.1884 14.2277 12.1856 14.2056C12.1815 14.1792 12.1787 14.1529 12.1781 14.1258L12.1777 14.122L12.1768 14.1147C12.176 14.1094 12.1753 14.1042 12.1753 14.0987C12.1753 14.0939 12.1757 14.0894 12.1762 14.0849C12.1765 14.0824 12.1768 14.0799 12.1771 14.0775L12.1779 14.071C12.1783 14.0681 12.1786 14.0652 12.1787 14.0623C12.1794 14.0352 12.1822 14.0081 12.1863 13.9803C12.1898 13.9582 12.1946 13.9361 12.2001 13.914C12.2063 13.8904 12.2132 13.8676 12.2208 13.8441C12.2298 13.8198 12.2394 13.7963 12.2505 13.7735C12.2527 13.7685 12.2546 13.7636 12.2565 13.7588L12.2607 13.7481C12.2622 13.7446 12.2638 13.7412 12.2656 13.7378L19.7106 0.000713134L14.9107 0ZM30.5524 8.63195L32.9644 13.0477H38.0449C37.6717 12.4151 37.0192 11.3069 36.4737 10.3798L36.0256 9.61858L35.5639 8.83448C35.4956 8.71895 35.3501 8.63338 35.2253 8.63338L30.5524 8.63195ZM24.0128 40C24.0604 40 24.2073 40 24.3204 39.7911L37.9874 14.5197H32.9717L29.9334 20.3082C29.8555 20.4559 29.7334 20.56 29.5955 20.6234C29.5803 20.6306 29.5651 20.637 29.5493 20.6434C29.5196 20.6548 29.4899 20.6648 29.4596 20.6719C29.4203 20.6819 29.3789 20.6862 29.3375 20.6891C29.3329 20.6894 29.3284 20.6903 29.3239 20.6911C29.3184 20.6922 29.3129 20.6933 29.3072 20.6933L29.3052 20.693C29.3044 20.6928 29.3035 20.6926 29.3023 20.6926C29.3003 20.6926 29.2989 20.6933 29.2975 20.6933H10.866L13.3821 25.1832L26.0365 25.1661H26.0372C26.2896 25.1661 26.5227 25.3045 26.651 25.5298C26.7793 25.7552 26.7821 26.0333 26.6586 26.2615L19.2337 39.9986C19.9276 39.9986 21.0932 39.9993 22.1037 40H24.0128ZM17.9956 39.2685L17.3962 38.2516C16.6285 36.9458 15.645 35.2742 15.5339 35.0909C15.4967 35.0289 15.4795 34.8777 15.5574 34.7337C15.7353 34.4042 19.0957 28.1664 19.9144 26.646L24.8211 26.6396L17.9956 39.2685ZM7.19097 26.2061L9.62984 30.6718C10.1527 29.6627 11.3486 27.3436 12.1149 25.8567L9.64916 21.4573L7.19097 26.2061ZM6.35521 31.3671C5.45703 31.3671 4.56246 31.3667 4.06769 31.3665L3.6977 31.3664H3.69701C3.57562 31.3664 3.42871 31.2787 3.3618 31.166L2.56793 29.8175C2.00235 28.8562 1.2809 27.6303 0.880859 26.9521H5.96138L8.37266 31.3678L7.53603 31.3675C7.16609 31.3673 6.76086 31.3671 6.35521 31.3671ZM20.9375 0.747871L21.3831 1.50379C22.1659 2.8345 23.2715 4.71289 23.3888 4.90829C23.426 4.97034 23.4433 5.12081 23.3646 5.26557L19.0076 13.3532L14.103 13.3596L20.9375 0.747871ZM31.7332 13.7906L29.293 9.32285C28.8447 10.1658 27.9211 11.9088 27.2733 13.1311C27.0728 13.5095 26.8988 13.838 26.7734 14.0745C27.0541 14.5765 27.5521 15.4743 28.2349 16.7073C28.5805 17.3313 28.9488 17.996 29.2454 18.5294L31.7332 13.7906Z\" fill=\"white\" />\n</svg>`};\n  return (\n    <ThemeProvider theme={theme}>\n      <Router>\n        <div className='center'>\n          <div className={classes.root}>\n            <div className=\"head\">\n             {creation ? (<div className=\"back\" onClick={() => setCreation(false)}>&#8592;</div>) : (<span></span>)}\n             <span className=\"center\" dangerouslySetInnerHTML={logo}></span>\n            </div>\n            {\n              identities.length && !creation ?\n                (<ListIdentities\n                  identities={identities}\n                  sendIdentity={sendIdentity}\n                  setCreation={(b: boolean) => setCreation(b)}\n                  deleteIdentity={deleteIdentity}\n                  referrer={referrer}/>)\n                :\n                (<AddIdentity createIndentity={createIndentity} identities={identities} />)\n            }\n          </div>\n        </div>\n      </Router>\n    </ThemeProvider>\n\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'fontsource-roboto-mono';\nimport 'fontsource-roboto';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}